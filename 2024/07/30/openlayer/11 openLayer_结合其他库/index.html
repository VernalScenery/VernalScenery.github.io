<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>11 openLayer_结合其他库 | 春和景明的记事本</title><meta name="author" content="Scenery"><meta name="copyright" content="Scenery"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1 openlayers 与 Echarts安装两个包 12npm install echarts --savenpm install ol-echarts --save  主要是使用如下代码 123456import * as echarts from &amp;amp;#x27;echarts&amp;amp;#x27;;im"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://vernalscenery.github.io/2024/07/30/openlayer/11%20openLayer_%E7%BB%93%E5%90%88%E5%85%B6%E4%BB%96%E5%BA%93/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '11 openLayer_结合其他库',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-11-11 19:50:26'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/./img/1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">59</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/./img/1.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="春和景明的记事本"><span class="site-name">春和景明的记事本</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">11 openLayer_结合其他库</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-29T20:01:25.000Z" title="发表于 2024-07-30 04:01:25">2024-07-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-11-11T11:50:26.472Z" title="更新于 2024-11-11 19:50:26">2024-11-11</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">19.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>107分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="11 openLayer_结合其他库"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-openlayers-与-Echarts"><a href="#1-openlayers-与-Echarts" class="headerlink" title="1 openlayers 与 Echarts"></a>1 openlayers 与 Echarts</h2><p>安装两个包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install echarts --save</span><br><span class="line">npm install ol-echarts --save</span><br></pre></td></tr></table></figure>

<p>主要是使用如下代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">EChartsLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol-echarts&#x27;</span>;</span><br><span class="line"><span class="comment">//将echarts图标地图生成一个echarts的图层</span></span><br><span class="line"><span class="keyword">let</span> echartsLayer = <span class="keyword">new</span> <span class="title class_">EChartsLayer</span>(<span class="title function_">getOption</span>());</span><br><span class="line"><span class="comment">//将echarts生成的图层追加到openlayers的图层当中</span></span><br><span class="line">echartsLayer.<span class="title function_">appendTo</span>(map);</span><br></pre></td></tr></table></figure>

<h3 id="1-1-散点图"><a href="#1-1-散点图" class="headerlink" title="1.1 散点图"></a>1.1 散点图</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/QQ_1722330343847.png" alt="QQ_1722330343847.png|1214"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">EChartsLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol-echarts&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">interface <span class="title class_">Data</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: keyof <span class="keyword">typeof</span> geoCoordMap;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">value</span>: number;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">data</span>: <span class="title class_">Data</span>[] = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;海门&#x27;</span>, <span class="attr">value</span>: <span class="number">9</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;鄂尔多斯&#x27;</span>, <span class="attr">value</span>: <span class="number">12</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;招远&#x27;</span>, <span class="attr">value</span>: <span class="number">12</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;舟山&#x27;</span>, <span class="attr">value</span>: <span class="number">12</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;齐齐哈尔&#x27;</span>, <span class="attr">value</span>: <span class="number">14</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;盐城&#x27;</span>, <span class="attr">value</span>: <span class="number">15</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;赤峰&#x27;</span>, <span class="attr">value</span>: <span class="number">16</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;青岛&#x27;</span>, <span class="attr">value</span>: <span class="number">18</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;乳山&#x27;</span>, <span class="attr">value</span>: <span class="number">18</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;金昌&#x27;</span>, <span class="attr">value</span>: <span class="number">19</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;泉州&#x27;</span>, <span class="attr">value</span>: <span class="number">21</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;莱西&#x27;</span>, <span class="attr">value</span>: <span class="number">21</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;日照&#x27;</span>, <span class="attr">value</span>: <span class="number">21</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;胶南&#x27;</span>, <span class="attr">value</span>: <span class="number">22</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;南通&#x27;</span>, <span class="attr">value</span>: <span class="number">23</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;拉萨&#x27;</span>, <span class="attr">value</span>: <span class="number">24</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;云浮&#x27;</span>, <span class="attr">value</span>: <span class="number">24</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;梅州&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;文登&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;攀枝花&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;威海&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;承德&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;厦门&#x27;</span>, <span class="attr">value</span>: <span class="number">26</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;汕尾&#x27;</span>, <span class="attr">value</span>: <span class="number">26</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;潮州&#x27;</span>, <span class="attr">value</span>: <span class="number">26</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;丹东&#x27;</span>, <span class="attr">value</span>: <span class="number">27</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;太仓&#x27;</span>, <span class="attr">value</span>: <span class="number">27</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;曲靖&#x27;</span>, <span class="attr">value</span>: <span class="number">27</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;烟台&#x27;</span>, <span class="attr">value</span>: <span class="number">28</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;福州&#x27;</span>, <span class="attr">value</span>: <span class="number">29</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;瓦房店&#x27;</span>, <span class="attr">value</span>: <span class="number">30</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;即墨&#x27;</span>, <span class="attr">value</span>: <span class="number">30</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;抚顺&#x27;</span>, <span class="attr">value</span>: <span class="number">31</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;玉溪&#x27;</span>, <span class="attr">value</span>: <span class="number">31</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;张家口&#x27;</span>, <span class="attr">value</span>: <span class="number">31</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;阳泉&#x27;</span>, <span class="attr">value</span>: <span class="number">31</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;莱州&#x27;</span>, <span class="attr">value</span>: <span class="number">32</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;湖州&#x27;</span>, <span class="attr">value</span>: <span class="number">32</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;汕头&#x27;</span>, <span class="attr">value</span>: <span class="number">32</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;昆山&#x27;</span>, <span class="attr">value</span>: <span class="number">33</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宁波&#x27;</span>, <span class="attr">value</span>: <span class="number">33</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;湛江&#x27;</span>, <span class="attr">value</span>: <span class="number">33</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;揭阳&#x27;</span>, <span class="attr">value</span>: <span class="number">34</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;荣成&#x27;</span>, <span class="attr">value</span>: <span class="number">34</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;连云港&#x27;</span>, <span class="attr">value</span>: <span class="number">35</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;葫芦岛&#x27;</span>, <span class="attr">value</span>: <span class="number">35</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;常熟&#x27;</span>, <span class="attr">value</span>: <span class="number">36</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;东莞&#x27;</span>, <span class="attr">value</span>: <span class="number">36</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;河源&#x27;</span>, <span class="attr">value</span>: <span class="number">36</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;淮安&#x27;</span>, <span class="attr">value</span>: <span class="number">36</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;泰州&#x27;</span>, <span class="attr">value</span>: <span class="number">36</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;南宁&#x27;</span>, <span class="attr">value</span>: <span class="number">37</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;营口&#x27;</span>, <span class="attr">value</span>: <span class="number">37</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;惠州&#x27;</span>, <span class="attr">value</span>: <span class="number">37</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;江阴&#x27;</span>, <span class="attr">value</span>: <span class="number">37</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;蓬莱&#x27;</span>, <span class="attr">value</span>: <span class="number">37</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;韶关&#x27;</span>, <span class="attr">value</span>: <span class="number">38</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;嘉峪关&#x27;</span>, <span class="attr">value</span>: <span class="number">38</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span>, <span class="attr">value</span>: <span class="number">38</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;延安&#x27;</span>, <span class="attr">value</span>: <span class="number">38</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;太原&#x27;</span>, <span class="attr">value</span>: <span class="number">39</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;清远&#x27;</span>, <span class="attr">value</span>: <span class="number">39</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;中山&#x27;</span>, <span class="attr">value</span>: <span class="number">39</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;昆明&#x27;</span>, <span class="attr">value</span>: <span class="number">39</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;寿光&#x27;</span>, <span class="attr">value</span>: <span class="number">40</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;盘锦&#x27;</span>, <span class="attr">value</span>: <span class="number">40</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;长治&#x27;</span>, <span class="attr">value</span>: <span class="number">41</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;深圳&#x27;</span>, <span class="attr">value</span>: <span class="number">41</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;珠海&#x27;</span>, <span class="attr">value</span>: <span class="number">42</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宿迁&#x27;</span>, <span class="attr">value</span>: <span class="number">43</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;咸阳&#x27;</span>, <span class="attr">value</span>: <span class="number">43</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;铜川&#x27;</span>, <span class="attr">value</span>: <span class="number">44</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;平度&#x27;</span>, <span class="attr">value</span>: <span class="number">44</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;佛山&#x27;</span>, <span class="attr">value</span>: <span class="number">44</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;海口&#x27;</span>, <span class="attr">value</span>: <span class="number">44</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;江门&#x27;</span>, <span class="attr">value</span>: <span class="number">45</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;章丘&#x27;</span>, <span class="attr">value</span>: <span class="number">45</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;肇庆&#x27;</span>, <span class="attr">value</span>: <span class="number">46</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;大连&#x27;</span>, <span class="attr">value</span>: <span class="number">47</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;临汾&#x27;</span>, <span class="attr">value</span>: <span class="number">47</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;吴江&#x27;</span>, <span class="attr">value</span>: <span class="number">47</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;石嘴山&#x27;</span>, <span class="attr">value</span>: <span class="number">49</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;沈阳&#x27;</span>, <span class="attr">value</span>: <span class="number">50</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;苏州&#x27;</span>, <span class="attr">value</span>: <span class="number">50</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;茂名&#x27;</span>, <span class="attr">value</span>: <span class="number">50</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;嘉兴&#x27;</span>, <span class="attr">value</span>: <span class="number">51</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;长春&#x27;</span>, <span class="attr">value</span>: <span class="number">51</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;胶州&#x27;</span>, <span class="attr">value</span>: <span class="number">52</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;银川&#x27;</span>, <span class="attr">value</span>: <span class="number">52</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;张家港&#x27;</span>, <span class="attr">value</span>: <span class="number">52</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;三门峡&#x27;</span>, <span class="attr">value</span>: <span class="number">53</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;锦州&#x27;</span>, <span class="attr">value</span>: <span class="number">54</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;南昌&#x27;</span>, <span class="attr">value</span>: <span class="number">54</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;柳州&#x27;</span>, <span class="attr">value</span>: <span class="number">54</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;三亚&#x27;</span>, <span class="attr">value</span>: <span class="number">54</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;自贡&#x27;</span>, <span class="attr">value</span>: <span class="number">56</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;吉林&#x27;</span>, <span class="attr">value</span>: <span class="number">56</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;阳江&#x27;</span>, <span class="attr">value</span>: <span class="number">57</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;泸州&#x27;</span>, <span class="attr">value</span>: <span class="number">57</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;西宁&#x27;</span>, <span class="attr">value</span>: <span class="number">57</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宜宾&#x27;</span>, <span class="attr">value</span>: <span class="number">58</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;呼和浩特&#x27;</span>, <span class="attr">value</span>: <span class="number">58</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;成都&#x27;</span>, <span class="attr">value</span>: <span class="number">58</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;大同&#x27;</span>, <span class="attr">value</span>: <span class="number">58</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;镇江&#x27;</span>, <span class="attr">value</span>: <span class="number">59</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;桂林&#x27;</span>, <span class="attr">value</span>: <span class="number">59</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;张家界&#x27;</span>, <span class="attr">value</span>: <span class="number">59</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宜兴&#x27;</span>, <span class="attr">value</span>: <span class="number">59</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;北海&#x27;</span>, <span class="attr">value</span>: <span class="number">60</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;西安&#x27;</span>, <span class="attr">value</span>: <span class="number">61</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;金坛&#x27;</span>, <span class="attr">value</span>: <span class="number">62</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;东营&#x27;</span>, <span class="attr">value</span>: <span class="number">62</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;牡丹江&#x27;</span>, <span class="attr">value</span>: <span class="number">63</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;遵义&#x27;</span>, <span class="attr">value</span>: <span class="number">63</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;绍兴&#x27;</span>, <span class="attr">value</span>: <span class="number">63</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;扬州&#x27;</span>, <span class="attr">value</span>: <span class="number">64</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;常州&#x27;</span>, <span class="attr">value</span>: <span class="number">64</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;潍坊&#x27;</span>, <span class="attr">value</span>: <span class="number">65</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;重庆&#x27;</span>, <span class="attr">value</span>: <span class="number">66</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;台州&#x27;</span>, <span class="attr">value</span>: <span class="number">67</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;南京&#x27;</span>, <span class="attr">value</span>: <span class="number">67</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;滨州&#x27;</span>, <span class="attr">value</span>: <span class="number">70</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;贵阳&#x27;</span>, <span class="attr">value</span>: <span class="number">71</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;无锡&#x27;</span>, <span class="attr">value</span>: <span class="number">71</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;本溪&#x27;</span>, <span class="attr">value</span>: <span class="number">71</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;克拉玛依&#x27;</span>, <span class="attr">value</span>: <span class="number">72</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;渭南&#x27;</span>, <span class="attr">value</span>: <span class="number">72</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;马鞍山&#x27;</span>, <span class="attr">value</span>: <span class="number">72</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宝鸡&#x27;</span>, <span class="attr">value</span>: <span class="number">72</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;焦作&#x27;</span>, <span class="attr">value</span>: <span class="number">75</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;句容&#x27;</span>, <span class="attr">value</span>: <span class="number">75</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span>, <span class="attr">value</span>: <span class="number">79</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;徐州&#x27;</span>, <span class="attr">value</span>: <span class="number">79</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;衡水&#x27;</span>, <span class="attr">value</span>: <span class="number">80</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;包头&#x27;</span>, <span class="attr">value</span>: <span class="number">80</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;绵阳&#x27;</span>, <span class="attr">value</span>: <span class="number">80</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;乌鲁木齐&#x27;</span>, <span class="attr">value</span>: <span class="number">84</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;枣庄&#x27;</span>, <span class="attr">value</span>: <span class="number">84</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;杭州&#x27;</span>, <span class="attr">value</span>: <span class="number">84</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;淄博&#x27;</span>, <span class="attr">value</span>: <span class="number">85</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;鞍山&#x27;</span>, <span class="attr">value</span>: <span class="number">86</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;溧阳&#x27;</span>, <span class="attr">value</span>: <span class="number">86</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;库尔勒&#x27;</span>, <span class="attr">value</span>: <span class="number">86</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;安阳&#x27;</span>, <span class="attr">value</span>: <span class="number">90</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;开封&#x27;</span>, <span class="attr">value</span>: <span class="number">90</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;济南&#x27;</span>, <span class="attr">value</span>: <span class="number">92</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;德阳&#x27;</span>, <span class="attr">value</span>: <span class="number">93</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;温州&#x27;</span>, <span class="attr">value</span>: <span class="number">95</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;九江&#x27;</span>, <span class="attr">value</span>: <span class="number">96</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;邯郸&#x27;</span>, <span class="attr">value</span>: <span class="number">98</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;临安&#x27;</span>, <span class="attr">value</span>: <span class="number">99</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;兰州&#x27;</span>, <span class="attr">value</span>: <span class="number">99</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;沧州&#x27;</span>, <span class="attr">value</span>: <span class="number">100</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;临沂&#x27;</span>, <span class="attr">value</span>: <span class="number">103</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;南充&#x27;</span>, <span class="attr">value</span>: <span class="number">104</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;天津&#x27;</span>, <span class="attr">value</span>: <span class="number">105</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;富阳&#x27;</span>, <span class="attr">value</span>: <span class="number">106</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;泰安&#x27;</span>, <span class="attr">value</span>: <span class="number">112</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;诸暨&#x27;</span>, <span class="attr">value</span>: <span class="number">112</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;郑州&#x27;</span>, <span class="attr">value</span>: <span class="number">113</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;哈尔滨&#x27;</span>, <span class="attr">value</span>: <span class="number">114</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;聊城&#x27;</span>, <span class="attr">value</span>: <span class="number">116</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;芜湖&#x27;</span>, <span class="attr">value</span>: <span class="number">117</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;唐山&#x27;</span>, <span class="attr">value</span>: <span class="number">119</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;平顶山&#x27;</span>, <span class="attr">value</span>: <span class="number">119</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;邢台&#x27;</span>, <span class="attr">value</span>: <span class="number">119</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;德州&#x27;</span>, <span class="attr">value</span>: <span class="number">120</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;济宁&#x27;</span>, <span class="attr">value</span>: <span class="number">120</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;荆州&#x27;</span>, <span class="attr">value</span>: <span class="number">127</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宜昌&#x27;</span>, <span class="attr">value</span>: <span class="number">130</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;义乌&#x27;</span>, <span class="attr">value</span>: <span class="number">132</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;丽水&#x27;</span>, <span class="attr">value</span>: <span class="number">133</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;洛阳&#x27;</span>, <span class="attr">value</span>: <span class="number">134</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;秦皇岛&#x27;</span>, <span class="attr">value</span>: <span class="number">136</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;株洲&#x27;</span>, <span class="attr">value</span>: <span class="number">143</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;石家庄&#x27;</span>, <span class="attr">value</span>: <span class="number">147</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;莱芜&#x27;</span>, <span class="attr">value</span>: <span class="number">148</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;常德&#x27;</span>, <span class="attr">value</span>: <span class="number">152</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;保定&#x27;</span>, <span class="attr">value</span>: <span class="number">153</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;湘潭&#x27;</span>, <span class="attr">value</span>: <span class="number">154</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;金华&#x27;</span>, <span class="attr">value</span>: <span class="number">157</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;岳阳&#x27;</span>, <span class="attr">value</span>: <span class="number">169</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;长沙&#x27;</span>, <span class="attr">value</span>: <span class="number">175</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;衢州&#x27;</span>, <span class="attr">value</span>: <span class="number">177</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;廊坊&#x27;</span>, <span class="attr">value</span>: <span class="number">193</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;菏泽&#x27;</span>, <span class="attr">value</span>: <span class="number">194</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;合肥&#x27;</span>, <span class="attr">value</span>: <span class="number">229</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;武汉&#x27;</span>, <span class="attr">value</span>: <span class="number">273</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;大庆&#x27;</span>, <span class="attr">value</span>: <span class="number">279</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> geoCoordMap = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  海门: [<span class="number">121.15</span>, <span class="number">31.89</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  鄂尔多斯: [<span class="number">109.781327</span>, <span class="number">39.608266</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  招远: [<span class="number">120.38</span>, <span class="number">37.35</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  舟山: [<span class="number">122.207216</span>, <span class="number">29.985295</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  齐齐哈尔: [<span class="number">123.97</span>, <span class="number">47.33</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  盐城: [<span class="number">120.13</span>, <span class="number">33.38</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  赤峰: [<span class="number">118.87</span>, <span class="number">42.28</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  青岛: [<span class="number">120.33</span>, <span class="number">36.07</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  乳山: [<span class="number">121.52</span>, <span class="number">36.89</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  金昌: [<span class="number">102.188043</span>, <span class="number">38.520089</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  泉州: [<span class="number">118.58</span>, <span class="number">24.93</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  莱西: [<span class="number">120.53</span>, <span class="number">36.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  日照: [<span class="number">119.46</span>, <span class="number">35.42</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  胶南: [<span class="number">119.97</span>, <span class="number">35.88</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南通: [<span class="number">121.05</span>, <span class="number">32.08</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  拉萨: [<span class="number">91.11</span>, <span class="number">29.97</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  云浮: [<span class="number">112.02</span>, <span class="number">22.93</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  梅州: [<span class="number">116.1</span>, <span class="number">24.55</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  文登: [<span class="number">122.05</span>, <span class="number">37.2</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  上海: [<span class="number">121.48</span>, <span class="number">31.22</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  攀枝花: [<span class="number">101.718637</span>, <span class="number">26.582347</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  威海: [<span class="number">122.1</span>, <span class="number">37.5</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  承德: [<span class="number">117.93</span>, <span class="number">40.97</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  厦门: [<span class="number">118.1</span>, <span class="number">24.46</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  汕尾: [<span class="number">115.375279</span>, <span class="number">22.786211</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  潮州: [<span class="number">116.63</span>, <span class="number">23.68</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  丹东: [<span class="number">124.37</span>, <span class="number">40.13</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  太仓: [<span class="number">121.1</span>, <span class="number">31.45</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  曲靖: [<span class="number">103.79</span>, <span class="number">25.51</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  烟台: [<span class="number">121.39</span>, <span class="number">37.52</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  福州: [<span class="number">119.3</span>, <span class="number">26.08</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  瓦房店: [<span class="number">121.979603</span>, <span class="number">39.627114</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  即墨: [<span class="number">120.45</span>, <span class="number">36.38</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  抚顺: [<span class="number">123.97</span>, <span class="number">41.97</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  玉溪: [<span class="number">102.52</span>, <span class="number">24.35</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  张家口: [<span class="number">114.87</span>, <span class="number">40.82</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  阳泉: [<span class="number">113.57</span>, <span class="number">37.85</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  莱州: [<span class="number">119.942327</span>, <span class="number">37.177017</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  湖州: [<span class="number">120.1</span>, <span class="number">30.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  汕头: [<span class="number">116.69</span>, <span class="number">23.39</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  昆山: [<span class="number">120.95</span>, <span class="number">31.39</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宁波: [<span class="number">121.56</span>, <span class="number">29.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  湛江: [<span class="number">110.359377</span>, <span class="number">21.270708</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  揭阳: [<span class="number">116.35</span>, <span class="number">23.55</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  荣成: [<span class="number">122.41</span>, <span class="number">37.16</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  连云港: [<span class="number">119.16</span>, <span class="number">34.59</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  葫芦岛: [<span class="number">120.836932</span>, <span class="number">40.711052</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  常熟: [<span class="number">120.74</span>, <span class="number">31.64</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  东莞: [<span class="number">113.75</span>, <span class="number">23.04</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  河源: [<span class="number">114.68</span>, <span class="number">23.73</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  淮安: [<span class="number">119.15</span>, <span class="number">33.5</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  泰州: [<span class="number">119.9</span>, <span class="number">32.49</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南宁: [<span class="number">108.33</span>, <span class="number">22.84</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  营口: [<span class="number">122.18</span>, <span class="number">40.65</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  惠州: [<span class="number">114.4</span>, <span class="number">23.09</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  江阴: [<span class="number">120.26</span>, <span class="number">31.91</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  蓬莱: [<span class="number">120.75</span>, <span class="number">37.8</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  韶关: [<span class="number">113.62</span>, <span class="number">24.84</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  嘉峪关: [<span class="number">98.289152</span>, <span class="number">39.77313</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  广州: [<span class="number">113.23</span>, <span class="number">23.16</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  延安: [<span class="number">109.47</span>, <span class="number">36.6</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  太原: [<span class="number">112.53</span>, <span class="number">37.87</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  清远: [<span class="number">113.01</span>, <span class="number">23.7</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  中山: [<span class="number">113.38</span>, <span class="number">22.52</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  昆明: [<span class="number">102.73</span>, <span class="number">25.04</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  寿光: [<span class="number">118.73</span>, <span class="number">36.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  盘锦: [<span class="number">122.070714</span>, <span class="number">41.119997</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  长治: [<span class="number">113.08</span>, <span class="number">36.18</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  深圳: [<span class="number">114.07</span>, <span class="number">22.62</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  珠海: [<span class="number">113.52</span>, <span class="number">22.3</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宿迁: [<span class="number">118.3</span>, <span class="number">33.96</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  咸阳: [<span class="number">108.72</span>, <span class="number">34.36</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  铜川: [<span class="number">109.11</span>, <span class="number">35.09</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  平度: [<span class="number">119.97</span>, <span class="number">36.77</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  佛山: [<span class="number">113.11</span>, <span class="number">23.05</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  海口: [<span class="number">110.35</span>, <span class="number">20.02</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  江门: [<span class="number">113.06</span>, <span class="number">22.61</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  章丘: [<span class="number">117.53</span>, <span class="number">36.72</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  肇庆: [<span class="number">112.44</span>, <span class="number">23.05</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  大连: [<span class="number">121.62</span>, <span class="number">38.92</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  临汾: [<span class="number">111.5</span>, <span class="number">36.08</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  吴江: [<span class="number">120.63</span>, <span class="number">31.16</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  石嘴山: [<span class="number">106.39</span>, <span class="number">39.04</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  沈阳: [<span class="number">123.38</span>, <span class="number">41.8</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  苏州: [<span class="number">120.62</span>, <span class="number">31.32</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  茂名: [<span class="number">110.88</span>, <span class="number">21.68</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  嘉兴: [<span class="number">120.76</span>, <span class="number">30.77</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  长春: [<span class="number">125.35</span>, <span class="number">43.88</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  胶州: [<span class="number">120.03336</span>, <span class="number">36.264622</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  银川: [<span class="number">106.27</span>, <span class="number">38.47</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  张家港: [<span class="number">120.555821</span>, <span class="number">31.875428</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  三门峡: [<span class="number">111.19</span>, <span class="number">34.76</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  锦州: [<span class="number">121.15</span>, <span class="number">41.13</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南昌: [<span class="number">115.89</span>, <span class="number">28.68</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  柳州: [<span class="number">109.4</span>, <span class="number">24.33</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  三亚: [<span class="number">109.511909</span>, <span class="number">18.252847</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  自贡: [<span class="number">104.778442</span>, <span class="number">29.33903</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  吉林: [<span class="number">126.57</span>, <span class="number">43.87</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  阳江: [<span class="number">111.95</span>, <span class="number">21.85</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  泸州: [<span class="number">105.39</span>, <span class="number">28.91</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  西宁: [<span class="number">101.74</span>, <span class="number">36.56</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宜宾: [<span class="number">104.56</span>, <span class="number">29.77</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  呼和浩特: [<span class="number">111.65</span>, <span class="number">40.82</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  成都: [<span class="number">104.06</span>, <span class="number">30.67</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  大同: [<span class="number">113.3</span>, <span class="number">40.12</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  镇江: [<span class="number">119.44</span>, <span class="number">32.2</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  桂林: [<span class="number">110.28</span>, <span class="number">25.29</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  张家界: [<span class="number">110.479191</span>, <span class="number">29.117096</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宜兴: [<span class="number">119.82</span>, <span class="number">31.36</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  北海: [<span class="number">109.12</span>, <span class="number">21.49</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  西安: [<span class="number">108.95</span>, <span class="number">34.27</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  金坛: [<span class="number">119.56</span>, <span class="number">31.74</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  东营: [<span class="number">118.49</span>, <span class="number">37.46</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  牡丹江: [<span class="number">129.58</span>, <span class="number">44.6</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  遵义: [<span class="number">106.9</span>, <span class="number">27.7</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  绍兴: [<span class="number">120.58</span>, <span class="number">30.01</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  扬州: [<span class="number">119.42</span>, <span class="number">32.39</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  常州: [<span class="number">119.95</span>, <span class="number">31.79</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  潍坊: [<span class="number">119.1</span>, <span class="number">36.62</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  重庆: [<span class="number">106.54</span>, <span class="number">29.59</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  台州: [<span class="number">121.420757</span>, <span class="number">28.656386</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南京: [<span class="number">118.78</span>, <span class="number">32.04</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  滨州: [<span class="number">118.03</span>, <span class="number">37.36</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  贵阳: [<span class="number">106.71</span>, <span class="number">26.57</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  无锡: [<span class="number">120.29</span>, <span class="number">31.59</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  本溪: [<span class="number">123.73</span>, <span class="number">41.3</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  克拉玛依: [<span class="number">84.77</span>, <span class="number">45.59</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  渭南: [<span class="number">109.5</span>, <span class="number">34.52</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  马鞍山: [<span class="number">118.48</span>, <span class="number">31.56</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宝鸡: [<span class="number">107.15</span>, <span class="number">34.38</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  焦作: [<span class="number">113.21</span>, <span class="number">35.24</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  句容: [<span class="number">119.16</span>, <span class="number">31.95</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  北京: [<span class="number">116.46</span>, <span class="number">39.92</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  徐州: [<span class="number">117.2</span>, <span class="number">34.26</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  衡水: [<span class="number">115.72</span>, <span class="number">37.72</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  包头: [<span class="number">110</span>, <span class="number">40.58</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  绵阳: [<span class="number">104.73</span>, <span class="number">31.48</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  乌鲁木齐: [<span class="number">87.68</span>, <span class="number">43.77</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  枣庄: [<span class="number">117.57</span>, <span class="number">34.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  杭州: [<span class="number">120.19</span>, <span class="number">30.26</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  淄博: [<span class="number">118.05</span>, <span class="number">36.78</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  鞍山: [<span class="number">122.85</span>, <span class="number">41.12</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  溧阳: [<span class="number">119.48</span>, <span class="number">31.43</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  库尔勒: [<span class="number">86.06</span>, <span class="number">41.68</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  安阳: [<span class="number">114.35</span>, <span class="number">36.1</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  开封: [<span class="number">114.35</span>, <span class="number">34.79</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  济南: [<span class="number">117</span>, <span class="number">36.65</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  德阳: [<span class="number">104.37</span>, <span class="number">31.13</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  温州: [<span class="number">120.65</span>, <span class="number">28.01</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  九江: [<span class="number">115.97</span>, <span class="number">29.71</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  邯郸: [<span class="number">114.47</span>, <span class="number">36.6</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  临安: [<span class="number">119.72</span>, <span class="number">30.23</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  兰州: [<span class="number">103.73</span>, <span class="number">36.03</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  沧州: [<span class="number">116.83</span>, <span class="number">38.33</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  临沂: [<span class="number">118.35</span>, <span class="number">35.05</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南充: [<span class="number">106.110698</span>, <span class="number">30.837793</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  天津: [<span class="number">117.2</span>, <span class="number">39.13</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  富阳: [<span class="number">119.95</span>, <span class="number">30.07</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  泰安: [<span class="number">117.13</span>, <span class="number">36.18</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  诸暨: [<span class="number">120.23</span>, <span class="number">29.71</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  郑州: [<span class="number">113.65</span>, <span class="number">34.76</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  哈尔滨: [<span class="number">126.63</span>, <span class="number">45.75</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  聊城: [<span class="number">115.97</span>, <span class="number">36.45</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  芜湖: [<span class="number">118.38</span>, <span class="number">31.33</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  唐山: [<span class="number">118.02</span>, <span class="number">39.63</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  平顶山: [<span class="number">113.29</span>, <span class="number">33.75</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  邢台: [<span class="number">114.48</span>, <span class="number">37.05</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  德州: [<span class="number">116.29</span>, <span class="number">37.45</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  济宁: [<span class="number">116.59</span>, <span class="number">35.38</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  荆州: [<span class="number">112.239741</span>, <span class="number">30.335165</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宜昌: [<span class="number">111.3</span>, <span class="number">30.7</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  义乌: [<span class="number">120.06</span>, <span class="number">29.32</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  丽水: [<span class="number">119.92</span>, <span class="number">28.45</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  洛阳: [<span class="number">112.44</span>, <span class="number">34.7</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  秦皇岛: [<span class="number">119.57</span>, <span class="number">39.95</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  株洲: [<span class="number">113.16</span>, <span class="number">27.83</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  石家庄: [<span class="number">114.48</span>, <span class="number">38.03</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  莱芜: [<span class="number">117.67</span>, <span class="number">36.19</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  常德: [<span class="number">111.69</span>, <span class="number">29.05</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  保定: [<span class="number">115.48</span>, <span class="number">38.85</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  湘潭: [<span class="number">112.91</span>, <span class="number">27.87</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  金华: [<span class="number">119.64</span>, <span class="number">29.12</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  岳阳: [<span class="number">113.09</span>, <span class="number">29.37</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  长沙: [<span class="number">113</span>, <span class="number">28.21</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  衢州: [<span class="number">118.88</span>, <span class="number">28.97</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  廊坊: [<span class="number">116.7</span>, <span class="number">39.53</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  菏泽: [<span class="number">115.480656</span>, <span class="number">35.23375</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  合肥: [<span class="number">117.27</span>, <span class="number">31.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  武汉: [<span class="number">114.31</span>, <span class="number">30.52</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  大庆: [<span class="number">125.03</span>, <span class="number">46.58</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 返回echarts的option</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">getOption</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> convertData = <span class="keyword">function</span> (<span class="params">data: Data[]</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> res = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> geoCoord = geoCoordMap[data[i].<span class="property">name</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (geoCoord) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        res.<span class="title function_">push</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">name</span>: data[i].<span class="property">name</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">value</span>: geoCoord.<span class="title function_">concat</span>(data[i].<span class="property">value</span>),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> res;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">renderItem</span> = (<span class="params">params: any, api: any</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> coords = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">116.7</span>, <span class="number">39.53</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">103.73</span>, <span class="number">36.03</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">112.91</span>, <span class="number">27.87</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">120.65</span>, <span class="number">28.01</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">119.57</span>, <span class="number">39.95</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> points = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; coords.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      points.<span class="title function_">push</span>(api.<span class="title function_">coord</span>(coords[i]));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> color = api.<span class="title function_">visual</span>(<span class="string">&#x27;color&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">type</span>: <span class="string">&#x27;polygon&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">shape</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">points</span>: echarts.<span class="property">graphic</span>.<span class="title function_">clipPointsByRect</span>(points, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">x</span>: params.<span class="property">coordSys</span>.<span class="property">x</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">y</span>: params.<span class="property">coordSys</span>.<span class="property">y</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">width</span>: params.<span class="property">coordSys</span>.<span class="property">width</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">height</span>: params.<span class="property">coordSys</span>.<span class="property">height</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">style</span>: api.<span class="title function_">style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">fill</span>: color,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">stroke</span>: echarts.<span class="property">color</span>.<span class="title function_">lift</span>(color, <span class="number">0</span>),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> option = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">backgroundColor</span>: <span class="string">&#x27;transparent&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// title: &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   text: &#x27;全国主要城市空气质量&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   subtext: &#x27;data from PM25.in&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   sublink: &#x27;http://www.pm25.in&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   left: &#x27;center&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   textStyle: &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//     color: &#x27;#fff&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   &#125;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// &#125;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">tooltip</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">bmap</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">104.114129</span>, <span class="number">37.550339</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">roam</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">mapStyle</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">styleJson</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;water&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#044161&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;land&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#004981&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;boundary&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;geometry&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#064f85&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;railway&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;highway&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;geometry&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#004981&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;highway&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;geometry.fill&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#005b96&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">lightness</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;highway&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;labels&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;arterial&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;geometry&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#004981&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;arterial&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;geometry.fill&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#00508b&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;poi&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;green&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#056197&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;subway&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;manmade&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;local&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;arterial&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;labels&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;boundary&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;geometry.fill&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#029fd4&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;building&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#1a5787&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;label&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">series</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">name</span>: <span class="string">&#x27;pm2.5&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>: <span class="string">&#x27;scatter&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">coordinateSystem</span>: <span class="string">&#x27;bmap&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: <span class="title function_">convertData</span>(data),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">encode</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">value</span>: <span class="number">2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">symbolSize</span>: <span class="keyword">function</span> (<span class="params">val: number[]</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> val[<span class="number">2</span>] / <span class="number">10</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">label</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">formatter</span>: <span class="string">&#x27;&#123;b&#125;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">position</span>: <span class="string">&#x27;right&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">itemStyle</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;#ddb926&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">emphasis</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">label</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">name</span>: <span class="string">&#x27;Top 5&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>: <span class="string">&#x27;effectScatter&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">coordinateSystem</span>: <span class="string">&#x27;bmap&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: <span class="title function_">convertData</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          data</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            .<span class="title function_">sort</span>(<span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            .<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">6</span>),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">encode</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">value</span>: <span class="number">2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">symbolSize</span>: <span class="keyword">function</span> (<span class="params">val: number[]</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> val[<span class="number">2</span>] / <span class="number">10</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">showEffectOn</span>: <span class="string">&#x27;emphasis&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">rippleEffect</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">brushType</span>: <span class="string">&#x27;stroke&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">hoverAnimation</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">label</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">formatter</span>: <span class="string">&#x27;&#123;b&#125;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">position</span>: <span class="string">&#x27;right&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">itemStyle</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;#f4e925&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">shadowBlur</span>: <span class="number">10</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">shadowColor</span>: <span class="string">&#x27;#333&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">zlevel</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>: <span class="string">&#x27;custom&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">coordinateSystem</span>: <span class="string">&#x27;bmap&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">renderItem</span>: renderItem,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">itemStyle</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">opacity</span>: <span class="number">0.5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">animation</span>: <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">silent</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: [<span class="number">0</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">z</span>: -<span class="number">10</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">return</span> option;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">23.126468438108688</span>], <span class="comment">//视图中心位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>, <span class="comment">//缩放到的级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//将echarts图标地图生成一个echarts的图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> echartsLayer = <span class="keyword">new</span> <span class="title class_">EChartsLayer</span>(<span class="title function_">getOption</span>());</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//将echarts生成的图层追加到openlayers的图层当中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  echartsLayer.<span class="title function_">appendTo</span>(map);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-2-迁徙图"><a href="#1-2-迁徙图" class="headerlink" title="1.2 迁徙图"></a>1.2 迁徙图</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/QQ_1722331283016.png" alt="QQ_1722331283016.png"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">EChartsLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol-echarts&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">interface <span class="title class_">Data</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: keyof <span class="keyword">typeof</span> geoCoordMap;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  value?: number;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> geoCoordMap = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  上海: [<span class="number">121.4648</span>, <span class="number">31.2891</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  东莞: [<span class="number">113.8953</span>, <span class="number">22.901</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  东营: [<span class="number">118.7073</span>, <span class="number">37.5513</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  中山: [<span class="number">113.4229</span>, <span class="number">22.478</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  临汾: [<span class="number">111.4783</span>, <span class="number">36.1615</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  临沂: [<span class="number">118.3118</span>, <span class="number">35.2936</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  丹东: [<span class="number">124.541</span>, <span class="number">40.4242</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  丽水: [<span class="number">119.5642</span>, <span class="number">28.1854</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  乌鲁木齐: [<span class="number">87.9236</span>, <span class="number">43.5883</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  佛山: [<span class="number">112.8955</span>, <span class="number">23.1097</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  保定: [<span class="number">115.0488</span>, <span class="number">39.0948</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  兰州: [<span class="number">103.5901</span>, <span class="number">36.3043</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  包头: [<span class="number">110.3467</span>, <span class="number">41.4899</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  北京: [<span class="number">116.4551</span>, <span class="number">40.2539</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  北海: [<span class="number">109.314</span>, <span class="number">21.6211</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南京: [<span class="number">118.8062</span>, <span class="number">31.9208</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南宁: [<span class="number">108.479</span>, <span class="number">23.1152</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南昌: [<span class="number">116.0046</span>, <span class="number">28.6633</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南通: [<span class="number">121.1023</span>, <span class="number">32.1625</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  厦门: [<span class="number">118.1689</span>, <span class="number">24.6478</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  台州: [<span class="number">121.1353</span>, <span class="number">28.6688</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  合肥: [<span class="number">117.29</span>, <span class="number">32.0581</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  呼和浩特: [<span class="number">111.4124</span>, <span class="number">40.4901</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  咸阳: [<span class="number">108.4131</span>, <span class="number">34.8706</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  哈尔滨: [<span class="number">127.9688</span>, <span class="number">45.368</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  唐山: [<span class="number">118.4766</span>, <span class="number">39.6826</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  嘉兴: [<span class="number">120.9155</span>, <span class="number">30.6354</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  大同: [<span class="number">113.7854</span>, <span class="number">39.8035</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  大连: [<span class="number">122.2229</span>, <span class="number">39.4409</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  天津: [<span class="number">117.4219</span>, <span class="number">39.4189</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  太原: [<span class="number">112.3352</span>, <span class="number">37.9413</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  威海: [<span class="number">121.9482</span>, <span class="number">37.1393</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宁波: [<span class="number">121.5967</span>, <span class="number">29.6466</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宝鸡: [<span class="number">107.1826</span>, <span class="number">34.3433</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宿迁: [<span class="number">118.5535</span>, <span class="number">33.7775</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  常州: [<span class="number">119.4543</span>, <span class="number">31.5582</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  广州: [<span class="number">113.5107</span>, <span class="number">23.2196</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  廊坊: [<span class="number">116.521</span>, <span class="number">39.0509</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  延安: [<span class="number">109.1052</span>, <span class="number">36.4252</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  张家口: [<span class="number">115.1477</span>, <span class="number">40.8527</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  徐州: [<span class="number">117.5208</span>, <span class="number">34.3268</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  德州: [<span class="number">116.6858</span>, <span class="number">37.2107</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  惠州: [<span class="number">114.6204</span>, <span class="number">23.1647</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  成都: [<span class="number">103.9526</span>, <span class="number">30.7617</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  扬州: [<span class="number">119.4653</span>, <span class="number">32.8162</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  承德: [<span class="number">117.5757</span>, <span class="number">41.4075</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  拉萨: [<span class="number">91.1865</span>, <span class="number">30.1465</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  无锡: [<span class="number">120.3442</span>, <span class="number">31.5527</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  日照: [<span class="number">119.2786</span>, <span class="number">35.5023</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  昆明: [<span class="number">102.9199</span>, <span class="number">25.4663</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  杭州: [<span class="number">119.5313</span>, <span class="number">29.8773</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  枣庄: [<span class="number">117.323</span>, <span class="number">34.8926</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  柳州: [<span class="number">109.3799</span>, <span class="number">24.9774</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  株洲: [<span class="number">113.5327</span>, <span class="number">27.0319</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  武汉: [<span class="number">114.3896</span>, <span class="number">30.6628</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  汕头: [<span class="number">117.1692</span>, <span class="number">23.3405</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  江门: [<span class="number">112.6318</span>, <span class="number">22.1484</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  沈阳: [<span class="number">123.1238</span>, <span class="number">42.1216</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  沧州: [<span class="number">116.8286</span>, <span class="number">38.2104</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  河源: [<span class="number">114.917</span>, <span class="number">23.9722</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  泉州: [<span class="number">118.3228</span>, <span class="number">25.1147</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  泰安: [<span class="number">117.0264</span>, <span class="number">36.0516</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  泰州: [<span class="number">120.0586</span>, <span class="number">32.5525</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  济南: [<span class="number">117.1582</span>, <span class="number">36.8701</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  济宁: [<span class="number">116.8286</span>, <span class="number">35.3375</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  海口: [<span class="number">110.3893</span>, <span class="number">19.8516</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  淄博: [<span class="number">118.0371</span>, <span class="number">36.6064</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  淮安: [<span class="number">118.927</span>, <span class="number">33.4039</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  深圳: [<span class="number">114.5435</span>, <span class="number">22.5439</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  清远: [<span class="number">112.9175</span>, <span class="number">24.3292</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  温州: [<span class="number">120.498</span>, <span class="number">27.8119</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  渭南: [<span class="number">109.7864</span>, <span class="number">35.0299</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  湖州: [<span class="number">119.8608</span>, <span class="number">30.7782</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  湘潭: [<span class="number">112.5439</span>, <span class="number">27.7075</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  滨州: [<span class="number">117.8174</span>, <span class="number">37.4963</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  潍坊: [<span class="number">119.0918</span>, <span class="number">36.524</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  烟台: [<span class="number">120.7397</span>, <span class="number">37.5128</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  玉溪: [<span class="number">101.9312</span>, <span class="number">23.8898</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  珠海: [<span class="number">113.7305</span>, <span class="number">22.1155</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  盐城: [<span class="number">120.2234</span>, <span class="number">33.5577</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  盘锦: [<span class="number">121.9482</span>, <span class="number">41.0449</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  石家庄: [<span class="number">114.4995</span>, <span class="number">38.1006</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  福州: [<span class="number">119.4543</span>, <span class="number">25.9222</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  秦皇岛: [<span class="number">119.2126</span>, <span class="number">40.0232</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  绍兴: [<span class="number">120.564</span>, <span class="number">29.7565</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  聊城: [<span class="number">115.9167</span>, <span class="number">36.4032</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  肇庆: [<span class="number">112.1265</span>, <span class="number">23.5822</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  舟山: [<span class="number">122.2559</span>, <span class="number">30.2234</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  苏州: [<span class="number">120.6519</span>, <span class="number">31.3989</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  莱芜: [<span class="number">117.6526</span>, <span class="number">36.2714</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  菏泽: [<span class="number">115.6201</span>, <span class="number">35.2057</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  营口: [<span class="number">122.4316</span>, <span class="number">40.4297</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  葫芦岛: [<span class="number">120.1575</span>, <span class="number">40.578</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  衡水: [<span class="number">115.8838</span>, <span class="number">37.7161</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  衢州: [<span class="number">118.6853</span>, <span class="number">28.8666</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  西宁: [<span class="number">101.4038</span>, <span class="number">36.8207</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  西安: [<span class="number">109.1162</span>, <span class="number">34.2004</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  贵阳: [<span class="number">106.6992</span>, <span class="number">26.7682</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  连云港: [<span class="number">119.1248</span>, <span class="number">34.552</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  邢台: [<span class="number">114.8071</span>, <span class="number">37.2821</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  邯郸: [<span class="number">114.4775</span>, <span class="number">36.535</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  郑州: [<span class="number">113.4668</span>, <span class="number">34.6234</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  鄂尔多斯: [<span class="number">108.9734</span>, <span class="number">39.2487</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  重庆: [<span class="number">107.7539</span>, <span class="number">30.1904</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  金华: [<span class="number">120.0037</span>, <span class="number">29.1028</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  铜川: [<span class="number">109.0393</span>, <span class="number">35.1947</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  银川: [<span class="number">106.3586</span>, <span class="number">38.1775</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  镇江: [<span class="number">119.4763</span>, <span class="number">31.9702</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  长春: [<span class="number">125.8154</span>, <span class="number">44.2584</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  长沙: [<span class="number">113.0823</span>, <span class="number">28.2568</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  长治: [<span class="number">112.8625</span>, <span class="number">36.4746</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  阳泉: [<span class="number">113.4778</span>, <span class="number">38.0951</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  青岛: [<span class="number">120.4651</span>, <span class="number">36.3373</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  韶关: [<span class="number">113.7964</span>, <span class="number">24.7028</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="title class_">BJData</span>: <span class="title class_">Data</span>[][] = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span>, <span class="attr">value</span>: <span class="number">95</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span>, <span class="attr">value</span>: <span class="number">90</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;大连&#x27;</span>, <span class="attr">value</span>: <span class="number">80</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;南宁&#x27;</span>, <span class="attr">value</span>: <span class="number">70</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;南昌&#x27;</span>, <span class="attr">value</span>: <span class="number">60</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;拉萨&#x27;</span>, <span class="attr">value</span>: <span class="number">50</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;长春&#x27;</span>, <span class="attr">value</span>: <span class="number">40</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;包头&#x27;</span>, <span class="attr">value</span>: <span class="number">30</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;重庆&#x27;</span>, <span class="attr">value</span>: <span class="number">20</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;常州&#x27;</span>, <span class="attr">value</span>: <span class="number">10</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="title class_">SHData</span>: <span class="title class_">Data</span>[][] = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;包头&#x27;</span>, <span class="attr">value</span>: <span class="number">95</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;昆明&#x27;</span>, <span class="attr">value</span>: <span class="number">90</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span>, <span class="attr">value</span>: <span class="number">80</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;郑州&#x27;</span>, <span class="attr">value</span>: <span class="number">70</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;长春&#x27;</span>, <span class="attr">value</span>: <span class="number">60</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;重庆&#x27;</span>, <span class="attr">value</span>: <span class="number">50</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;长沙&#x27;</span>, <span class="attr">value</span>: <span class="number">40</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span>, <span class="attr">value</span>: <span class="number">30</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;丹东&#x27;</span>, <span class="attr">value</span>: <span class="number">20</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;大连&#x27;</span>, <span class="attr">value</span>: <span class="number">10</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="title class_">GZData</span>: <span class="title class_">Data</span>[][] = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;福州&#x27;</span>, <span class="attr">value</span>: <span class="number">95</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;太原&#x27;</span>, <span class="attr">value</span>: <span class="number">90</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;长春&#x27;</span>, <span class="attr">value</span>: <span class="number">80</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;重庆&#x27;</span>, <span class="attr">value</span>: <span class="number">70</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;西安&#x27;</span>, <span class="attr">value</span>: <span class="number">60</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;成都&#x27;</span>, <span class="attr">value</span>: <span class="number">50</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;常州&#x27;</span>, <span class="attr">value</span>: <span class="number">40</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span>, <span class="attr">value</span>: <span class="number">30</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;北海&#x27;</span>, <span class="attr">value</span>: <span class="number">20</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [&#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;海口&#x27;</span>, <span class="attr">value</span>: <span class="number">10</span> &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">getOption</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> planePath =</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="string">&#x27;path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> convertData = <span class="keyword">function</span> (<span class="params">data: Data[][]</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> res = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> dataItem = data[i];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> fromCoord = geoCoordMap[dataItem[<span class="number">0</span>].<span class="property">name</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> toCoord = geoCoordMap[dataItem[<span class="number">1</span>].<span class="property">name</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (fromCoord &amp;&amp; toCoord) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        res.<span class="title function_">push</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">fromName</span>: dataItem[<span class="number">0</span>].<span class="property">name</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">toName</span>: dataItem[<span class="number">1</span>].<span class="property">name</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">coords</span>: [fromCoord, toCoord],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> res;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> color = [<span class="string">&#x27;#a6c84c&#x27;</span>, <span class="string">&#x27;#ffa022&#x27;</span>, <span class="string">&#x27;#46bee9&#x27;</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> <span class="attr">series</span>: any = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [<span class="string">&#x27;北京&#x27;</span>, <span class="title class_">BJData</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [<span class="string">&#x27;上海&#x27;</span>, <span class="title class_">SHData</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [<span class="string">&#x27;广州&#x27;</span>, <span class="title class_">GZData</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ].<span class="title function_">forEach</span>(<span class="function">(<span class="params">item: any, i: number</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    series.<span class="title function_">push</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">name</span>: item[<span class="number">0</span>] + <span class="string">&#x27; Top10&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>: <span class="string">&#x27;lines&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">zlevel</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">effect</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">period</span>: <span class="number">6</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">trailLength</span>: <span class="number">0.7</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">symbolSize</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">lineStyle</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">normal</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">color</span>: color[i],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">width</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">curveness</span>: <span class="number">0.2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: <span class="title function_">convertData</span>(item[<span class="number">1</span>]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">name</span>: item[<span class="number">0</span>] + <span class="string">&#x27; Top10&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>: <span class="string">&#x27;lines&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">zlevel</span>: <span class="number">2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">effect</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">period</span>: <span class="number">6</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">trailLength</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">symbol</span>: planePath,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">symbolSize</span>: <span class="number">15</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">lineStyle</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">normal</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">color</span>: color[i],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">opacity</span>: <span class="number">0.4</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">curveness</span>: <span class="number">0.2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: <span class="title function_">convertData</span>(item[<span class="number">1</span>]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">name</span>: item[<span class="number">0</span>] + <span class="string">&#x27; Top10&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>: <span class="string">&#x27;effectScatter&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">coordinateSystem</span>: <span class="string">&#x27;geo&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">zlevel</span>: <span class="number">2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">rippleEffect</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">brushType</span>: <span class="string">&#x27;stroke&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">label</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">normal</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">position</span>: <span class="string">&#x27;right&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">formatter</span>: <span class="string">&#x27;&#123;b&#125;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">symbolSize</span>: <span class="keyword">function</span> (<span class="params">val: number[]</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> val[<span class="number">2</span>] / <span class="number">8</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">itemStyle</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">normal</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">color</span>: color[i],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: item[<span class="number">1</span>].<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">dataItem: Data[]</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">name</span>: dataItem[<span class="number">1</span>].<span class="property">name</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">value</span>: geoCoordMap[dataItem[<span class="number">1</span>].<span class="property">name</span>].<span class="title function_">concat</span>([dataItem[<span class="number">1</span>].<span class="property">value</span> <span class="keyword">as</span> any]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">tooltip</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// title: &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   text: &#x27;模拟迁徙图&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   subtext: &#x27;&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   left: &#x27;center&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   textStyle: &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//     color: &#x27;#fff&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   &#125;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// &#125;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">series</span>: series,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">110</span>, <span class="number">30</span>], <span class="comment">//视图中心位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>, <span class="comment">//缩放到的级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//将echarts图标地图生成一个echarts的图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> echartsLayer = <span class="keyword">new</span> <span class="title class_">EChartsLayer</span>(<span class="title function_">getOption</span>());</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//将echarts生成的图层追加到openlayers的图层当中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  echartsLayer.<span class="title function_">appendTo</span>(map);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-全国空气质量图"><a href="#1-3-全国空气质量图" class="headerlink" title="1.3 全国空气质量图"></a>1.3 全国空气质量图</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/QQ_1722331458962.png" alt="QQ_1722331458962.png"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">EChartsLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol-echarts&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">interface <span class="title class_">Data</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: keyof <span class="keyword">typeof</span> geoCoordMap;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">value</span>: number;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="attr">data</span>: <span class="title class_">Data</span>[] = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;海门&#x27;</span>, <span class="attr">value</span>: <span class="number">9</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;鄂尔多斯&#x27;</span>, <span class="attr">value</span>: <span class="number">12</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;招远&#x27;</span>, <span class="attr">value</span>: <span class="number">12</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;舟山&#x27;</span>, <span class="attr">value</span>: <span class="number">12</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;齐齐哈尔&#x27;</span>, <span class="attr">value</span>: <span class="number">14</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;盐城&#x27;</span>, <span class="attr">value</span>: <span class="number">15</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;赤峰&#x27;</span>, <span class="attr">value</span>: <span class="number">16</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;青岛&#x27;</span>, <span class="attr">value</span>: <span class="number">18</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;乳山&#x27;</span>, <span class="attr">value</span>: <span class="number">18</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;金昌&#x27;</span>, <span class="attr">value</span>: <span class="number">19</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;泉州&#x27;</span>, <span class="attr">value</span>: <span class="number">21</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;莱西&#x27;</span>, <span class="attr">value</span>: <span class="number">21</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;日照&#x27;</span>, <span class="attr">value</span>: <span class="number">21</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;胶南&#x27;</span>, <span class="attr">value</span>: <span class="number">22</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;南通&#x27;</span>, <span class="attr">value</span>: <span class="number">23</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;拉萨&#x27;</span>, <span class="attr">value</span>: <span class="number">24</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;云浮&#x27;</span>, <span class="attr">value</span>: <span class="number">24</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;梅州&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;文登&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;上海&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;攀枝花&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;威海&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;承德&#x27;</span>, <span class="attr">value</span>: <span class="number">25</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;厦门&#x27;</span>, <span class="attr">value</span>: <span class="number">26</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;汕尾&#x27;</span>, <span class="attr">value</span>: <span class="number">26</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;潮州&#x27;</span>, <span class="attr">value</span>: <span class="number">26</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;丹东&#x27;</span>, <span class="attr">value</span>: <span class="number">27</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;太仓&#x27;</span>, <span class="attr">value</span>: <span class="number">27</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;曲靖&#x27;</span>, <span class="attr">value</span>: <span class="number">27</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;烟台&#x27;</span>, <span class="attr">value</span>: <span class="number">28</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;福州&#x27;</span>, <span class="attr">value</span>: <span class="number">29</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;瓦房店&#x27;</span>, <span class="attr">value</span>: <span class="number">30</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;即墨&#x27;</span>, <span class="attr">value</span>: <span class="number">30</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;抚顺&#x27;</span>, <span class="attr">value</span>: <span class="number">31</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;玉溪&#x27;</span>, <span class="attr">value</span>: <span class="number">31</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;张家口&#x27;</span>, <span class="attr">value</span>: <span class="number">31</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;阳泉&#x27;</span>, <span class="attr">value</span>: <span class="number">31</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;莱州&#x27;</span>, <span class="attr">value</span>: <span class="number">32</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;湖州&#x27;</span>, <span class="attr">value</span>: <span class="number">32</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;汕头&#x27;</span>, <span class="attr">value</span>: <span class="number">32</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;昆山&#x27;</span>, <span class="attr">value</span>: <span class="number">33</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宁波&#x27;</span>, <span class="attr">value</span>: <span class="number">33</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;湛江&#x27;</span>, <span class="attr">value</span>: <span class="number">33</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;揭阳&#x27;</span>, <span class="attr">value</span>: <span class="number">34</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;荣成&#x27;</span>, <span class="attr">value</span>: <span class="number">34</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;连云港&#x27;</span>, <span class="attr">value</span>: <span class="number">35</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;葫芦岛&#x27;</span>, <span class="attr">value</span>: <span class="number">35</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;常熟&#x27;</span>, <span class="attr">value</span>: <span class="number">36</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;东莞&#x27;</span>, <span class="attr">value</span>: <span class="number">36</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;河源&#x27;</span>, <span class="attr">value</span>: <span class="number">36</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;淮安&#x27;</span>, <span class="attr">value</span>: <span class="number">36</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;泰州&#x27;</span>, <span class="attr">value</span>: <span class="number">36</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;南宁&#x27;</span>, <span class="attr">value</span>: <span class="number">37</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;营口&#x27;</span>, <span class="attr">value</span>: <span class="number">37</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;惠州&#x27;</span>, <span class="attr">value</span>: <span class="number">37</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;江阴&#x27;</span>, <span class="attr">value</span>: <span class="number">37</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;蓬莱&#x27;</span>, <span class="attr">value</span>: <span class="number">37</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;韶关&#x27;</span>, <span class="attr">value</span>: <span class="number">38</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;嘉峪关&#x27;</span>, <span class="attr">value</span>: <span class="number">38</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;广州&#x27;</span>, <span class="attr">value</span>: <span class="number">38</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;延安&#x27;</span>, <span class="attr">value</span>: <span class="number">38</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;太原&#x27;</span>, <span class="attr">value</span>: <span class="number">39</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;清远&#x27;</span>, <span class="attr">value</span>: <span class="number">39</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;中山&#x27;</span>, <span class="attr">value</span>: <span class="number">39</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;昆明&#x27;</span>, <span class="attr">value</span>: <span class="number">39</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;寿光&#x27;</span>, <span class="attr">value</span>: <span class="number">40</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;盘锦&#x27;</span>, <span class="attr">value</span>: <span class="number">40</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;长治&#x27;</span>, <span class="attr">value</span>: <span class="number">41</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;深圳&#x27;</span>, <span class="attr">value</span>: <span class="number">41</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;珠海&#x27;</span>, <span class="attr">value</span>: <span class="number">42</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宿迁&#x27;</span>, <span class="attr">value</span>: <span class="number">43</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;咸阳&#x27;</span>, <span class="attr">value</span>: <span class="number">43</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;铜川&#x27;</span>, <span class="attr">value</span>: <span class="number">44</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;平度&#x27;</span>, <span class="attr">value</span>: <span class="number">44</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;佛山&#x27;</span>, <span class="attr">value</span>: <span class="number">44</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;海口&#x27;</span>, <span class="attr">value</span>: <span class="number">44</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;江门&#x27;</span>, <span class="attr">value</span>: <span class="number">45</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;章丘&#x27;</span>, <span class="attr">value</span>: <span class="number">45</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;肇庆&#x27;</span>, <span class="attr">value</span>: <span class="number">46</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;大连&#x27;</span>, <span class="attr">value</span>: <span class="number">47</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;临汾&#x27;</span>, <span class="attr">value</span>: <span class="number">47</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;吴江&#x27;</span>, <span class="attr">value</span>: <span class="number">47</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;石嘴山&#x27;</span>, <span class="attr">value</span>: <span class="number">49</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;沈阳&#x27;</span>, <span class="attr">value</span>: <span class="number">50</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;苏州&#x27;</span>, <span class="attr">value</span>: <span class="number">50</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;茂名&#x27;</span>, <span class="attr">value</span>: <span class="number">50</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;嘉兴&#x27;</span>, <span class="attr">value</span>: <span class="number">51</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;长春&#x27;</span>, <span class="attr">value</span>: <span class="number">51</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;胶州&#x27;</span>, <span class="attr">value</span>: <span class="number">52</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;银川&#x27;</span>, <span class="attr">value</span>: <span class="number">52</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;张家港&#x27;</span>, <span class="attr">value</span>: <span class="number">52</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;三门峡&#x27;</span>, <span class="attr">value</span>: <span class="number">53</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;锦州&#x27;</span>, <span class="attr">value</span>: <span class="number">54</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;南昌&#x27;</span>, <span class="attr">value</span>: <span class="number">54</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;柳州&#x27;</span>, <span class="attr">value</span>: <span class="number">54</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;三亚&#x27;</span>, <span class="attr">value</span>: <span class="number">54</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;自贡&#x27;</span>, <span class="attr">value</span>: <span class="number">56</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;吉林&#x27;</span>, <span class="attr">value</span>: <span class="number">56</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;阳江&#x27;</span>, <span class="attr">value</span>: <span class="number">57</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;泸州&#x27;</span>, <span class="attr">value</span>: <span class="number">57</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;西宁&#x27;</span>, <span class="attr">value</span>: <span class="number">57</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宜宾&#x27;</span>, <span class="attr">value</span>: <span class="number">58</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;呼和浩特&#x27;</span>, <span class="attr">value</span>: <span class="number">58</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;成都&#x27;</span>, <span class="attr">value</span>: <span class="number">58</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;大同&#x27;</span>, <span class="attr">value</span>: <span class="number">58</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;镇江&#x27;</span>, <span class="attr">value</span>: <span class="number">59</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;桂林&#x27;</span>, <span class="attr">value</span>: <span class="number">59</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;张家界&#x27;</span>, <span class="attr">value</span>: <span class="number">59</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宜兴&#x27;</span>, <span class="attr">value</span>: <span class="number">59</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;北海&#x27;</span>, <span class="attr">value</span>: <span class="number">60</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;西安&#x27;</span>, <span class="attr">value</span>: <span class="number">61</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;金坛&#x27;</span>, <span class="attr">value</span>: <span class="number">62</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;东营&#x27;</span>, <span class="attr">value</span>: <span class="number">62</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;牡丹江&#x27;</span>, <span class="attr">value</span>: <span class="number">63</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;遵义&#x27;</span>, <span class="attr">value</span>: <span class="number">63</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;绍兴&#x27;</span>, <span class="attr">value</span>: <span class="number">63</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;扬州&#x27;</span>, <span class="attr">value</span>: <span class="number">64</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;常州&#x27;</span>, <span class="attr">value</span>: <span class="number">64</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;潍坊&#x27;</span>, <span class="attr">value</span>: <span class="number">65</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;重庆&#x27;</span>, <span class="attr">value</span>: <span class="number">66</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;台州&#x27;</span>, <span class="attr">value</span>: <span class="number">67</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;南京&#x27;</span>, <span class="attr">value</span>: <span class="number">67</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;滨州&#x27;</span>, <span class="attr">value</span>: <span class="number">70</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;贵阳&#x27;</span>, <span class="attr">value</span>: <span class="number">71</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;无锡&#x27;</span>, <span class="attr">value</span>: <span class="number">71</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;本溪&#x27;</span>, <span class="attr">value</span>: <span class="number">71</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;克拉玛依&#x27;</span>, <span class="attr">value</span>: <span class="number">72</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;渭南&#x27;</span>, <span class="attr">value</span>: <span class="number">72</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;马鞍山&#x27;</span>, <span class="attr">value</span>: <span class="number">72</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宝鸡&#x27;</span>, <span class="attr">value</span>: <span class="number">72</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;焦作&#x27;</span>, <span class="attr">value</span>: <span class="number">75</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;句容&#x27;</span>, <span class="attr">value</span>: <span class="number">75</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;北京&#x27;</span>, <span class="attr">value</span>: <span class="number">79</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;徐州&#x27;</span>, <span class="attr">value</span>: <span class="number">79</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;衡水&#x27;</span>, <span class="attr">value</span>: <span class="number">80</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;包头&#x27;</span>, <span class="attr">value</span>: <span class="number">80</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;绵阳&#x27;</span>, <span class="attr">value</span>: <span class="number">80</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;乌鲁木齐&#x27;</span>, <span class="attr">value</span>: <span class="number">84</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;枣庄&#x27;</span>, <span class="attr">value</span>: <span class="number">84</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;杭州&#x27;</span>, <span class="attr">value</span>: <span class="number">84</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;淄博&#x27;</span>, <span class="attr">value</span>: <span class="number">85</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;鞍山&#x27;</span>, <span class="attr">value</span>: <span class="number">86</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;溧阳&#x27;</span>, <span class="attr">value</span>: <span class="number">86</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;库尔勒&#x27;</span>, <span class="attr">value</span>: <span class="number">86</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;安阳&#x27;</span>, <span class="attr">value</span>: <span class="number">90</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;开封&#x27;</span>, <span class="attr">value</span>: <span class="number">90</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;济南&#x27;</span>, <span class="attr">value</span>: <span class="number">92</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;德阳&#x27;</span>, <span class="attr">value</span>: <span class="number">93</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;温州&#x27;</span>, <span class="attr">value</span>: <span class="number">95</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;九江&#x27;</span>, <span class="attr">value</span>: <span class="number">96</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;邯郸&#x27;</span>, <span class="attr">value</span>: <span class="number">98</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;临安&#x27;</span>, <span class="attr">value</span>: <span class="number">99</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;兰州&#x27;</span>, <span class="attr">value</span>: <span class="number">99</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;沧州&#x27;</span>, <span class="attr">value</span>: <span class="number">100</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;临沂&#x27;</span>, <span class="attr">value</span>: <span class="number">103</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;南充&#x27;</span>, <span class="attr">value</span>: <span class="number">104</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;天津&#x27;</span>, <span class="attr">value</span>: <span class="number">105</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;富阳&#x27;</span>, <span class="attr">value</span>: <span class="number">106</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;泰安&#x27;</span>, <span class="attr">value</span>: <span class="number">112</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;诸暨&#x27;</span>, <span class="attr">value</span>: <span class="number">112</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;郑州&#x27;</span>, <span class="attr">value</span>: <span class="number">113</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;哈尔滨&#x27;</span>, <span class="attr">value</span>: <span class="number">114</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;聊城&#x27;</span>, <span class="attr">value</span>: <span class="number">116</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;芜湖&#x27;</span>, <span class="attr">value</span>: <span class="number">117</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;唐山&#x27;</span>, <span class="attr">value</span>: <span class="number">119</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;平顶山&#x27;</span>, <span class="attr">value</span>: <span class="number">119</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;邢台&#x27;</span>, <span class="attr">value</span>: <span class="number">119</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;德州&#x27;</span>, <span class="attr">value</span>: <span class="number">120</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;济宁&#x27;</span>, <span class="attr">value</span>: <span class="number">120</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;荆州&#x27;</span>, <span class="attr">value</span>: <span class="number">127</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;宜昌&#x27;</span>, <span class="attr">value</span>: <span class="number">130</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;义乌&#x27;</span>, <span class="attr">value</span>: <span class="number">132</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;丽水&#x27;</span>, <span class="attr">value</span>: <span class="number">133</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;洛阳&#x27;</span>, <span class="attr">value</span>: <span class="number">134</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;秦皇岛&#x27;</span>, <span class="attr">value</span>: <span class="number">136</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;株洲&#x27;</span>, <span class="attr">value</span>: <span class="number">143</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;石家庄&#x27;</span>, <span class="attr">value</span>: <span class="number">147</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;莱芜&#x27;</span>, <span class="attr">value</span>: <span class="number">148</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;常德&#x27;</span>, <span class="attr">value</span>: <span class="number">152</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;保定&#x27;</span>, <span class="attr">value</span>: <span class="number">153</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;湘潭&#x27;</span>, <span class="attr">value</span>: <span class="number">154</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;金华&#x27;</span>, <span class="attr">value</span>: <span class="number">157</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;岳阳&#x27;</span>, <span class="attr">value</span>: <span class="number">169</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;长沙&#x27;</span>, <span class="attr">value</span>: <span class="number">175</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;衢州&#x27;</span>, <span class="attr">value</span>: <span class="number">177</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;廊坊&#x27;</span>, <span class="attr">value</span>: <span class="number">193</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;菏泽&#x27;</span>, <span class="attr">value</span>: <span class="number">194</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;合肥&#x27;</span>, <span class="attr">value</span>: <span class="number">229</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;武汉&#x27;</span>, <span class="attr">value</span>: <span class="number">273</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">name</span>: <span class="string">&#x27;大庆&#x27;</span>, <span class="attr">value</span>: <span class="number">279</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> geoCoordMap = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  海门: [<span class="number">121.15</span>, <span class="number">31.89</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  鄂尔多斯: [<span class="number">109.781327</span>, <span class="number">39.608266</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  招远: [<span class="number">120.38</span>, <span class="number">37.35</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  舟山: [<span class="number">122.207216</span>, <span class="number">29.985295</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  齐齐哈尔: [<span class="number">123.97</span>, <span class="number">47.33</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  盐城: [<span class="number">120.13</span>, <span class="number">33.38</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  赤峰: [<span class="number">118.87</span>, <span class="number">42.28</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  青岛: [<span class="number">120.33</span>, <span class="number">36.07</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  乳山: [<span class="number">121.52</span>, <span class="number">36.89</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  金昌: [<span class="number">102.188043</span>, <span class="number">38.520089</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  泉州: [<span class="number">118.58</span>, <span class="number">24.93</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  莱西: [<span class="number">120.53</span>, <span class="number">36.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  日照: [<span class="number">119.46</span>, <span class="number">35.42</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  胶南: [<span class="number">119.97</span>, <span class="number">35.88</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南通: [<span class="number">121.05</span>, <span class="number">32.08</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  拉萨: [<span class="number">91.11</span>, <span class="number">29.97</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  云浮: [<span class="number">112.02</span>, <span class="number">22.93</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  梅州: [<span class="number">116.1</span>, <span class="number">24.55</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  文登: [<span class="number">122.05</span>, <span class="number">37.2</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  上海: [<span class="number">121.48</span>, <span class="number">31.22</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  攀枝花: [<span class="number">101.718637</span>, <span class="number">26.582347</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  威海: [<span class="number">122.1</span>, <span class="number">37.5</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  承德: [<span class="number">117.93</span>, <span class="number">40.97</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  厦门: [<span class="number">118.1</span>, <span class="number">24.46</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  汕尾: [<span class="number">115.375279</span>, <span class="number">22.786211</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  潮州: [<span class="number">116.63</span>, <span class="number">23.68</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  丹东: [<span class="number">124.37</span>, <span class="number">40.13</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  太仓: [<span class="number">121.1</span>, <span class="number">31.45</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  曲靖: [<span class="number">103.79</span>, <span class="number">25.51</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  烟台: [<span class="number">121.39</span>, <span class="number">37.52</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  福州: [<span class="number">119.3</span>, <span class="number">26.08</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  瓦房店: [<span class="number">121.979603</span>, <span class="number">39.627114</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  即墨: [<span class="number">120.45</span>, <span class="number">36.38</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  抚顺: [<span class="number">123.97</span>, <span class="number">41.97</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  玉溪: [<span class="number">102.52</span>, <span class="number">24.35</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  张家口: [<span class="number">114.87</span>, <span class="number">40.82</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  阳泉: [<span class="number">113.57</span>, <span class="number">37.85</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  莱州: [<span class="number">119.942327</span>, <span class="number">37.177017</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  湖州: [<span class="number">120.1</span>, <span class="number">30.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  汕头: [<span class="number">116.69</span>, <span class="number">23.39</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  昆山: [<span class="number">120.95</span>, <span class="number">31.39</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宁波: [<span class="number">121.56</span>, <span class="number">29.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  湛江: [<span class="number">110.359377</span>, <span class="number">21.270708</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  揭阳: [<span class="number">116.35</span>, <span class="number">23.55</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  荣成: [<span class="number">122.41</span>, <span class="number">37.16</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  连云港: [<span class="number">119.16</span>, <span class="number">34.59</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  葫芦岛: [<span class="number">120.836932</span>, <span class="number">40.711052</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  常熟: [<span class="number">120.74</span>, <span class="number">31.64</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  东莞: [<span class="number">113.75</span>, <span class="number">23.04</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  河源: [<span class="number">114.68</span>, <span class="number">23.73</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  淮安: [<span class="number">119.15</span>, <span class="number">33.5</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  泰州: [<span class="number">119.9</span>, <span class="number">32.49</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南宁: [<span class="number">108.33</span>, <span class="number">22.84</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  营口: [<span class="number">122.18</span>, <span class="number">40.65</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  惠州: [<span class="number">114.4</span>, <span class="number">23.09</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  江阴: [<span class="number">120.26</span>, <span class="number">31.91</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  蓬莱: [<span class="number">120.75</span>, <span class="number">37.8</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  韶关: [<span class="number">113.62</span>, <span class="number">24.84</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  嘉峪关: [<span class="number">98.289152</span>, <span class="number">39.77313</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  广州: [<span class="number">113.23</span>, <span class="number">23.16</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  延安: [<span class="number">109.47</span>, <span class="number">36.6</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  太原: [<span class="number">112.53</span>, <span class="number">37.87</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  清远: [<span class="number">113.01</span>, <span class="number">23.7</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  中山: [<span class="number">113.38</span>, <span class="number">22.52</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  昆明: [<span class="number">102.73</span>, <span class="number">25.04</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  寿光: [<span class="number">118.73</span>, <span class="number">36.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  盘锦: [<span class="number">122.070714</span>, <span class="number">41.119997</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  长治: [<span class="number">113.08</span>, <span class="number">36.18</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  深圳: [<span class="number">114.07</span>, <span class="number">22.62</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  珠海: [<span class="number">113.52</span>, <span class="number">22.3</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宿迁: [<span class="number">118.3</span>, <span class="number">33.96</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  咸阳: [<span class="number">108.72</span>, <span class="number">34.36</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  铜川: [<span class="number">109.11</span>, <span class="number">35.09</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  平度: [<span class="number">119.97</span>, <span class="number">36.77</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  佛山: [<span class="number">113.11</span>, <span class="number">23.05</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  海口: [<span class="number">110.35</span>, <span class="number">20.02</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  江门: [<span class="number">113.06</span>, <span class="number">22.61</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  章丘: [<span class="number">117.53</span>, <span class="number">36.72</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  肇庆: [<span class="number">112.44</span>, <span class="number">23.05</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  大连: [<span class="number">121.62</span>, <span class="number">38.92</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  临汾: [<span class="number">111.5</span>, <span class="number">36.08</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  吴江: [<span class="number">120.63</span>, <span class="number">31.16</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  石嘴山: [<span class="number">106.39</span>, <span class="number">39.04</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  沈阳: [<span class="number">123.38</span>, <span class="number">41.8</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  苏州: [<span class="number">120.62</span>, <span class="number">31.32</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  茂名: [<span class="number">110.88</span>, <span class="number">21.68</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  嘉兴: [<span class="number">120.76</span>, <span class="number">30.77</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  长春: [<span class="number">125.35</span>, <span class="number">43.88</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  胶州: [<span class="number">120.03336</span>, <span class="number">36.264622</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  银川: [<span class="number">106.27</span>, <span class="number">38.47</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  张家港: [<span class="number">120.555821</span>, <span class="number">31.875428</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  三门峡: [<span class="number">111.19</span>, <span class="number">34.76</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  锦州: [<span class="number">121.15</span>, <span class="number">41.13</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南昌: [<span class="number">115.89</span>, <span class="number">28.68</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  柳州: [<span class="number">109.4</span>, <span class="number">24.33</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  三亚: [<span class="number">109.511909</span>, <span class="number">18.252847</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  自贡: [<span class="number">104.778442</span>, <span class="number">29.33903</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  吉林: [<span class="number">126.57</span>, <span class="number">43.87</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  阳江: [<span class="number">111.95</span>, <span class="number">21.85</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  泸州: [<span class="number">105.39</span>, <span class="number">28.91</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  西宁: [<span class="number">101.74</span>, <span class="number">36.56</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宜宾: [<span class="number">104.56</span>, <span class="number">29.77</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  呼和浩特: [<span class="number">111.65</span>, <span class="number">40.82</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  成都: [<span class="number">104.06</span>, <span class="number">30.67</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  大同: [<span class="number">113.3</span>, <span class="number">40.12</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  镇江: [<span class="number">119.44</span>, <span class="number">32.2</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  桂林: [<span class="number">110.28</span>, <span class="number">25.29</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  张家界: [<span class="number">110.479191</span>, <span class="number">29.117096</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宜兴: [<span class="number">119.82</span>, <span class="number">31.36</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  北海: [<span class="number">109.12</span>, <span class="number">21.49</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  西安: [<span class="number">108.95</span>, <span class="number">34.27</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  金坛: [<span class="number">119.56</span>, <span class="number">31.74</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  东营: [<span class="number">118.49</span>, <span class="number">37.46</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  牡丹江: [<span class="number">129.58</span>, <span class="number">44.6</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  遵义: [<span class="number">106.9</span>, <span class="number">27.7</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  绍兴: [<span class="number">120.58</span>, <span class="number">30.01</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  扬州: [<span class="number">119.42</span>, <span class="number">32.39</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  常州: [<span class="number">119.95</span>, <span class="number">31.79</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  潍坊: [<span class="number">119.1</span>, <span class="number">36.62</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  重庆: [<span class="number">106.54</span>, <span class="number">29.59</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  台州: [<span class="number">121.420757</span>, <span class="number">28.656386</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南京: [<span class="number">118.78</span>, <span class="number">32.04</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  滨州: [<span class="number">118.03</span>, <span class="number">37.36</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  贵阳: [<span class="number">106.71</span>, <span class="number">26.57</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  无锡: [<span class="number">120.29</span>, <span class="number">31.59</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  本溪: [<span class="number">123.73</span>, <span class="number">41.3</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  克拉玛依: [<span class="number">84.77</span>, <span class="number">45.59</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  渭南: [<span class="number">109.5</span>, <span class="number">34.52</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  马鞍山: [<span class="number">118.48</span>, <span class="number">31.56</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宝鸡: [<span class="number">107.15</span>, <span class="number">34.38</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  焦作: [<span class="number">113.21</span>, <span class="number">35.24</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  句容: [<span class="number">119.16</span>, <span class="number">31.95</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  北京: [<span class="number">116.46</span>, <span class="number">39.92</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  徐州: [<span class="number">117.2</span>, <span class="number">34.26</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  衡水: [<span class="number">115.72</span>, <span class="number">37.72</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  包头: [<span class="number">110</span>, <span class="number">40.58</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  绵阳: [<span class="number">104.73</span>, <span class="number">31.48</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  乌鲁木齐: [<span class="number">87.68</span>, <span class="number">43.77</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  枣庄: [<span class="number">117.57</span>, <span class="number">34.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  杭州: [<span class="number">120.19</span>, <span class="number">30.26</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  淄博: [<span class="number">118.05</span>, <span class="number">36.78</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  鞍山: [<span class="number">122.85</span>, <span class="number">41.12</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  溧阳: [<span class="number">119.48</span>, <span class="number">31.43</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  库尔勒: [<span class="number">86.06</span>, <span class="number">41.68</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  安阳: [<span class="number">114.35</span>, <span class="number">36.1</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  开封: [<span class="number">114.35</span>, <span class="number">34.79</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  济南: [<span class="number">117</span>, <span class="number">36.65</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  德阳: [<span class="number">104.37</span>, <span class="number">31.13</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  温州: [<span class="number">120.65</span>, <span class="number">28.01</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  九江: [<span class="number">115.97</span>, <span class="number">29.71</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  邯郸: [<span class="number">114.47</span>, <span class="number">36.6</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  临安: [<span class="number">119.72</span>, <span class="number">30.23</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  兰州: [<span class="number">103.73</span>, <span class="number">36.03</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  沧州: [<span class="number">116.83</span>, <span class="number">38.33</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  临沂: [<span class="number">118.35</span>, <span class="number">35.05</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  南充: [<span class="number">106.110698</span>, <span class="number">30.837793</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  天津: [<span class="number">117.2</span>, <span class="number">39.13</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  富阳: [<span class="number">119.95</span>, <span class="number">30.07</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  泰安: [<span class="number">117.13</span>, <span class="number">36.18</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  诸暨: [<span class="number">120.23</span>, <span class="number">29.71</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  郑州: [<span class="number">113.65</span>, <span class="number">34.76</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  哈尔滨: [<span class="number">126.63</span>, <span class="number">45.75</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  聊城: [<span class="number">115.97</span>, <span class="number">36.45</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  芜湖: [<span class="number">118.38</span>, <span class="number">31.33</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  唐山: [<span class="number">118.02</span>, <span class="number">39.63</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  平顶山: [<span class="number">113.29</span>, <span class="number">33.75</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  邢台: [<span class="number">114.48</span>, <span class="number">37.05</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  德州: [<span class="number">116.29</span>, <span class="number">37.45</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  济宁: [<span class="number">116.59</span>, <span class="number">35.38</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  荆州: [<span class="number">112.239741</span>, <span class="number">30.335165</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  宜昌: [<span class="number">111.3</span>, <span class="number">30.7</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  义乌: [<span class="number">120.06</span>, <span class="number">29.32</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  丽水: [<span class="number">119.92</span>, <span class="number">28.45</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  洛阳: [<span class="number">112.44</span>, <span class="number">34.7</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  秦皇岛: [<span class="number">119.57</span>, <span class="number">39.95</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  株洲: [<span class="number">113.16</span>, <span class="number">27.83</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  石家庄: [<span class="number">114.48</span>, <span class="number">38.03</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  莱芜: [<span class="number">117.67</span>, <span class="number">36.19</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  常德: [<span class="number">111.69</span>, <span class="number">29.05</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  保定: [<span class="number">115.48</span>, <span class="number">38.85</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  湘潭: [<span class="number">112.91</span>, <span class="number">27.87</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  金华: [<span class="number">119.64</span>, <span class="number">29.12</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  岳阳: [<span class="number">113.09</span>, <span class="number">29.37</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  长沙: [<span class="number">113</span>, <span class="number">28.21</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  衢州: [<span class="number">118.88</span>, <span class="number">28.97</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  廊坊: [<span class="number">116.7</span>, <span class="number">39.53</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  菏泽: [<span class="number">115.480656</span>, <span class="number">35.23375</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  合肥: [<span class="number">117.27</span>, <span class="number">31.86</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  武汉: [<span class="number">114.31</span>, <span class="number">30.52</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  大庆: [<span class="number">125.03</span>, <span class="number">46.58</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">getOption</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> convertData = <span class="keyword">function</span> (<span class="params">data: Data[]</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> res = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> geoCoord = geoCoordMap[data[i].<span class="property">name</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (geoCoord) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        res.<span class="title function_">push</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">name</span>: data[i].<span class="property">name</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">value</span>: geoCoord.<span class="title function_">concat</span>(data[i].<span class="property">value</span>),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> res;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> option = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">backgroundColor</span>: <span class="string">&#x27;transparent&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// title: &#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   text: &#x27;全国主要城市空气质量 - 百度地图&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   subtext: &#x27;data from PM25.in&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   sublink: &#x27;http://www.pm25.in&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//   left: &#x27;center&#x27;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// &#125;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">tooltip</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">bmap</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">104.114129</span>, <span class="number">37.550339</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">roam</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">mapStyle</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">styleJson</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;water&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#d1d1d1&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;land&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#f3f3f3&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;railway&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;highway&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#fdfdfd&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;highway&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;labels&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;arterial&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;geometry&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#fefefe&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;arterial&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;geometry.fill&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#fefefe&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;poi&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;green&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;subway&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;manmade&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#d1d1d1&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;local&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#d1d1d1&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;arterial&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;labels&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">visibility</span>: <span class="string">&#x27;off&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;boundary&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#fefefe&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;building&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;all&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#d1d1d1&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">featureType</span>: <span class="string">&#x27;label&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">elementType</span>: <span class="string">&#x27;labels.text.fill&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">stylers</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">color</span>: <span class="string">&#x27;#999999&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">series</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">name</span>: <span class="string">&#x27;pm2.5&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>: <span class="string">&#x27;scatter&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">coordinateSystem</span>: <span class="string">&#x27;bmap&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: <span class="title function_">convertData</span>(data),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">symbolSize</span>: <span class="keyword">function</span> (<span class="params">val: number[]</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> val[<span class="number">2</span>] / <span class="number">10</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">encode</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">value</span>: <span class="number">2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">label</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">formatter</span>: <span class="string">&#x27;&#123;b&#125;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">position</span>: <span class="string">&#x27;right&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">emphasis</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">label</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">name</span>: <span class="string">&#x27;Top 5&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>: <span class="string">&#x27;effectScatter&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">coordinateSystem</span>: <span class="string">&#x27;bmap&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: <span class="title function_">convertData</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          data</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            .<span class="title function_">sort</span>(<span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            .<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">6</span>),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">symbolSize</span>: <span class="keyword">function</span> (<span class="params">val: number[]</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> val[<span class="number">2</span>] / <span class="number">10</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">encode</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">value</span>: <span class="number">2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">showEffectOn</span>: <span class="string">&#x27;render&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">rippleEffect</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">brushType</span>: <span class="string">&#x27;stroke&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">label</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">formatter</span>: <span class="string">&#x27;&#123;b&#125;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">position</span>: <span class="string">&#x27;right&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">show</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">itemStyle</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">shadowBlur</span>: <span class="number">10</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">shadowColor</span>: <span class="string">&#x27;#333&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">emphasis</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">scale</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">zlevel</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">return</span> option;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">110</span>, <span class="number">30</span>], <span class="comment">//视图中心位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>, <span class="comment">//缩放到的级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//将echarts图标地图生成一个echarts的图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> echartsLayer = <span class="keyword">new</span> <span class="title class_">EChartsLayer</span>(<span class="title function_">getOption</span>());</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//将echarts生成的图层追加到openlayers的图层当中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  echartsLayer.<span class="title function_">appendTo</span>(map);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-openlayers-与-cesium"><a href="#2-openlayers-与-cesium" class="headerlink" title="2 openlayers 与 cesium"></a>2 openlayers 与 cesium</h2><p>安装两个包</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -save cesium</span><br><span class="line">npm i --save ol-cesium</span><br></pre></td></tr></table></figure>

<h3 id="2-1-二三维联动"><a href="#2-1-二三维联动" class="headerlink" title="2.1 二三维联动"></a>2.1 二三维联动</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/QQ_1722333359308.png" alt="QQ_1722333359308.png|982"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!--地图挂载dom--&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map2d&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map3d&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Cesium</span> <span class="keyword">from</span> <span class="string">&#x27;cesium&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">OLCesium</span> <span class="keyword">from</span> <span class="string">&#x27;ol-cesium&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 设置token</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title class_">Cesium</span>.<span class="property">Ion</span>.<span class="property">defaultAccessToken</span> =</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="string">&#x27;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkNzU4NWU1OS1kMGYxLTQzOTAtYWM1ZC0xNmNmNzc3NDAwZjAiLCJpZCI6NzA2OTgsImlhdCI6MTYzNDU2MTg0MX0.m8YwP5Dsvz1pVKOzR2_Uu0fJB2HkyVE_OjfjgXTUpLU&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 设置默认视角</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title class_">Cesium</span>.<span class="property">Camera</span>.<span class="property">DEFAULT_VIEW_RECTANGLE</span> = <span class="title class_">Cesium</span>.<span class="property">Rectangle</span>.<span class="title function_">fromDegrees</span>(<span class="number">89.5</span>, <span class="number">20.4</span>, <span class="number">110.4</span>, <span class="number">61.2</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 设置cesium的静态资源在根目录 即public下</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">window</span>.<span class="property">CESIUM_BASE_URL</span> = <span class="string">&#x27;/&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//cesium全局化</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">window</span>.<span class="property">Cesium</span> = <span class="title class_">Cesium</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map2d&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">23.126468438108688</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">12</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> ol3d = <span class="keyword">new</span> <span class="title class_">OLCesium</span>(&#123; <span class="attr">map</span>: map, <span class="attr">target</span>: <span class="string">&#x27;map3d&#x27;</span> &#125;); <span class="comment">// ol2dMap is the ol.Map instance</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ol3d.<span class="title function_">setEnabled</span>(<span class="literal">true</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map2d</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">50%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map3d</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">50%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-openlayers-与-wind"><a href="#3-openlayers-与-wind" class="headerlink" title="3 openlayers 与 wind"></a>3 openlayers 与 wind</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install ol-wind	</span><br></pre></td></tr></table></figure>

<h3 id="3-1-参数说明"><a href="#3-1-参数说明" class="headerlink" title="3.1 参数说明"></a>3.1 参数说明</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240801111041.png" alt="image.png"></p>
<h3 id="3-2-代码实现"><a href="#3-2-代码实现" class="headerlink" title="3.2 代码实现"></a>3.2 代码实现</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240801111204.png" alt="image.png"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">WindLayer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol-wind&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> data <span class="keyword">from</span> <span class="string">&#x27;./wind.json&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">addWinLayer</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> windLayer = <span class="keyword">new</span> <span class="title class_">WindLayer</span>(data, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">windOptions</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">colorScale</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//缩放不同级别的例子颜色</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(36,104, 180)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(60,157, 194)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(128,205,193 )&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(151,218,168 )&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(198,231,181)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(238,247,217)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(255,238,159)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(252,217,125)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(255,182,100)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(252,150,75)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(250,112,52)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(245,64,32)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(237,45,28)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(220,24,32)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="string">&#x27;rgb(180,0,35)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">lineWidth</span>: <span class="number">2</span>, <span class="comment">//线宽</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">frameRate</span>: <span class="number">16</span>, <span class="comment">//帧率</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">globalAlpha</span>: <span class="number">0.8</span>, <span class="comment">//全局的透明度，对全球风向的粒子拖尾效果</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">velocityScale</span>: <span class="number">1</span> / <span class="number">60</span>, <span class="comment">//速度级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">paths</span>: <span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// can be number or function //生成粒子数的数量，生成粒子数量回调函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> zoom = map.<span class="title function_">getView</span>().<span class="title function_">getZoom</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> zoom! * <span class="number">200</span>; <span class="comment">// 根据缩放级别增加粒子数量</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addLayer</span>(windLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">26.126468438108688</span>], <span class="comment">//视图中心位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">4</span>, <span class="comment">//缩放到的级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">addWinLayer</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-openlayers-与-turf"><a href="#4-openlayers-与-turf" class="headerlink" title="4 openlayers 与 turf"></a>4 openlayers 与 turf</h2><h3 id="4-1-相交分析"><a href="#4-1-相交分析" class="headerlink" title="4.1 相交分析"></a>4.1 相交分析</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240813112316.png" alt="image.png"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;info&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;infoDom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> turf <span class="keyword">from</span> <span class="string">&#x27;@turf/turf&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Feature</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Feature&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Polygon</span>, type <span class="title class_">Geometry</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/geom&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorSource</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Fill</span>, <span class="title class_">Stroke</span>, <span class="title class_">Style</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">CircleStyle</span> <span class="keyword">from</span> <span class="string">&#x27;ol/style/Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> type &#123; <span class="title class_">StyleLike</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style/Style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> turfData <span class="keyword">from</span> <span class="string">&#x27;../data/turfIntersectData.json&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">turfFun</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//定义各种要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> styles = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Point</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">image</span>: <span class="keyword">new</span> <span class="title class_">CircleStyle</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;rgba(255,255,0,0.4)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">radius</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;#ff0&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">LineString</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;#f00&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">MultiLineString</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;#0f0&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Polygon</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">lineDash</span>: [<span class="number">4</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(0, 0, 255, 0.1)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 根据要素类型设置几何要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">styleFunction</span> = (<span class="params">feature: Feature&lt;Geometry&gt;</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> type = feature.<span class="title function_">getGeometry</span>()?.<span class="title function_">getType</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (type === <span class="string">&#x27;Point&#x27;</span> || type === <span class="string">&#x27;LineString&#x27;</span> || type === <span class="string">&#x27;MultiLineString&#x27;</span> || type === <span class="string">&#x27;Polygon&#x27;</span>) <span class="keyword">return</span> styles[type];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 添加矢量图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> vectorSource = <span class="keyword">new</span> <span class="title class_">VectorSource</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> vectorLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: vectorSource,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">style</span>: styleFunction <span class="keyword">as</span> <span class="title class_">StyleLike</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addLayer</span>(vectorLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">createPolygon</span> = (<span class="params">coordinates: any</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> feature = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Polygon</span>(coordinates),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    vectorSource.<span class="title function_">addFeature</span>(feature);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建相交图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">createIntersect</span> = (<span class="params">coordinates: any</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> intersectLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">source</span>: <span class="keyword">new</span> <span class="title class_">VectorSource</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">features</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Polygon</span>(coordinates),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 定义相交样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> intersectStyle = <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(220, 10, 20, 0.3)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    intersectLayer.<span class="title function_">setStyle</span>(intersectStyle);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 添加相交图层到地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    map.<span class="title function_">addLayer</span>(intersectLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取到要素数据的坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> features = turfData.<span class="property">features</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> polygons = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> index = <span class="number">1</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">for</span> (<span class="keyword">const</span> feature <span class="keyword">of</span> features) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> coordinates = feature.<span class="property">geometry</span>.<span class="property">coordinates</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建openlayers的多边形要素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">createPolygon</span>(coordinates);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建turfjs的多边形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> polygon = turf.<span class="title function_">polygon</span>(coordinates, &#123; <span class="attr">name</span>: <span class="string">&#x27;poly&#x27;</span> + index &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    polygons.<span class="title function_">push</span>(polygon);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//利用turf做空间分析</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取相交几何坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//相交分析</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> intersection = turf.<span class="title function_">intersect</span>(polygons[<span class="number">0</span>], polygons[<span class="number">1</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取到相交部分的坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> coordinates = intersection?.<span class="property">geometry</span>.<span class="property">coordinates</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//创建相交部分的多边形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">createIntersect</span>(coordinates);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// osm地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> raster = <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(), <span class="comment">//加载OpenStreetMap</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//渲染矢量图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [raster],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">26.126468438108688</span>], <span class="comment">//视图中心位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>, <span class="comment">//缩放到的级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">turfFun</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#info</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">z-index</span>: <span class="number">999</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-差异分析"><a href="#4-2-差异分析" class="headerlink" title="4.2 差异分析"></a>4.2 差异分析</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240813112322.png" alt="image.png"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;info&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;infoDom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> turf <span class="keyword">from</span> <span class="string">&#x27;@turf/turf&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Feature</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Feature&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Polygon</span>, type <span class="title class_">Geometry</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/geom&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorSource</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Fill</span>, <span class="title class_">Stroke</span>, <span class="title class_">Style</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">CircleStyle</span> <span class="keyword">from</span> <span class="string">&#x27;ol/style/Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> type &#123; <span class="title class_">StyleLike</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style/Style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> turfData <span class="keyword">from</span> <span class="string">&#x27;../data/turfIntersectData.json&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">turfFun</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//定义各种要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> styles = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Point</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">image</span>: <span class="keyword">new</span> <span class="title class_">CircleStyle</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;rgba(255,255,0,0.4)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">radius</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;#ff0&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">LineString</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;#f00&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">MultiLineString</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;#0f0&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Polygon</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">lineDash</span>: [<span class="number">4</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(0, 0, 255, 0.1)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 根据要素类型设置几何要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">styleFunction</span> = (<span class="params">feature: Feature&lt;Geometry&gt;</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> type = feature.<span class="title function_">getGeometry</span>()?.<span class="title function_">getType</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (type === <span class="string">&#x27;Point&#x27;</span> || type === <span class="string">&#x27;LineString&#x27;</span> || type === <span class="string">&#x27;MultiLineString&#x27;</span> || type === <span class="string">&#x27;Polygon&#x27;</span>) <span class="keyword">return</span> styles[type];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 添加矢量图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> vectorSource = <span class="keyword">new</span> <span class="title class_">VectorSource</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> vectorLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: vectorSource,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">style</span>: styleFunction <span class="keyword">as</span> <span class="title class_">StyleLike</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addLayer</span>(vectorLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">createPolygon</span> = (<span class="params">coordinates: any</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> feature = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Polygon</span>(coordinates),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    vectorSource.<span class="title function_">addFeature</span>(feature);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建相交图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">createIntersect</span> = (<span class="params">coordinates: any</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> intersectLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">source</span>: <span class="keyword">new</span> <span class="title class_">VectorSource</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">features</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Polygon</span>(coordinates),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 定义相交样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> intersectStyle = <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(220, 10, 20, 0.3)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    intersectLayer.<span class="title function_">setStyle</span>(intersectStyle);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 添加相交图层到地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    map.<span class="title function_">addLayer</span>(intersectLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取到要素数据的坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> features = turfData.<span class="property">features</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> polygons = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> index = <span class="number">1</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">for</span> (<span class="keyword">const</span> feature <span class="keyword">of</span> features) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> coordinates = feature.<span class="property">geometry</span>.<span class="property">coordinates</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建openlayers的多边形要素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">createPolygon</span>(coordinates);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建turfjs的多边形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> polygon = turf.<span class="title function_">polygon</span>(coordinates, &#123; <span class="attr">name</span>: <span class="string">&#x27;poly&#x27;</span> + index &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    polygons.<span class="title function_">push</span>(polygon);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//利用turf做空间分析</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取相交几何坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//差异化分析</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> difference = turf.<span class="title function_">difference</span>(polygons[<span class="number">0</span>], polygons[<span class="number">1</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//差异化分析的坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> coordinates = difference.<span class="property">geometry</span>.<span class="property">coordinates</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//创建差异化分析的几何图形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">createIntersect</span>(coordinates);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// osm地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> raster = <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(), <span class="comment">//加载OpenStreetMap</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//渲染矢量图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [raster],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">26.126468438108688</span>], <span class="comment">//视图中心位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>, <span class="comment">//缩放到的级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">turfFun</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#info</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">z-index</span>: <span class="number">999</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-空间合并"><a href="#4-3-空间合并" class="headerlink" title="4.3 空间合并"></a>4.3 空间合并</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240813112450.png" alt="image.png"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;info&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;infoDom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> turf <span class="keyword">from</span> <span class="string">&#x27;@turf/turf&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Feature</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Feature&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Polygon</span>, type <span class="title class_">Geometry</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/geom&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorSource</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Fill</span>, <span class="title class_">Stroke</span>, <span class="title class_">Style</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">CircleStyle</span> <span class="keyword">from</span> <span class="string">&#x27;ol/style/Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> type &#123; <span class="title class_">StyleLike</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style/Style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> turfData <span class="keyword">from</span> <span class="string">&#x27;../data/turfIntersectData.json&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">turfFun</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//定义各种要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> styles = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Point</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">image</span>: <span class="keyword">new</span> <span class="title class_">CircleStyle</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;rgba(255,255,0,0.4)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">radius</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;#ff0&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">LineString</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;#f00&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">MultiLineString</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;#0f0&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Polygon</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">lineDash</span>: [<span class="number">4</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(0, 0, 255, 0.1)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 根据要素类型设置几何要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">styleFunction</span> = (<span class="params">feature: Feature&lt;Geometry&gt;</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> type = feature.<span class="title function_">getGeometry</span>()?.<span class="title function_">getType</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (type === <span class="string">&#x27;Point&#x27;</span> || type === <span class="string">&#x27;LineString&#x27;</span> || type === <span class="string">&#x27;MultiLineString&#x27;</span> || type === <span class="string">&#x27;Polygon&#x27;</span>) <span class="keyword">return</span> styles[type];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 添加矢量图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> vectorSource = <span class="keyword">new</span> <span class="title class_">VectorSource</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> vectorLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: vectorSource,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">style</span>: styleFunction <span class="keyword">as</span> <span class="title class_">StyleLike</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addLayer</span>(vectorLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">createPolygon</span> = (<span class="params">coordinates: any</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> feature = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Polygon</span>(coordinates),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    vectorSource.<span class="title function_">addFeature</span>(feature);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建相交图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">createIntersect</span> = (<span class="params">coordinates: any</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> intersectLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">source</span>: <span class="keyword">new</span> <span class="title class_">VectorSource</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">features</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Polygon</span>(coordinates),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 定义相交样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> intersectStyle = <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(220, 10, 20, 0.3)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    intersectLayer.<span class="title function_">setStyle</span>(intersectStyle);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 添加相交图层到地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    map.<span class="title function_">addLayer</span>(intersectLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取到要素数据的坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> features = turfData.<span class="property">features</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> polygons = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> index = <span class="number">1</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">for</span> (<span class="keyword">const</span> feature <span class="keyword">of</span> features) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> coordinates = feature.<span class="property">geometry</span>.<span class="property">coordinates</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建openlayers的多边形要素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">createPolygon</span>(coordinates);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//创建turfjs的多边形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> polygon = turf.<span class="title function_">polygon</span>(coordinates, &#123; <span class="attr">name</span>: <span class="string">&#x27;poly&#x27;</span> + index &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    polygons.<span class="title function_">push</span>(polygon);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//利用turf做空间分析</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 获取相交几何坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//使用空间合并函数，合并几何体图形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> union = turf.<span class="title function_">union</span>(polygons[<span class="number">0</span>], polygons[<span class="number">1</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> coordinates = union.<span class="property">geometry</span>.<span class="property">coordinates</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">createIntersect</span>(coordinates);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// osm地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> raster = <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(), <span class="comment">//加载OpenStreetMap</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//渲染矢量图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [raster],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">26.126468438108688</span>], <span class="comment">//视图中心位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>, <span class="comment">//缩放到的级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">turfFun</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#info</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">z-index</span>: <span class="number">999</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-缓冲分析"><a href="#4-4-缓冲分析" class="headerlink" title="4.4 缓冲分析"></a>4.4 缓冲分析</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240813112958.png" alt="image.png"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;info&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;infoDom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> turf <span class="keyword">from</span> <span class="string">&#x27;@turf/turf&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> type &#123; <span class="title class_">Coordinate</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/coordinate&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Feature</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Feature&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">LineString</span>, <span class="title class_">Point</span>, <span class="title class_">Polygon</span>, type <span class="title class_">Geometry</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/geom&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorSource</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Fill</span>, <span class="title class_">Stroke</span>, <span class="title class_">Style</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">CircleStyle</span> <span class="keyword">from</span> <span class="string">&#x27;ol/style/Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> type &#123; <span class="title class_">StyleLike</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style/Style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">turfFun</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//定义各种要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> styles = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Point</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">image</span>: <span class="keyword">new</span> <span class="title class_">CircleStyle</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;rgba(255,255,0,0.4)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">radius</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;#ff0&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">LineString</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;#f00&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">MultiLineString</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;#0f0&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Polygon</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">lineDash</span>: [<span class="number">4</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(0, 0, 255, 0.1)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 根据要素类型设置几何要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">styleFunction</span> = (<span class="params">feature: Feature&lt;Geometry&gt;</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> type = feature.<span class="title function_">getGeometry</span>()?.<span class="title function_">getType</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (type === <span class="string">&#x27;Point&#x27;</span> || type === <span class="string">&#x27;LineString&#x27;</span> || type === <span class="string">&#x27;MultiLineString&#x27;</span> || type === <span class="string">&#x27;Polygon&#x27;</span>) <span class="keyword">return</span> styles[type];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">createBuffer</span> = (<span class="params">coordinates: Coordinate[][] | number[]</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 创建缓冲图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> bufferLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">source</span>: <span class="keyword">new</span> <span class="title class_">VectorSource</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">features</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Polygon</span>(coordinates),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 定义缓冲样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> bufferStyle = <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(220, 10, 20, 0.3)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    bufferLayer.<span class="title function_">setStyle</span>(bufferStyle);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 添加相交图层到地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    map.<span class="title function_">addLayer</span>(bufferLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 添加矢量图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> vectorSource = <span class="keyword">new</span> <span class="title class_">VectorSource</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> vectorLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: vectorSource,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">style</span>: styleFunction <span class="keyword">as</span> <span class="title class_">StyleLike</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addLayer</span>(vectorLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 点缓冲</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> pointFeature = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// eslint-disable-next-line no-loss-of-precision</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Point</span>([<span class="number">113.06167602539062</span>, <span class="number">23.08162680876907</span>]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorSource.<span class="title function_">addFeature</span>(pointFeature);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//创建turfjs的点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// eslint-disable-next-line no-loss-of-precision</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> point = turf.<span class="title function_">point</span>([<span class="number">113.06167602539062</span>, <span class="number">23.08162680876907</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//基于点缓冲，单位m,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> pointBuffered = turf.<span class="title function_">buffer</span>(point, <span class="number">1000</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">units</span>: <span class="string">&#x27;meters&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">steps</span>: <span class="number">128</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建点的缓冲面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">createBuffer</span>(pointBuffered.<span class="property">geometry</span>.<span class="property">coordinates</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 线缓冲</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> lineStringFeature = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">LineString</span>([</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// eslint-disable-next-line no-loss-of-precision</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.00674438476562</span>, <span class="number">22.992530787175006</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.1976318359375</span>, <span class="number">23.040561494558183</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.22990417480467</span>, <span class="number">23.116996102048127</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.25531005859375</span>, <span class="number">23.183288403039526</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorSource.<span class="title function_">addFeature</span>(lineStringFeature);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建turfjs的线</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> lineString = turf.<span class="title function_">lineString</span>([</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// eslint-disable-next-line no-loss-of-precision</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [<span class="number">113.00674438476562</span>, <span class="number">22.992530787175006</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [<span class="number">113.1976318359375</span>, <span class="number">23.040561494558183</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [<span class="number">113.22990417480467</span>, <span class="number">23.116996102048127</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [<span class="number">113.25531005859375</span>, <span class="number">23.183288403039526</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> lineStringBuffered = turf.<span class="title function_">buffer</span>(lineString, <span class="number">1000</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">units</span>: <span class="string">&#x27;meters&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">steps</span>: <span class="number">12</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建线的缓冲面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">createBuffer</span>(lineStringBuffered.<span class="property">geometry</span>.<span class="property">coordinates</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 面缓冲</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> polygonFeature = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Polygon</span>([</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.12690734863281</span>, <span class="number">23.20348524670303</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.11935424804688</span>, <span class="number">23.173820082731126</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.16810607910155</span>, <span class="number">23.15425009841184</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.21342468261719</span>, <span class="number">23.18455079512732</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.20793151855469</span>, <span class="number">23.22304802913141</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.12690734863281</span>, <span class="number">23.20348524670303</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorSource.<span class="title function_">addFeature</span>(polygonFeature);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建turfjs的多边形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> polygon = turf.<span class="title function_">polygon</span>([</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.12690734863281</span>, <span class="number">23.20348524670303</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.11935424804688</span>, <span class="number">23.173820082731126</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.16810607910155</span>, <span class="number">23.15425009841184</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.21342468261719</span>, <span class="number">23.18455079512732</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.20793151855469</span>, <span class="number">23.22304802913141</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.12690734863281</span>, <span class="number">23.20348524670303</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> polygonBuffered = turf.<span class="title function_">buffer</span>(polygon, <span class="number">1000</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">units</span>: <span class="string">&#x27;meters&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">steps</span>: <span class="number">12</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//创建面缓冲图形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">createBuffer</span>(polygonBuffered.<span class="property">geometry</span>.<span class="property">coordinates</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// osm地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> raster = <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(), <span class="comment">//加载OpenStreetMap</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//渲染矢量图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [raster],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">26.126468438108688</span>], <span class="comment">//视图中心位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>, <span class="comment">//缩放到的级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">turfFun</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#info</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">z-index</span>: <span class="number">999</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;info&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;infoDom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> turf <span class="keyword">from</span> <span class="string">&#x27;@turf/turf&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> type &#123; <span class="title class_">Coordinate</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/coordinate&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Feature</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Feature&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">LineString</span>, <span class="title class_">Point</span>, <span class="title class_">Polygon</span>, type <span class="title class_">Geometry</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/geom&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorSource</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Fill</span>, <span class="title class_">Stroke</span>, <span class="title class_">Style</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">CircleStyle</span> <span class="keyword">from</span> <span class="string">&#x27;ol/style/Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> type &#123; <span class="title class_">StyleLike</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style/Style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">turfFun</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//定义各种要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> styles = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Point</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">image</span>: <span class="keyword">new</span> <span class="title class_">CircleStyle</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;rgba(255,255,0,0.4)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">radius</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;#ff0&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">LineString</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;#f00&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">MultiLineString</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;#0f0&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">Polygon</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">lineDash</span>: [<span class="number">4</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(0, 0, 255, 0.1)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 根据要素类型设置几何要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">styleFunction</span> = (<span class="params">feature: Feature&lt;Geometry&gt;</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> type = feature.<span class="title function_">getGeometry</span>()?.<span class="title function_">getType</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (type === <span class="string">&#x27;Point&#x27;</span> || type === <span class="string">&#x27;LineString&#x27;</span> || type === <span class="string">&#x27;MultiLineString&#x27;</span> || type === <span class="string">&#x27;Polygon&#x27;</span>) <span class="keyword">return</span> styles[type];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">createBuffer</span> = (<span class="params">coordinates: Coordinate[][] | number[]</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 创建缓冲图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> bufferLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">source</span>: <span class="keyword">new</span> <span class="title class_">VectorSource</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">features</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Polygon</span>(coordinates),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 定义缓冲样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> bufferStyle = <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(220, 10, 20, 0.3)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    bufferLayer.<span class="title function_">setStyle</span>(bufferStyle);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 添加相交图层到地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    map.<span class="title function_">addLayer</span>(bufferLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 添加矢量图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> vectorSource = <span class="keyword">new</span> <span class="title class_">VectorSource</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> vectorLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: vectorSource,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">style</span>: styleFunction <span class="keyword">as</span> <span class="title class_">StyleLike</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addLayer</span>(vectorLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 点缓冲</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> pointFeature = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// eslint-disable-next-line no-loss-of-precision</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Point</span>([<span class="number">113.06167602539062</span>, <span class="number">23.08162680876907</span>]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorSource.<span class="title function_">addFeature</span>(pointFeature);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//创建turfjs的点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// eslint-disable-next-line no-loss-of-precision</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> point = turf.<span class="title function_">point</span>([<span class="number">113.06167602539062</span>, <span class="number">23.08162680876907</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//基于点缓冲，单位m,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> pointBuffered = turf.<span class="title function_">buffer</span>(point, <span class="number">1000</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">units</span>: <span class="string">&#x27;meters&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">steps</span>: <span class="number">128</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建点的缓冲面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">createBuffer</span>(pointBuffered.<span class="property">geometry</span>.<span class="property">coordinates</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 线缓冲</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> lineStringFeature = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">LineString</span>([</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// eslint-disable-next-line no-loss-of-precision</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.00674438476562</span>, <span class="number">22.992530787175006</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.1976318359375</span>, <span class="number">23.040561494558183</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.22990417480467</span>, <span class="number">23.116996102048127</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.25531005859375</span>, <span class="number">23.183288403039526</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorSource.<span class="title function_">addFeature</span>(lineStringFeature);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建turfjs的线</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> lineString = turf.<span class="title function_">lineString</span>([</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// eslint-disable-next-line no-loss-of-precision</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [<span class="number">113.00674438476562</span>, <span class="number">22.992530787175006</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [<span class="number">113.1976318359375</span>, <span class="number">23.040561494558183</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [<span class="number">113.22990417480467</span>, <span class="number">23.116996102048127</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [<span class="number">113.25531005859375</span>, <span class="number">23.183288403039526</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> lineStringBuffered = turf.<span class="title function_">buffer</span>(lineString, <span class="number">1000</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">units</span>: <span class="string">&#x27;meters&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">steps</span>: <span class="number">12</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建线的缓冲面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">createBuffer</span>(lineStringBuffered.<span class="property">geometry</span>.<span class="property">coordinates</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 面缓冲</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> polygonFeature = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Polygon</span>([</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.12690734863281</span>, <span class="number">23.20348524670303</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.11935424804688</span>, <span class="number">23.173820082731126</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.16810607910155</span>, <span class="number">23.15425009841184</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.21342468261719</span>, <span class="number">23.18455079512732</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.20793151855469</span>, <span class="number">23.22304802913141</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        [<span class="number">113.12690734863281</span>, <span class="number">23.20348524670303</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorSource.<span class="title function_">addFeature</span>(polygonFeature);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 创建turfjs的多边形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> polygon = turf.<span class="title function_">polygon</span>([</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.12690734863281</span>, <span class="number">23.20348524670303</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.11935424804688</span>, <span class="number">23.173820082731126</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.16810607910155</span>, <span class="number">23.15425009841184</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.21342468261719</span>, <span class="number">23.18455079512732</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.20793151855469</span>, <span class="number">23.22304802913141</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      [<span class="number">113.12690734863281</span>, <span class="number">23.20348524670303</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> polygonBuffered = turf.<span class="title function_">buffer</span>(polygon, <span class="number">1000</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">units</span>: <span class="string">&#x27;meters&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">steps</span>: <span class="number">12</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//创建面缓冲图形</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">createBuffer</span>(polygonBuffered.<span class="property">geometry</span>.<span class="property">coordinates</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// osm地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> raster = <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(), <span class="comment">//加载OpenStreetMap</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//渲染矢量图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [raster],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">26.126468438108688</span>], <span class="comment">//视图中心位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>, <span class="comment">//缩放到的级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">turfFun</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#info</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">z-index</span>: <span class="number">999</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>

<h3 id="4-5-动态缓冲"><a href="#4-5-动态缓冲" class="headerlink" title="4.5 动态缓冲"></a>4.5 动态缓冲</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240813113224.png" alt="image.png|609"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;info&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;infoDom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import * as turf from &#x27;@turf/turf&#x27;;</span><br><span class="line">import Feature from &#x27;ol/Feature&#x27;;</span><br><span class="line">import &#123; LineString, Polygon, type Geometry &#125; from &#x27;ol/geom&#x27;;</span><br><span class="line">import TileLayer from &#x27;ol/layer/Tile.js&#x27;;</span><br><span class="line">import VectorLayer from &#x27;ol/layer/Vector&#x27;;</span><br><span class="line">import Map from &#x27;ol/Map.js&#x27;;</span><br><span class="line">import OSM from &#x27;ol/source/OSM.js&#x27;;</span><br><span class="line">import VectorSource from &#x27;ol/source/Vector&#x27;;</span><br><span class="line">import &#123; Fill, Stroke, Style &#125; from &#x27;ol/style&#x27;;</span><br><span class="line">import CircleStyle from &#x27;ol/style/Circle&#x27;;</span><br><span class="line">import type &#123; StyleLike &#125; from &#x27;ol/style/Style&#x27;;</span><br><span class="line">import View from &#x27;ol/View.js&#x27;;</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;;</span><br><span class="line">let map: Map;</span><br><span class="line">let radius = 10;</span><br><span class="line">const maxRadius = 10000;</span><br><span class="line">let feature: Feature&lt;any&gt; | undefined = undefined;</span><br><span class="line">const turfFun = () =&gt; &#123;</span><br><span class="line">  //定义各种要素的样式</span><br><span class="line">  const styles = &#123;</span><br><span class="line">    Point: new Style(&#123;</span><br><span class="line">      image: new CircleStyle(&#123;</span><br><span class="line">        fill: new Fill(&#123;</span><br><span class="line">          color: &#x27;rgba(255,255,0,0.4)&#x27;,</span><br><span class="line">        &#125;),</span><br><span class="line">        radius: 5,</span><br><span class="line">        stroke: new Stroke(&#123;</span><br><span class="line">          color: &#x27;#ff0&#x27;,</span><br><span class="line">          width: 1,</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">    LineString: new Style(&#123;</span><br><span class="line">      stroke: new Stroke(&#123;</span><br><span class="line">        color: &#x27;#f00&#x27;,</span><br><span class="line">        width: 3,</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">    MultiLineString: new Style(&#123;</span><br><span class="line">      stroke: new Stroke(&#123;</span><br><span class="line">        color: &#x27;#0f0&#x27;,</span><br><span class="line">        width: 3,</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">    Polygon: new Style(&#123;</span><br><span class="line">      stroke: new Stroke(&#123;</span><br><span class="line">        color: &#x27;blue&#x27;,</span><br><span class="line">        lineDash: [4],</span><br><span class="line">        width: 3,</span><br><span class="line">      &#125;),</span><br><span class="line">      fill: new Fill(&#123;</span><br><span class="line">        color: &#x27;rgba(0, 0, 255, 0.1)&#x27;,</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  // 根据要素类型设置几何要素的样式</span><br><span class="line">  const styleFunction = (feature: Feature&lt;Geometry&gt;) =&gt; &#123;</span><br><span class="line">    let type = feature.getGeometry()?.getType();</span><br><span class="line">    if (type === &#x27;Point&#x27; || type === &#x27;LineString&#x27; || type === &#x27;MultiLineString&#x27; || type === &#x27;Polygon&#x27;) return styles[type];</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  // 添加矢量图层</span><br><span class="line">  const vectorSource = new VectorSource();</span><br><span class="line">  const vectorLayer = new VectorLayer(&#123;</span><br><span class="line">    source: vectorSource,</span><br><span class="line">    style: styleFunction as StyleLike,</span><br><span class="line">  &#125;);</span><br><span class="line">  map.addLayer(vectorLayer);</span><br><span class="line">  const dynamicBuffer = () =&gt; &#123;</span><br><span class="line">    radius += 10;</span><br><span class="line">    //调整缓冲半径</span><br><span class="line">    if (radius &gt;= maxRadius) &#123;</span><br><span class="line">      radius = maxRadius;</span><br><span class="line">    &#125;</span><br><span class="line">    //基于线缓冲出来的面就会不断变化</span><br><span class="line">    let lineString = turf.lineString([</span><br><span class="line">      // eslint-disable-next-line no-loss-of-precision</span><br><span class="line">      [113.00674438476562, 22.992530787175006],</span><br><span class="line">      [113.1976318359375, 23.040561494558183],</span><br><span class="line">      [113.22990417480467, 23.116996102048127],</span><br><span class="line">      [113.25531005859375, 23.183288403039526],</span><br><span class="line">    ]);</span><br><span class="line">    let lineStringBuffered = turf.buffer(lineString, radius, &#123;</span><br><span class="line">      units: &#x27;meters&#x27;,</span><br><span class="line">      steps: 12,</span><br><span class="line">    &#125;);</span><br><span class="line">    let coordinates = lineStringBuffered.geometry.coordinates;</span><br><span class="line">    if (feature) &#123;</span><br><span class="line">      //给相同的要素设置不不同坐标</span><br><span class="line">      var geometry = feature.getGeometry();</span><br><span class="line">      geometry.setCoordinates(coordinates);</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">    // 创建缓冲图层</span><br><span class="line">    let vectorSource = new VectorSource();</span><br><span class="line">    let bufferLayer = new VectorLayer(&#123;</span><br><span class="line">      source: vectorSource,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    feature = new Feature(&#123;</span><br><span class="line">      geometry: new Polygon(coordinates),</span><br><span class="line">    &#125;);</span><br><span class="line">    vectorSource.addFeature(feature);</span><br><span class="line">    // 定义缓冲样式</span><br><span class="line">    let bufferStyle = new Style(&#123;</span><br><span class="line">      stroke: new Stroke(&#123;</span><br><span class="line">        color: &#x27;red&#x27;,</span><br><span class="line">        width: 3,</span><br><span class="line">      &#125;),</span><br><span class="line">      fill: new Fill(&#123;</span><br><span class="line">        color: &#x27;rgba(220, 10, 20, 0.2)&#x27;,</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;);</span><br><span class="line">    bufferLayer.setStyle(bufferStyle);</span><br><span class="line">    // 添加相交图层到地图</span><br><span class="line">    map.addLayer(bufferLayer);</span><br><span class="line">  &#125;;</span><br><span class="line">  //线缓冲</span><br><span class="line">  let lineStringFeature = new Feature(&#123;</span><br><span class="line">    geometry: new LineString([</span><br><span class="line">      // eslint-disable-next-line no-loss-of-precision</span><br><span class="line">      [113.00674438476562, 22.992530787175006],</span><br><span class="line">      [113.1976318359375, 23.040561494558183],</span><br><span class="line">      [113.22990417480467, 23.116996102048127],</span><br><span class="line">      [113.25531005859375, 23.183288403039526],</span><br><span class="line">    ]),</span><br><span class="line">  &#125;);</span><br><span class="line">  vectorSource.addFeature(lineStringFeature);</span><br><span class="line">  //图层渲染监听</span><br><span class="line">  vectorLayer.on(&#x27;postrender&#x27;, dynamicBuffer);</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  // osm地图</span><br><span class="line">  const raster = new TileLayer(&#123;</span><br><span class="line">    source: new OSM(), //加载OpenStreetMap</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  //渲染矢量图层</span><br><span class="line">  map = new Map(&#123;</span><br><span class="line">    layers: [raster],</span><br><span class="line">    target: &#x27;map&#x27;,</span><br><span class="line">    view: new View(&#123;</span><br><span class="line">      center: [113.24981689453125, 26.126468438108688], //视图中心位置</span><br><span class="line">      projection: &#x27;EPSG:4326&#x27;, //指定投影</span><br><span class="line">      zoom: 5, //缩放到的级别</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;);</span><br><span class="line">  turfFun();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#map &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#info &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  z-index: 999;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="正向遮罩"><a href="#正向遮罩" class="headerlink" title="正向遮罩"></a>正向遮罩</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240813113653.png" alt="image.png"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">GeoJSON</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/format&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorSource</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Fill</span>, <span class="title class_">Stroke</span>, <span class="title class_">Style</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 某个行政区域的轮廓数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">draw</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> source = <span class="keyword">new</span> <span class="title class_">VectorSource</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 遮罩的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> style = <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">color</span>: <span class="string">&#x27;rgba(8,31,63,0.3)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">color</span>: <span class="string">&#x27;rgb(8,91,163)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> coverLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123; source, style &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  axios.<span class="title function_">get</span>(<span class="string">&#x27;https://geo.datav.aliyun.com/areas_v3/bound/440100_full.json&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> features = <span class="keyword">new</span> <span class="title class_">GeoJSON</span>().<span class="title function_">readFeatures</span>(response.<span class="property">data</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    coverLayer!.<span class="title function_">getSource</span>()!.<span class="title function_">addFeatures</span>(features <span class="keyword">as</span> any);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addLayer</span>(coverLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">26.126468438108688</span>], <span class="comment">//视图中心位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>, <span class="comment">//缩放到的级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">draw</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="反向遮罩"><a href="#反向遮罩" class="headerlink" title="反向遮罩"></a>反向遮罩</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240813113704.png" alt="image.png"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Feature</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">GeoJSON</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/format&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">LinearRing</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/geom&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; fromExtent &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/geom/Polygon&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorSource</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Fill</span>, <span class="title class_">Stroke</span>, <span class="title class_">Style</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">erase</span> = (<span class="params">features: any[]</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 全球的范围</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> polygonRing = <span class="title function_">fromExtent</span>([-<span class="number">180</span>, -<span class="number">90</span>, <span class="number">180</span>, <span class="number">90</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 擦除操作</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = features.<span class="property">length</span>; i &lt; len; i++) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> g = features[i].<span class="title function_">getGeometry</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> coords = g.<span class="title function_">getCoordinates</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    coords.<span class="title function_">forEach</span>(<span class="function">(<span class="params">coord: any[]</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//将坐标用线环链接起来</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> linearRing = <span class="keyword">new</span> <span class="title class_">LinearRing</span>(coord[<span class="number">0</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//给多边形追加线环</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      polygonRing.<span class="title function_">appendLinearRing</span>(linearRing);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">return</span> polygonRing;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 某个行政区域的轮廓数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">draw</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> source = <span class="keyword">new</span> <span class="title class_">VectorSource</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 遮罩的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> style = <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">color</span>: <span class="string">&#x27;rgba(8,31,63,0.3)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">color</span>: <span class="string">&#x27;rgb(8,91,163)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> reverseLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123; source, style &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  axios.<span class="title function_">get</span>(<span class="string">&#x27;https://geo.datav.aliyun.com/areas_v3/bound/440100_full.json&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 将data转换为feature</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> features = <span class="keyword">new</span> <span class="title class_">GeoJSON</span>().<span class="title function_">readFeatures</span>(response.<span class="property">data</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 擦除遮盖层数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> coverGeom = <span class="title function_">erase</span>(features);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> convertFt = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123; <span class="attr">geometry</span>: coverGeom &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    reverseLayer!.<span class="title function_">getSource</span>()!.<span class="title function_">addFeature</span>(convertFt);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addLayer</span>(reverseLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">26.126468438108688</span>], <span class="comment">//视图中心位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>, <span class="comment">//缩放到的级别</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">draw</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="路径回放"><a href="#路径回放" class="headerlink" title="路径回放"></a>路径回放</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240813113735.png" alt="|923"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!--地图挂载dom--&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tool&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;startAnimation&quot;</span>&gt;</span>开始<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;stopAnimation&quot;</span>&gt;</span>停止<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-slider</span> @<span class="attr">change</span>=<span class="string">&quot;handleSpeed&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;speed&quot;</span> <span class="attr">height</span>=<span class="string">&quot;200px&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">el-slider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Feature</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> type &#123; <span class="title class_">Coordinate</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/coordinate&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">LineString</span>, <span class="title class_">Point</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/geom&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; getVectorContext &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/render&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorSource</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Fill</span>, <span class="title class_">Stroke</span>, <span class="title class_">Style</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">CircleStyle</span> <span class="keyword">from</span> <span class="string">&#x27;ol/style/Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> animating = <span class="literal">false</span>; <span class="comment">//动画是否结束标记</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> speed = <span class="title function_">ref</span>(<span class="number">1</span>); <span class="comment">//默认速度</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> distance = <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">lastTime</span>: number | <span class="literal">null</span> = <span class="literal">null</span>; <span class="comment">//最后一帧默认渲染的实际</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> vectorLayer = <span class="literal">undefined</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> geom = <span class="literal">undefined</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> geoMarker = <span class="literal">undefined</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">position</span>: <span class="title class_">Point</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//地图路线的初始值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> coordinates = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [<span class="number">114.27429199218749</span>, <span class="number">30.5717205651999</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [<span class="number">113.92822265625</span>, <span class="number">29.267232865200878</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [<span class="number">113.92822265625</span>, <span class="number">28.57487404744697</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [<span class="number">113.79638671875</span>, <span class="number">27.46928747369202</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [<span class="number">113.73046875</span>, <span class="number">26.941659545381516</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [<span class="number">113.8623046875</span>, <span class="number">26.017297563851745</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [<span class="number">113.62060546875</span>, <span class="number">24.686952411999155</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [<span class="number">113.4228515625</span>, <span class="number">23.745125865762923</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [<span class="number">113.291015625</span>, <span class="number">23.120153621695614</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  [<span class="number">113.258056640625</span>, <span class="number">23.117627611920557</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> styles = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">route</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">width</span>: <span class="number">6</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">color</span>: [<span class="number">237</span>, <span class="number">212</span>, <span class="number">0</span>, <span class="number">0.8</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">icon</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">image</span>: <span class="keyword">new</span> <span class="title class_">CircleStyle</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(255,255,0,0.4)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">radius</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;#ff0&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">geoMarker</span>: <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">image</span>: <span class="keyword">new</span> <span class="title class_">CircleStyle</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">radius</span>: <span class="number">7</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123; <span class="attr">color</span>: <span class="string">&#x27;black&#x27;</span> &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;white&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 添加轨迹线和起始点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">addLineWithPoints</span> = (<span class="params">coordinates: Coordinate[]</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  geom = <span class="keyword">new</span> <span class="title class_">LineString</span>(coordinates);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> routeFeature = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">type</span>: <span class="string">&#x27;route&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometry</span>: geom,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 开始的点要素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> startMarker = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">type</span>: <span class="string">&#x27;icon&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Point</span>(geom.<span class="title function_">getFirstCoordinate</span>()),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 结束的点要素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> endMarker = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">type</span>: <span class="string">&#x27;icon&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Point</span>(geom.<span class="title function_">getLastCoordinate</span>()),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  position = startMarker.<span class="title function_">getGeometry</span>()!.<span class="title function_">clone</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 移动的点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  geoMarker = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">type</span>: <span class="string">&#x27;geoMarker&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometry</span>: position,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 将要素数据添加到矢量图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: <span class="keyword">new</span> <span class="title class_">VectorSource</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">features</span>: [routeFeature, geoMarker, startMarker, endMarker],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">style</span>: <span class="keyword">function</span> (<span class="params">feature</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> styles[feature.<span class="title function_">get</span>(<span class="string">&#x27;type&#x27;</span>) <span class="keyword">as</span> <span class="string">&#x27;route&#x27;</span> | <span class="string">&#x27;icon&#x27;</span> | <span class="string">&#x27;geoMarker&#x27;</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addLayer</span>(vectorLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 添加移动标签，这里使用一个圆点代替</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> movePointFeature = <span class="keyword">new</span> <span class="title class_">Feature</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometry</span>: <span class="keyword">new</span> <span class="title class_">Point</span>(coordinates[<span class="number">0</span>]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorLayer.<span class="title function_">getSource</span>()!.<span class="title function_">addFeature</span>(movePointFeature);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 移动要素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">moveFeature</span> = (<span class="params">event: &#123; frameState: &#123; time: any &#125; &#125;</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 每一帧渲染的时间</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> time = event.<span class="property">frameState</span>.<span class="property">time</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 上一帧与当前帧渲染的时间差</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> elapsedTime = time - lastTime!;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 通过上一帧与当前帧渲染时的时间差计算出当前坐标需要移动的距离</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 计算距离的distance保持数据再0与1之间，不断自增</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  distance = (distance + (speed.<span class="property">value</span> * elapsedTime) / <span class="number">1e6</span>) % <span class="number">2</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 返回沿线串提供的分数处的坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 是一个介于 0 和 1 之间的小数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 其中 0 是线串的开始，1 是结束</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> currentCoordinate = geom!.<span class="title function_">getCoordinateAt</span>(distance &gt; <span class="number">1</span> ? <span class="number">2</span> - distance : distance);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(distance);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (distance &gt;= <span class="number">1</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//路线结束</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">stopAnimation</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// console.log(currentCoordinate)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//当前的坐标设置到移动的marker</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  position!.<span class="title function_">setCoordinates</span>(currentCoordinate);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取到渲染事件的上下文对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> vectorContext = <span class="title function_">getVectorContext</span>(event <span class="keyword">as</span> any);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//给移动的marker设置样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorContext.<span class="title function_">setStyle</span>(styles.<span class="property">geoMarker</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//使用渲染事件的上下文对象，绘制geometry</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorContext.<span class="title function_">drawGeometry</span>(position!);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">render</span>(); <span class="comment">//手动渲染地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  lastTime = time;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 开始动画</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">startAnimation</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  animating = <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  lastTime = <span class="title class_">Date</span>.<span class="title function_">now</span>(); <span class="comment">//当前时间</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorLayer!.<span class="title function_">on</span>(<span class="string">&#x27;postrender&#x27;</span>, moveFeature); <span class="comment">//渲染时监听</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 将移动到哪个地方的点置空</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  geoMarker!.<span class="title function_">setGeometry</span>(<span class="literal">null</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 停止动画</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">stopAnimation</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  animating = <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  geoMarker!.<span class="title function_">setGeometry</span>(position!); <span class="comment">//移动的marker就当前移动点的位置</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  vectorLayer!.<span class="title function_">un</span>(<span class="string">&#x27;postrender&#x27;</span>, moveFeature); <span class="comment">//将渲染事件解绑</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 调整速度</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">handleSpeed</span> = (<span class="params">val: any</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  speed.<span class="property">value</span> = val;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">23.126468438108688</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">addLineWithPoints</span>(coordinates);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.tool</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">top</span>: <span class="number">50px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">right</span>: <span class="number">50px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">z-index</span>: <span class="number">9999</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="地图导出-PNG"><a href="#地图导出-PNG" class="headerlink" title="地图导出 PNG"></a>地图导出 PNG</h3><figure class="highlight js"><figcaption><span>FOLD</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Polygon</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/geom&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Draw</span>, &#123; createBox, createRegularPolygon &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/interaction/Draw&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">geometryFunction</span>: <span class="title class_">Function</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">draw</span>: <span class="title class_">Draw</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> source = <span class="keyword">new</span> <span class="title function_">OSM</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">exportImg</span> = (<span class="params">evt: &#123; feature: any &#125;</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 导出图片</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> feature = evt.<span class="property">feature</span>; <span class="comment">//绘制的要素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> extent = feature.<span class="title function_">getGeometry</span>().<span class="title function_">getExtent</span>(); <span class="comment">// 要素的范围</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(extent);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 地理坐标转换屏幕坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> coord1 = [extent[<span class="number">0</span>], extent[<span class="number">3</span>]];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> leftTopPosition = map.<span class="title function_">getPixelFromCoordinate</span>(coord1);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 地理坐标转换屏幕坐标</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> coord2 = [extent[<span class="number">2</span>], extent[<span class="number">1</span>]];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> bottomRightPosition = map.<span class="title function_">getPixelFromCoordinate</span>(coord2);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(leftTopPosition);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(bottomRightPosition);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 计算框选矩形的宽度以及高度像素</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> width = <span class="title class_">Math</span>.<span class="title function_">abs</span>(bottomRightPosition[<span class="number">0</span>] - leftTopPosition[<span class="number">0</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> height = <span class="title class_">Math</span>.<span class="title function_">abs</span>(bottomRightPosition[<span class="number">1</span>] - leftTopPosition[<span class="number">1</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(width);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(height);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 计算框选矩形的左上角屏幕坐标, 防止用户反过来绘制</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> minx = leftTopPosition[<span class="number">0</span>] &lt;= bottomRightPosition[<span class="number">0</span>] ? leftTopPosition[<span class="number">0</span>] : bottomRightPosition[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> miny = leftTopPosition[<span class="number">1</span>] &lt;= bottomRightPosition[<span class="number">1</span>] ? leftTopPosition[<span class="number">1</span>] : bottomRightPosition[<span class="number">1</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(minx);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(miny);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;canvas&#x27;</span>)[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> img = ctx!.<span class="title function_">getImageData</span>(minx, miny, width, height);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(img);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//创建一个canvas</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> drawCanvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  drawCanvas.<span class="property">width</span> = width;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  drawCanvas.<span class="property">height</span> = height;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 将上面获取到的imageData放到创建的canvas中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> context = drawCanvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  context!.<span class="title function_">putImageData</span>(img, <span class="number">0</span>, <span class="number">0</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//将图像转成base64编码</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> toDataURL = drawCanvas.<span class="title function_">toDataURL</span>(<span class="string">&#x27;image/png&#x27;</span>).<span class="title function_">replace</span>(<span class="string">&#x27;image/png&#x27;</span>, <span class="string">&#x27;image/octet-stream&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">console</span>.<span class="title function_">log</span>(toDataURL);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//创建a标签进行点击下载</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  link.<span class="property">download</span> = <span class="string">&#x27;框选导出.png&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  link.<span class="property">href</span> = toDataURL;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  link.<span class="title function_">click</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 反转遮罩层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">addDraw</span> = (<span class="params">type: any</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (type === <span class="string">&#x27;Square&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    type = <span class="string">&#x27;Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    geometryFunction = <span class="title function_">createRegularPolygon</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&#x27;Box&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    type = <span class="string">&#x27;Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    geometryFunction = <span class="title function_">createBox</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&#x27;Star&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    type = <span class="string">&#x27;Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    geometryFunction = <span class="keyword">function</span> (<span class="params">coordinates: string | any[], geometry: &#123; setCoordinates: (arg0: any[][][]) =&gt; <span class="keyword">void</span> &#125;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> center = coordinates[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> last = coordinates[coordinates.<span class="property">length</span> - <span class="number">1</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> dx = center[<span class="number">0</span>] - last[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> dy = center[<span class="number">1</span>] - last[<span class="number">1</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> radius = <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(dx * dx + dy * dy);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> rotation = <span class="title class_">Math</span>.<span class="title function_">atan2</span>(dy, dx);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> newCoordinates = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> numPoints = <span class="number">12</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numPoints; ++i) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> angle = rotation + (i * <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>) / numPoints;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> fraction = i % <span class="number">2</span> === <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0.5</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> offsetX = radius * fraction * <span class="title class_">Math</span>.<span class="title function_">cos</span>(angle);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> offsetY = radius * fraction * <span class="title class_">Math</span>.<span class="title function_">sin</span>(angle);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        newCoordinates.<span class="title function_">push</span>([center[<span class="number">0</span>] + offsetX, center[<span class="number">1</span>] + offsetY]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      newCoordinates.<span class="title function_">push</span>(newCoordinates[<span class="number">0</span>].<span class="title function_">slice</span>());</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (!geometry) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        geometry = <span class="keyword">new</span> <span class="title class_">Polygon</span>([newCoordinates]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        geometry.<span class="title function_">setCoordinates</span>([newCoordinates]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> geometry;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// //添加绘制交互事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  draw = <span class="keyword">new</span> <span class="title class_">Draw</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">type</span>: type <span class="keyword">as</span> any, <span class="comment">// 绘制的几何图形的几何类型</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">clickTolerance</span>: <span class="number">6</span>, <span class="comment">//点击公差</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: source <span class="keyword">as</span> any,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometryFunction</span>: geometryFunction <span class="keyword">as</span> any,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">wrapX</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addInteraction</span>(draw);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// //绘制结束导出地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  draw.<span class="title function_">on</span>(<span class="string">&#x27;drawend&#x27;</span>, exportImg);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">23.126468438108688</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">12</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">source</span>: source,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">getView</span>().<span class="title function_">fit</span>([<span class="number">112.950439453125</span>, <span class="number">22.510986328125</span>, <span class="number">114.06005859375</span>, <span class="number">23.939208984375</span>], map.<span class="title function_">getSize</span>() <span class="keyword">as</span> any);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">addDraw</span>(<span class="string">&#x27;Box&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="地图导出-PDF"><a href="#地图导出-PDF" class="headerlink" title="地图导出 PDF"></a>地图导出 PDF</h3><figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> jsPDF <span class="keyword">from</span> <span class="string">&#x27;jspdf&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Polygon</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/geom&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Draw</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/interaction&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; createBox, createRegularPolygon &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/interaction/Draw&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> format = <span class="string">&#x27;a4&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> resolution = <span class="number">72</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 纸张大小</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> dims = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">a0</span>: [<span class="number">1189</span>, <span class="number">841</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">a1</span>: [<span class="number">841</span>, <span class="number">594</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">a2</span>: [<span class="number">594</span>, <span class="number">420</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">a3</span>: [<span class="number">420</span>, <span class="number">297</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">a4</span>: [<span class="number">297</span>, <span class="number">210</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">a5</span>: [<span class="number">210</span>, <span class="number">148</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">geometryFunction</span>: <span class="title class_">Function</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">draw</span>: <span class="title class_">Draw</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> source = <span class="keyword">new</span> <span class="title function_">OSM</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">exportPDF</span> = (<span class="params">evt: &#123; feature: any &#125;</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> dim = dims.<span class="property">a4</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//根据使用的纸张的高宽计算绘制范围宽高</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> width = <span class="title class_">Math</span>.<span class="title function_">round</span>((dim[<span class="number">0</span>] * resolution) / <span class="number">25.4</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> height = <span class="title class_">Math</span>.<span class="title function_">round</span>((dim[<span class="number">1</span>] * resolution) / <span class="number">25.4</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> size = map.<span class="title function_">getSize</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> viewResolution = map.<span class="title function_">getView</span>().<span class="title function_">getResolution</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 监听渲染完成的事件，只监听一次</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 单独创建了canvas</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> mapCanvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  mapCanvas.<span class="property">width</span> = width;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  mapCanvas.<span class="property">height</span> = height;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//获取到canvas的上下文对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> mapContext = mapCanvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">forEach</span>.<span class="title function_">call</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 获取到当前绘制的openlayers绘制图层的canvas</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.ol-layer canvas&#x27;</span>),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> (<span class="params">canvas</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (canvas.<span class="property">width</span> &gt; <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 获取到canvas的透明度</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> opacity = canvas.<span class="property">parentNode</span>.<span class="property">style</span>.<span class="property">opacity</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 地图有透明度就把地图透明度给等待绘制的canvas社会透明度</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        mapContext!.<span class="property">globalAlpha</span> = opacity === <span class="string">&#x27;&#x27;</span> ? <span class="number">1</span> : <span class="title class_">Number</span>(opacity);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 获取到canvas的矩阵</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> transform = canvas.<span class="property">style</span>.<span class="property">transform</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// Get the transform parameters from the style&#x27;s transform matrix</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> matrix = transform</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          .<span class="title function_">match</span>(<span class="regexp">/^matrix\(([^\(]*)\)$/</span>)[<span class="number">1</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          .<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          .<span class="title function_">map</span>(<span class="title class_">Number</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(matrix);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// Apply the transform to the export map context</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 给等待绘制的canvas设置地图的矩阵</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">CanvasRenderingContext2D</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">setTransform</span>.<span class="title function_">apply</span>(mapContext, matrix);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 再绘制地图给canvas</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        mapContext!.<span class="title function_">drawImage</span>(canvas, <span class="number">0</span>, <span class="number">0</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// mapContext.globalAlpha = 1;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//构建pdf组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> pdf = <span class="keyword">new</span> <span class="title function_">jsPDF</span>(<span class="string">&#x27;landscape&#x27;</span>, <span class="literal">undefined</span>, format);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//将绘制的canvas地图服PDF组件，并且需要传入尺寸</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      pdf.<span class="title function_">addImage</span>(mapCanvas.<span class="title function_">toDataURL</span>(<span class="string">&#x27;image/jpeg&#x27;</span>), <span class="string">&#x27;JPEG&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, dim[<span class="number">0</span>], dim[<span class="number">1</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//pdf保存并设置pdf文件的名称</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      pdf.<span class="title function_">save</span>(<span class="string">&#x27;map.pdf&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 重置地图的尺寸和分辨率</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      map.<span class="title function_">setSize</span>(size);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      map.<span class="title function_">getView</span>().<span class="title function_">setResolution</span>(viewResolution);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// 设置尺寸</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> printSize = [width, height];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">setSize</span>(printSize);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (size) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> scaling = <span class="title class_">Math</span>.<span class="title function_">min</span>(width / size[<span class="number">0</span>], height / size[<span class="number">1</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    map.<span class="title function_">getView</span>().<span class="title function_">setResolution</span>(viewResolution! / scaling);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 反转遮罩层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">addDraw</span> = (<span class="params">type: any</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (type === <span class="string">&#x27;Square&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    type = <span class="string">&#x27;Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    geometryFunction = <span class="title function_">createRegularPolygon</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&#x27;Box&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    type = <span class="string">&#x27;Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    geometryFunction = <span class="title function_">createBox</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&#x27;Star&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    type = <span class="string">&#x27;Circle&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    geometryFunction = <span class="keyword">function</span> (<span class="params">coordinates: string | any[], geometry: &#123; setCoordinates: (arg0: any[][][]) =&gt; <span class="keyword">void</span> &#125;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> center = coordinates[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> last = coordinates[coordinates.<span class="property">length</span> - <span class="number">1</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> dx = center[<span class="number">0</span>] - last[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> dy = center[<span class="number">1</span>] - last[<span class="number">1</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> radius = <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(dx * dx + dy * dy);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> rotation = <span class="title class_">Math</span>.<span class="title function_">atan2</span>(dy, dx);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> newCoordinates = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> numPoints = <span class="number">12</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numPoints; ++i) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> angle = rotation + (i * <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>) / numPoints;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> fraction = i % <span class="number">2</span> === <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0.5</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> offsetX = radius * fraction * <span class="title class_">Math</span>.<span class="title function_">cos</span>(angle);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> offsetY = radius * fraction * <span class="title class_">Math</span>.<span class="title function_">sin</span>(angle);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        newCoordinates.<span class="title function_">push</span>([center[<span class="number">0</span>] + offsetX, center[<span class="number">1</span>] + offsetY]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      newCoordinates.<span class="title function_">push</span>(newCoordinates[<span class="number">0</span>].<span class="title function_">slice</span>());</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (!geometry) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        geometry = <span class="keyword">new</span> <span class="title class_">Polygon</span>([newCoordinates]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        geometry.<span class="title function_">setCoordinates</span>([newCoordinates]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> geometry;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// //添加绘制交互事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  draw = <span class="keyword">new</span> <span class="title class_">Draw</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">type</span>: type <span class="keyword">as</span> any, <span class="comment">// 绘制的几何图形的几何类型</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">clickTolerance</span>: <span class="number">6</span>, <span class="comment">//点击公差</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: source <span class="keyword">as</span> any,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">geometryFunction</span>: geometryFunction <span class="keyword">as</span> any,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">wrapX</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addInteraction</span>(draw);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// //绘制结束导出地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  draw.<span class="title function_">on</span>(<span class="string">&#x27;drawend&#x27;</span>, exportPDF);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">23.126468438108688</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">12</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">source</span>: source,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">addDraw</span>(<span class="string">&#x27;Box&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="警告圈"><a href="#警告圈" class="headerlink" title="警告圈"></a>警告圈</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240813114350.png" alt="image.png"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; easeOut &#125; from &#x27;ol/easing&#x27;;</span><br><span class="line">import Feature from &#x27;ol/Feature&#x27;;</span><br><span class="line">import &#123; Point, type Geometry &#125; from &#x27;ol/geom&#x27;;</span><br><span class="line">import TileLayer from &#x27;ol/layer/Tile.js&#x27;;</span><br><span class="line">import VectorLayer from &#x27;ol/layer/Vector&#x27;;</span><br><span class="line">import Map from &#x27;ol/Map.js&#x27;;</span><br><span class="line">import &#123; getVectorContext &#125; from &#x27;ol/render&#x27;;</span><br><span class="line">import type RenderEvent from &#x27;ol/render/Event&#x27;;</span><br><span class="line">import &#123; XYZ &#125; from &#x27;ol/source&#x27;;</span><br><span class="line">import VectorSource from &#x27;ol/source/Vector&#x27;;</span><br><span class="line">import &#123; Stroke, Style &#125; from &#x27;ol/style&#x27;;</span><br><span class="line">import CircleStyle from &#x27;ol/style/Circle&#x27;;</span><br><span class="line">import View from &#x27;ol/View.js&#x27;;</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;;</span><br><span class="line">import gz from &#x27;../data/广州市.json&#x27;;</span><br><span class="line"></span><br><span class="line">let map: Map;</span><br><span class="line">let vector: VectorLayer&lt;any&gt; | undefined = undefined;</span><br><span class="line">let source: VectorSource&lt;Feature&lt;Geometry&gt;&gt; | undefined = undefined;</span><br><span class="line">let tileLayer = new TileLayer(&#123;</span><br><span class="line">  source: new XYZ(&#123;</span><br><span class="line">    url: &#x27;http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnline&#x27; + &#x27;StreetPurplishBlue/MapServer/tile/&#123;z&#125;/&#123;y&#125;/&#123;x&#125;&#x27;,</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;);</span><br><span class="line">const flash = (source: VectorSource&lt;Feature&lt;Geometry&gt;&gt; | undefined, duration: number, radius: number) =&gt; &#123;</span><br><span class="line">  // 当前时间</span><br><span class="line">  let start = new Date().getTime();</span><br><span class="line">  // 进行地图水波渲染</span><br><span class="line">  tileLayer.on(&#x27;postrender&#x27;, animate);</span><br><span class="line">  function animate(event: RenderEvent) &#123;</span><br><span class="line">    // 获取几何图形</span><br><span class="line">    let vectorContext = getVectorContext(event);</span><br><span class="line">    // 获取当前渲染帧状态</span><br><span class="line">    let frameState = event.frameState;</span><br><span class="line">    // 渲染当前帧与渲染开始时间差</span><br><span class="line">    let elapsed = frameState!.time - start;</span><br><span class="line">    // 已占比率</span><br><span class="line">    let elapsedRatio = elapsed / duration;</span><br><span class="line">    // radius半径为5结束为10</span><br><span class="line">    radius = easeOut(elapsedRatio) * 5 + 5;</span><br><span class="line">    // 不透渐变消失</span><br><span class="line">    let opacity = easeOut(1 - elapsedRatio);</span><br><span class="line">    // Circle样式</span><br><span class="line">    let style = new Style(&#123;</span><br><span class="line">      image: new CircleStyle(&#123;</span><br><span class="line">        radius: radius,</span><br><span class="line">        stroke: new Stroke(&#123;</span><br><span class="line">          color: &#x27;rgba(255, 0, 0, &#x27; + opacity + &#x27;)&#x27;,</span><br><span class="line">          width: 1 + opacity,</span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;);</span><br><span class="line">    // 给几何图形添加样式</span><br><span class="line">    vectorContext.setStyle(style);</span><br><span class="line">    if (elapsed &gt; duration) &#123;</span><br><span class="line">      start = frameState!.time;</span><br><span class="line">    &#125;</span><br><span class="line">    //将几何体渲染到画布中</span><br><span class="line">    let features = source!.getFeatures();</span><br><span class="line">    for (const feature of features) &#123;</span><br><span class="line">      let geom = feature.getGeometry();</span><br><span class="line">      vectorContext.drawGeometry(geom as any);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //请求地图渲染（在下一个动画帧处）</span><br><span class="line">    map.render();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">const addRandomFeature = (duration: number, radius: number) =&gt; &#123;</span><br><span class="line">  let features = gz.features;</span><br><span class="line">  let geometries = [];</span><br><span class="line">  for (const feature of features) &#123;</span><br><span class="line">    let center = feature.properties.center;</span><br><span class="line">    //创建广州每个区的中心点位置</span><br><span class="line">    let geom = new Point(center);</span><br><span class="line">    let pointFeature = new Feature(geom);</span><br><span class="line">    //设置圆点的样式</span><br><span class="line">    const image = new CircleStyle(&#123;</span><br><span class="line">      radius: 2,</span><br><span class="line">      fill: undefined,</span><br><span class="line">      stroke: new Stroke(&#123;</span><br><span class="line">        color: &#x27;red&#x27;,</span><br><span class="line">        width: 1,</span><br><span class="line">      &#125;),</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    pointFeature.setStyle(</span><br><span class="line">      new Style(&#123;</span><br><span class="line">        image: image,</span><br><span class="line">      &#125;),</span><br><span class="line">    );</span><br><span class="line">    geometries.push(pointFeature);</span><br><span class="line">  &#125;</span><br><span class="line">  //将所有的点要素数据添加到矢量图层中</span><br><span class="line">  source!.addFeatures(geometries);</span><br><span class="line"></span><br><span class="line">  //添加矢量图层数据的动画</span><br><span class="line">  flash(source, duration, radius);</span><br><span class="line">&#125;;</span><br><span class="line">const addVector = () =&gt; &#123;</span><br><span class="line">  //矢量数据源与数据图层</span><br><span class="line">  source = new VectorSource();</span><br><span class="line">  vector = new VectorLayer(&#123;</span><br><span class="line">    zIndex: 9999,</span><br><span class="line">    source: source,</span><br><span class="line">  &#125;);</span><br><span class="line">  map.addLayer(vector);</span><br><span class="line">  // 初始动画间隔时间</span><br><span class="line">  let duration = 1000;</span><br><span class="line">  // 初始半径</span><br><span class="line">  let radius = 1;</span><br><span class="line">  // 添加随机动态要素点</span><br><span class="line">  addRandomFeature(duration, radius);</span><br><span class="line"></span><br><span class="line">  map.getView().fit([112.950439453125, 22.510986328125, 114.06005859375, 23.939208984375], map.getSize() as any);</span><br><span class="line">&#125;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  map = new Map(&#123;</span><br><span class="line">    target: &#x27;map&#x27;,</span><br><span class="line">    view: new View(&#123;</span><br><span class="line">      center: [113.24981689453125, 23.126468438108688],</span><br><span class="line">      projection: &#x27;EPSG:4326&#x27;,</span><br><span class="line">      zoom: 12,</span><br><span class="line">    &#125;),</span><br><span class="line">    layers: [tileLayer],</span><br><span class="line">  &#125;);</span><br><span class="line">  addVector();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">#map &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="克里金"><a href="#克里金" class="headerlink" title="克里金"></a>克里金</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240813114336.png" alt="image.png"></p>
<figure class="highlight js"><figcaption><span>fold</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> * <span class="keyword">as</span> turf <span class="keyword">from</span> <span class="string">&#x27;@turf/turf&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> type &#123; <span class="title class_">Feature</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">GeoJSON</span> <span class="keyword">from</span> <span class="string">&#x27;ol/format/GeoJSON&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> type &#123; <span class="title class_">Geometry</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/geom&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">ImageLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Image&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">ImageCanvas</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/source&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">VectorSource</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/Vector&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; <span class="title class_">Circle</span>, <span class="title class_">Fill</span>, <span class="title class_">Stroke</span>, <span class="title class_">Style</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> type &#123; <span class="title class_">StyleLike</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/style/Style&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="variable constant_">GZ</span> <span class="keyword">from</span> <span class="string">&#x27;../data/GZ.json&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> gz <span class="keyword">from</span> <span class="string">&#x27;../data/广州市.json&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> kriging <span class="keyword">from</span> <span class="string">&#x27;../lib/kriging.js&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> <span class="attr">map</span>: <span class="title class_">Map</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> osm = <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//定义使用颜色值表示最大值与最小值的范围</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> colors = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: -<span class="number">50</span>, <span class="attr">max</span>: -<span class="number">45</span>, <span class="attr">color</span>: <span class="string">&#x27;#2e0057&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: -<span class="number">45</span>, <span class="attr">max</span>: -<span class="number">40</span>, <span class="attr">color</span>: <span class="string">&#x27;#4a008b&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: -<span class="number">40</span>, <span class="attr">max</span>: -<span class="number">35</span>, <span class="attr">color</span>: <span class="string">&#x27;#0d0b66&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: -<span class="number">35</span>, <span class="attr">max</span>: -<span class="number">30</span>, <span class="attr">color</span>: <span class="string">&#x27;#0c2695&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: -<span class="number">30</span>, <span class="attr">max</span>: -<span class="number">25</span>, <span class="attr">color</span>: <span class="string">&#x27;#0c43c4&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: -<span class="number">25</span>, <span class="attr">max</span>: -<span class="number">20</span>, <span class="attr">color</span>: <span class="string">&#x27;#1a6bd7&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: -<span class="number">20</span>, <span class="attr">max</span>: -<span class="number">15</span>, <span class="attr">color</span>: <span class="string">&#x27;#3492f4&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: -<span class="number">15</span>, <span class="attr">max</span>: -<span class="number">10</span>, <span class="attr">color</span>: <span class="string">&#x27;#67b7f7&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: -<span class="number">10</span>, <span class="attr">max</span>: -<span class="number">5</span>, <span class="attr">color</span>: <span class="string">&#x27;#96cef4&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: -<span class="number">5</span>, <span class="attr">max</span>: -<span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;#c1e6f9&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: <span class="number">0</span>, <span class="attr">max</span>: <span class="number">5</span>, <span class="attr">color</span>: <span class="string">&#x27;#fefec6&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: <span class="number">5</span>, <span class="attr">max</span>: <span class="number">10</span>, <span class="attr">color</span>: <span class="string">&#x27;#f8f1a1&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: <span class="number">10</span>, <span class="attr">max</span>: <span class="number">15</span>, <span class="attr">color</span>: <span class="string">&#x27;#ffe479&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: <span class="number">15</span>, <span class="attr">max</span>: <span class="number">20</span>, <span class="attr">color</span>: <span class="string">&#x27;#ffcc4f&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: <span class="number">20</span>, <span class="attr">max</span>: <span class="number">25</span>, <span class="attr">color</span>: <span class="string">&#x27;#f19906&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: <span class="number">25</span>, <span class="attr">max</span>: <span class="number">30</span>, <span class="attr">color</span>: <span class="string">&#x27;#f07609&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: <span class="number">30</span>, <span class="attr">max</span>: <span class="number">35</span>, <span class="attr">color</span>: <span class="string">&#x27;#eb481f&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: <span class="number">35</span>, <span class="attr">max</span>: <span class="number">40</span>, <span class="attr">color</span>: <span class="string">&#x27;#ab0110&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: <span class="number">40</span>, <span class="attr">max</span>: <span class="number">45</span>, <span class="attr">color</span>: <span class="string">&#x27;#650015&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123; <span class="attr">min</span>: <span class="number">45</span>, <span class="attr">max</span>: <span class="number">50</span>, <span class="attr">color</span>: <span class="string">&#x27;#44000b&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 矢量几何要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> image = <span class="keyword">new</span> <span class="title class_">Circle</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">radius</span>: <span class="number">5</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">fill</span>: <span class="literal">undefined</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123; <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>, <span class="attr">width</span>: <span class="number">1</span> &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> styles = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Point</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//点样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">image</span>: image,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">LineString</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//线的边界样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;green&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Polygon</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//区的边界样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">lineDash</span>: [<span class="number">4</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">3</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//区的填充样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(0, 0, 255, 0.1)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">LinearRing</span>: [],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">MultiLineString</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//多线的边界样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;green&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">MultiPoint</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//多点的点样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">image</span>: image,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">MultiPolygon</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//多区的边界样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;yellow&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">1</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//多区的填充样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(255, 255, 0, 0.1)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">GeometryCollection</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//集合要素的边界样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;magenta&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//集合要素的填充样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;magenta&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">image</span>: <span class="keyword">new</span> <span class="title class_">Circle</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//集合要素的点样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">radius</span>: <span class="number">10</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">fill</span>: <span class="literal">undefined</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">color</span>: <span class="string">&#x27;magenta&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Circle</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">new</span> <span class="title class_">Style</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">stroke</span>: <span class="keyword">new</span> <span class="title class_">Stroke</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//圆的边界样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">width</span>: <span class="number">2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">fill</span>: <span class="keyword">new</span> <span class="title class_">Fill</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//圆的填充样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">color</span>: <span class="string">&#x27;rgba(255,0,0,0.2)&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 根据要素类型设置几何要素的样式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">styleFunction</span> = (<span class="params">feature: Feature&lt;Geometry&gt;</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> type = feature.<span class="title function_">getGeometry</span>()?.<span class="title function_">getType</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (type) <span class="keyword">return</span> styles[type];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">getRandom</span> = (<span class="params">min: number, max: number</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> num = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (max - min + <span class="number">1</span>) + min);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">return</span> num;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 存储值与经纬度</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">drawKriging</span> = (<span class="params">extend: number[]</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> values = [],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    longitudes = [],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    latitudes = [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> features = gz.<span class="property">features</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">for</span> (<span class="keyword">const</span> feature <span class="keyword">of</span> features) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//中心点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> center = feature.<span class="property">properties</span>.<span class="property">center</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//随机生成数值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    values.<span class="title function_">push</span>(<span class="title function_">getRandom</span>(-<span class="number">50</span>, <span class="number">50</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    longitudes.<span class="title function_">push</span>(center[<span class="number">0</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    latitudes.<span class="title function_">push</span>(center[<span class="number">1</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (values.<span class="property">length</span> &gt; <span class="number">3</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 克里金训练</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> coordinates = <span class="variable constant_">GZ</span>.<span class="property">geometries</span>[<span class="number">0</span>].<span class="property">coordinates</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> variogram = kriging.<span class="title function_">train</span>(values, longitudes, latitudes, <span class="string">&#x27;exponential&#x27;</span>, <span class="number">0</span>, <span class="number">100</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 使用刚才的variogram对象使polygons描述的地理位置内的格网元素具备不一样的预测值；</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// (extend[2] - extend[0]) / 1000 中 换成 100 格网比较大</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> grid = kriging.<span class="title function_">grid</span>(coordinates, variogram, (extend[<span class="number">2</span>] - extend[<span class="number">0</span>]) / <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 创建新图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> canvasLayer = <span class="keyword">new</span> <span class="title class_">ImageLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">source</span>: <span class="keyword">new</span> <span class="title class_">ImageCanvas</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">canvasFunction</span>: <span class="function">(<span class="params">extent, resolution, pixelRatio, size, projection</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">console</span>.<span class="title function_">log</span>(extent);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">let</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          canvas.<span class="property">width</span> = size[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          canvas.<span class="property">height</span> = size[<span class="number">1</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          canvas.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">//设置canvas透明度</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          canvas!.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)!.<span class="property">globalAlpha</span> = <span class="number">0.75</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          kriging.<span class="title function_">plot</span>(canvas, grid, [extent[<span class="number">0</span>], extent[<span class="number">2</span>]], [extent[<span class="number">1</span>], extent[<span class="number">3</span>]], colors);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> canvas;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//向map添加图层</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    map.<span class="title function_">addLayer</span>(canvasLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">23.126468438108688</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">zoom</span>: <span class="number">12</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layers</span>: [osm],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// to do 绘制好边界线</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> vectorLayer = <span class="keyword">new</span> <span class="title class_">VectorLayer</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">source</span>: <span class="keyword">new</span> <span class="title class_">VectorSource</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">url</span>: <span class="string">&#x27;https://geo.datav.aliyun.com/areas_v3/bound/geojson?code=440100_full&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">format</span>: <span class="keyword">new</span> <span class="title class_">GeoJSON</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">style</span>: styleFunction <span class="keyword">as</span> <span class="title class_">StyleLike</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  map.<span class="title function_">addLayer</span>(vectorLayer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//首次加载，自动渲染一次差值图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> coordinates = <span class="variable constant_">GZ</span>.<span class="property">geometries</span>[<span class="number">0</span>].<span class="property">coordinates</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> polygon = turf.<span class="title function_">polygon</span>(coordinates);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> bbox = turf.<span class="title function_">bbox</span>(polygon);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">//绘制克里金</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">drawKriging</span>(bbox);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#map</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://VernalScenery.github.io">Scenery</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://vernalscenery.github.io/2024/07/30/openlayer/11%20openLayer_%E7%BB%93%E5%90%88%E5%85%B6%E4%BB%96%E5%BA%93/">https://vernalscenery.github.io/2024/07/30/openlayer/11%20openLayer_%E7%BB%93%E5%90%88%E5%85%B6%E4%BB%96%E5%BA%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://VernalScenery.github.io" target="_blank">春和景明的记事本</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/openLayer/">openLayer</a><a class="post-meta__tags" href="/tags/WebGIS/">WebGIS</a></div><div class="post_share"><div class="social-share" data-image="/./img/1.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/09/11/ThreeJS/03_ThreeJS_%E5%87%A0%E4%BD%95%E4%BD%93Geometries/" title="03_ThreeJS_几何体"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">03_ThreeJS_几何体</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/29/openlayer/09%20openlayer_%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD/" title="09 openlayer_高级功能"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">09 openlayer_高级功能</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/07/26/openlayer/02%20openLayer_Control%20%E6%8E%A7%E4%BB%B6/" title="02 openLayer_Control 控件"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="title">02 openLayer_Control 控件</div></div></a></div><div><a href="/2024/07/26/openlayer/03%20openLayer_Layer%20+%20Source%20%E5%90%84%E7%A7%8D%E6%95%B0%E6%8D%AE/" title="03 openLayer_Layer + Source 各种数据"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="title">03 openLayer_Layer + Source 各种数据</div></div></a></div><div><a href="/2024/07/26/openlayer/01%20openLayer_%E5%85%A5%E9%97%A8/" title="01 openLayer_入门"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="title">01 openLayer_入门</div></div></a></div><div><a href="/2024/07/27/openlayer/06%20openlayers_OGC%20%E8%BF%87%E6%BB%A4%E5%99%A8/" title="06 openlayers_OGC 过滤器"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-27</div><div class="title">06 openlayers_OGC 过滤器</div></div></a></div><div><a href="/2024/07/26/openlayer/05%20openlayers_OGC%20%E6%9C%8D%E5%8A%A1/" title="05 openlayers_OGC 服务"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="title">05 openlayers_OGC 服务</div></div></a></div><div><a href="/2024/07/26/openlayer/04%20openLayer_Interaction%20%E5%9C%B0%E5%9B%BE%E4%BA%A4%E4%BA%92/" title="04 openLayer_Interaction 地图交互"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="title">04 openLayer_Interaction 地图交互</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/./img/1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Scenery</div><div class="author-info__description">今天不想跑，所以才去跑</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">59</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/chjm0121" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/1595718686@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-openlayers-%E4%B8%8E-Echarts"><span class="toc-text">1 openlayers 与 Echarts</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%95%A3%E7%82%B9%E5%9B%BE"><span class="toc-text">1.1 散点图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E8%BF%81%E5%BE%99%E5%9B%BE"><span class="toc-text">1.2 迁徙图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E5%85%A8%E5%9B%BD%E7%A9%BA%E6%B0%94%E8%B4%A8%E9%87%8F%E5%9B%BE"><span class="toc-text">1.3 全国空气质量图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-openlayers-%E4%B8%8E-cesium"><span class="toc-text">2 openlayers 与 cesium</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E4%BA%8C%E4%B8%89%E7%BB%B4%E8%81%94%E5%8A%A8"><span class="toc-text">2.1 二三维联动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-openlayers-%E4%B8%8E-wind"><span class="toc-text">3 openlayers 与 wind</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="toc-text">3.1 参数说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.2 代码实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-openlayers-%E4%B8%8E-turf"><span class="toc-text">4 openlayers 与 turf</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E7%9B%B8%E4%BA%A4%E5%88%86%E6%9E%90"><span class="toc-text">4.1 相交分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%B7%AE%E5%BC%82%E5%88%86%E6%9E%90"><span class="toc-text">4.2 差异分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E7%A9%BA%E9%97%B4%E5%90%88%E5%B9%B6"><span class="toc-text">4.3 空间合并</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E7%BC%93%E5%86%B2%E5%88%86%E6%9E%90"><span class="toc-text">4.4 缓冲分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E5%8A%A8%E6%80%81%E7%BC%93%E5%86%B2"><span class="toc-text">4.5 动态缓冲</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%90%91%E9%81%AE%E7%BD%A9"><span class="toc-text">正向遮罩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%90%91%E9%81%AE%E7%BD%A9"><span class="toc-text">反向遮罩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E5%9B%9E%E6%94%BE"><span class="toc-text">路径回放</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9B%BE%E5%AF%BC%E5%87%BA-PNG"><span class="toc-text">地图导出 PNG</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9B%BE%E5%AF%BC%E5%87%BA-PDF"><span class="toc-text">地图导出 PDF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AD%A6%E5%91%8A%E5%9C%88"><span class="toc-text">警告圈</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%8B%E9%87%8C%E9%87%91"><span class="toc-text">克里金</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/13/JS/14_JSLearn_%E6%A8%A1%E5%9D%97%E5%8C%96/" title="14_JSLearn_模块化">14_JSLearn_模块化</a><time datetime="2024-12-13T01:19:26.000Z" title="发表于 2024-12-13 09:19:26">2024-12-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/13/JS/13_JSLearn_%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="13_JSLearn_异常处理">13_JSLearn_异常处理</a><time datetime="2024-12-13T00:28:47.000Z" title="发表于 2024-12-13 08:28:47">2024-12-13</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/12/JS/12_JSLearn_%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%E3%80%81%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF-%E9%98%9F%E5%88%97/" title="12_JSLearn_异步函数、事件循环-队列">12_JSLearn_异步函数、事件循环-队列</a><time datetime="2024-12-12T00:47:24.000Z" title="发表于 2024-12-12 08:47:24">2024-12-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/11/JS/11_JSLearn_Iterator%E3%80%81Generator/" title="11_JSLearn_Iterator、Generator">11_JSLearn_Iterator、Generator</a><time datetime="2024-12-10T23:12:36.000Z" title="发表于 2024-12-11 07:12:36">2024-12-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/05/JS/10_JSLearn_Promise/" title="10_JSLearn_Promise">10_JSLearn_Promise</a><time datetime="2024-12-05T02:03:58.000Z" title="发表于 2024-12-05 10:03:58">2024-12-05</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/./img/1.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Scenery</div><div class="footer_custom_text"><div>波澜不惊</div><div class="footer-div"><img class="footer-icon" src="./img/备案图标.png"><a class="footer-a" target="_blank" rel="noopener" href="http://beian.miit.gov.cn/">皖ICP备2021016944号-1</a></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>