<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>01 openLayer_入门 | 春和景明的记事本</title><meta name="author" content="Scenery"><meta name="copyright" content="Scenery"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1 综述关注三点：  每个类构建时的 option，以及该类的可触发的事件，和可调用的属性 类与类之间的继承关系，子类可以继承父类的方法 openLayer 对 JS 标准库中数组、事件等进行了一些封装，从而形成的类  2 Observable - 抽象基类 - 可观察类 Abstract base"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://vernalscenery.github.io/2024/07/26/01%20openLayer_%E5%85%A5%E9%97%A8/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '01 openLayer_入门',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-26 22:01:47'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/./img/1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">38</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/./img/1.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="春和景明的记事本"><span class="site-name">春和景明的记事本</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">01 openLayer_入门</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-26T01:00:12.000Z" title="发表于 2024-07-26 09:00:12">2024-07-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-26T14:01:47.343Z" title="更新于 2024-07-26 22:01:47">2024-07-26</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>27分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="01 openLayer_入门"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-综述"><a href="#1-综述" class="headerlink" title="1 综述"></a>1 综述</h2><p>关注三点：</p>
<ul>
<li>每个类构建时的 <strong>option</strong>，以及该类的可触发的<strong>事件</strong>，和可调用的<strong>属性</strong></li>
<li>类与类之间的继承关系，子类可以继承父类的方法</li>
<li>openLayer 对 JS 标准库中数组、事件等进行了一些封装，从而形成的类</li>
</ul>
<h2 id="2-Observable-抽象基类-可观察类"><a href="#2-Observable-抽象基类-可观察类" class="headerlink" title="2 Observable - 抽象基类 - 可观察类"></a>2 Observable - 抽象基类 - 可观察类</h2><blockquote>
<p>Abstract base class; normally only used for creating subclasses and not instantiated in apps. An event target providing convenient methods for listener registration and unregistration. A generic <code>change</code> event is always available through <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Observable-Observable.html#changed"><code>changed</code></a>.</p>
</blockquote>
<p><strong>可以实现 chang : 属性</strong></p>
<h3 id="2-1-Subclasses"><a href="#2-1-Subclasses" class="headerlink" title="2.1 Subclasses"></a>2.1 Subclasses</h3><ul>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Object-BaseObject.html">BaseObject</a></li>
</ul>
<h3 id="2-2-Fires-事件"><a href="#2-2-Fires-事件" class="headerlink" title="2.2 Fires(事件)"></a>2.2 Fires(事件)</h3><h4 id="2-2-1-chang-BaseEvent"><a href="#2-2-1-chang-BaseEvent" class="headerlink" title="2.2.1 chang(BaseEvent)"></a>2.2.1 chang(<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_events_Event-BaseEvent.html">BaseEvent</a>)</h4><p>Triggered when the revision counter is increased</p>
<p>这个 revision 即由 getRevision 获取的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通用更改事件。当修订计数器增加时触发。</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;change&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event);</span><br><span class="line">    <span class="comment">//map对象的属性只要有改变，就会修改此对象的版本号，版本号变化了，此事件就会触发</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// change:size事件</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;change:size&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;size改变&#x27;</span>);</span><br><span class="line">    <span class="comment">//屏幕尺寸变化的回调</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// change:view事件</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;change:view&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;view改变&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// change:target事件</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;change:target&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;target改变&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// change:layerGroup事件</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;change:layergroup&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;target改变&#x27;</span>);</span><br><span class="line">    <span class="comment">//图层动态变化，图例动态变化</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-error-BaseEvent"><a href="#2-2-2-error-BaseEvent" class="headerlink" title="2.2.2 error(BaseEvent)"></a>2.2.2 error(<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_events_Event-BaseEvent.html">BaseEvent</a>)</h4><p>Triggered when an error occurs.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 地图发生错误触发</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="2-3-Methods-方法"><a href="#2-3-Methods-方法" class="headerlink" title="2.3 Methods(方法)"></a>2.3 Methods(方法)</h3><h4 id="2-3-1-changed"><a href="#2-3-1-changed" class="headerlink" title="2.3.1 changed()"></a>2.3.1 changed()</h4><p>获取此对象的版本号</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取此对象的版本号。每次修改对象时，其版本号都会增加。</span></span><br><span class="line"><span class="keyword">let</span> revision = map.<span class="title function_">getRevision</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getRevision1&#x27;</span>, revision);</span><br><span class="line">map.<span class="title function_">changed</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getRevision12&#x27;</span>, map.<span class="title function_">getRevision</span>());</span><br></pre></td></tr></table></figure>

<h4 id="2-3-2-dispatchEvent-event-gt-boolean-undefined"><a href="#2-3-2-dispatchEvent-event-gt-boolean-undefined" class="headerlink" title="2.3.2 dispatchEvent(event)=&gt; {boolean | undefined}"></a>2.3.2 dispatchEvent(event)=&gt; {boolean | undefined}</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// dispatchEvent即执行一下dblclick事件</span></span><br><span class="line">    map.<span class="title function_">dispatchEvent</span>(<span class="string">&#x27;dblclick&#x27;</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h4 id="2-3-3-getRevision-gt-number"><a href="#2-3-3-getRevision-gt-number" class="headerlink" title="2.3.3 getRevision()=&gt;{number}"></a>2.3.3 getRevision()=&gt;{number}</h4><p>获取版本号</p>
<h4 id="2-3-4-on-type-listener-、once-type-listener-、-un-type-listener"><a href="#2-3-4-on-type-listener-、once-type-listener-、-un-type-listener" class="headerlink" title="2.3.4 on(type, listener)、once(type, listener)、 un(type, listener)"></a>2.3.4 on(type, listener)、once(type, listener)、 un(type, listener)</h4><p>监听事件</p>
<p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240722213956.png" alt="image.png"></p>
<h2 id="3-BaseObject-抽象基类"><a href="#3-BaseObject-抽象基类" class="headerlink" title="3 BaseObject - 抽象基类"></a>3 BaseObject - 抽象基类</h2><blockquote>
<p>Abstract base class; normally only used for creating subclasses and not instantiated in apps. Most non-trivial classes inherit from this.</p>
<p>它扩展了 <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Observable-Observable.html"><code>Observable</code></a> 可观察的属性，其中每个属性以及整个对象都是可观察的。</p>
<p>从此继承的类具有预定义属性，您可以向其中添加自己的属性。预定义属性在本文档中列为“可观察属性”，并具有自己的访问器；例如， <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Map-Map.html"><code>Map</code></a> 具有<code>target</code>属性，可使用 访问 <code>getTarget()</code>并使用 更改<code>setTarget()</code>。但是，并非所有属性都是可设置的。还有通用访问器<code>get()</code>和<code>set()</code>。例如，<code>get(&#39;target&#39;)</code>相当于<code>getTarget()</code>。</p>
<p>访问<code>set</code>器会触发更改事件，您可以通过注册侦听器来监控此事件。例如，<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_View-View.html"><code>View</code></a> 具有 <code>center</code>属性，因此<code>view.on(&#39;change:center&#39;, function(evt) &#123;...&#125;);</code>每当 center 属性的值发生变化时都会调用该函数。在函数内，<code>evt.target</code>将是视图，因此<code>evt.target.getCenter()</code> 将返回新的中心。</p>
<p>您可以使用 添加您自己的可观察属性 <code>object.set(&#39;prop&#39;, &#39;value&#39;)</code>，并使用 检索该属性<code>object.get(&#39;prop&#39;)</code>。您可以使用 监听该属性值的更改 <code>object.on(&#39;change:prop&#39;, listener)</code>。您可以使用 获取所有属性的列表 <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Object-BaseObject.html#getProperties"><code>getProperties</code></a>。</p>
<p>Note that the observable properties are separate from standard JS properties. You can, for example, give your map object a title with <code>map.title=&#39;New title&#39;</code> and with <code>map.set(&#39;title&#39;, &#39;Another title&#39;)</code>. The first will be a <code>hasOwnProperty</code>; the second will appear in <code>getProperties()</code>. Only the second is observable.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">BaseObject</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Object.js&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-1-Subclasses"><a href="#3-1-Subclasses" class="headerlink" title="3.1 Subclasses"></a>3.1 Subclasses</h3><ul>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Collection-Collection.html">Collection</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Feature-Feature.html">Feature</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Geolocation-Geolocation.html">Geolocation</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Map-Map.html">Map</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Overlay-Overlay.html">Overlay</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_View-View.html">View</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_Control-Control.html">Control</a><ul>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_Attribution-Attribution.html">Attribution</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_FullScreen-FullScreen.html">FullScreen</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_MousePosition-MousePosition.html">MousePosition</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_OverviewMap-OverviewMap.html">OverviewMap</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_Rotate-Rotate.html">Rotate</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_ScaleLine-ScaleLine.html">ScaleLine</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_ZoomSlider-ZoomSlider.html">ZoomSlider</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_ZoomToExtent-ZoomToExtent.html">ZoomToExtent</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_Zoom-Zoom.html">Zoom</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_geom_Geometry-Geometry.html">Geometry</a><ul>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_geom_GeometryCollection-GeometryCollection.html">GeometryCollection</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_geom_SimpleGeometry-SimpleGeometry.html">SimpleGeometry</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_Interaction-Interaction.html">Interaction</a><ul>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_DblClickDragZoom-DblClickDragZoom.html">DblClickDragZoom</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_DoubleClickZoom-DoubleClickZoom.html">DoubleClickZoom</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_DragAndDrop-DragAndDrop.html">DragAndDrop</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_KeyboardPan-KeyboardPan.html">KeyboardPan</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_KeyboardZoom-KeyboardZoom.html">KeyboardZoom</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_Link-Link.html">Link</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_MouseWheelZoom-MouseWheelZoom.html">MouseWheelZoom</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_Pointer-PointerInteraction.html">PointerInteraction</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_Select-Select.html">Select</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Base-BaseLayer.html">BaseLayer</a><ul>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Group-LayerGroup.html">LayerGroup</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Layer-Layer.html">Layer</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_source_Source-Source.html">Source</a><ul>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_source_Image-ImageSource.html">ImageSource</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_source_Tile-TileSource.html">TileSource</a></li>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_source_Vector-VectorSource.html">VectorSource</a></li>
</ul>
</li>
</ul>
<h3 id="3-2-Extends"><a href="#3-2-Extends" class="headerlink" title="3.2 Extends"></a>3.2 Extends</h3><ul>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Observable-Observable.html">Observable</a></li>
</ul>
<h3 id="3-3-Fires-事件"><a href="#3-3-Fires-事件" class="headerlink" title="3.3 Fires(事件)"></a>3.3 Fires(事件)</h3><h4 id="3-3-1-chang-BaseEvent-inherit"><a href="#3-3-1-chang-BaseEvent-inherit" class="headerlink" title="3.3.1 chang(BaseEvent)[inherit]"></a>3.3.1 chang(<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_events_Event-BaseEvent.html">BaseEvent</a>)[inherit]</h4><h4 id="3-3-2-error-BaseEvent-inherit"><a href="#3-3-2-error-BaseEvent-inherit" class="headerlink" title="3.3.2 error(BaseEvent)[inherit]"></a>3.3.2 error(<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_events_Event-BaseEvent.html">BaseEvent</a>)[inherit]</h4><h4 id="3-3-3-propertychange-ObjectEvent"><a href="#3-3-3-propertychange-ObjectEvent" class="headerlink" title="3.3.3 propertychange(ObjectEvent)"></a>3.3.3 propertychange(<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Object.ObjectEvent.html">ObjectEvent</a>)</h4><p>Triggered when a property is changed.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当属性改变时触发</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;propertychange&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;propertychange&#x27;</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="3-4-Methods-方法"><a href="#3-4-Methods-方法" class="headerlink" title="3.4 Methods(方法)"></a>3.4 Methods(方法)</h3><h4 id="3-4-1-changed-inherit"><a href="#3-4-1-changed-inherit" class="headerlink" title="3.4.1 changed() [inherit]"></a>3.4.1 changed() [inherit]</h4><h4 id="3-4-2-on-type-listener-、once-type-listener-、-un-type-listener-inherit"><a href="#3-4-2-on-type-listener-、once-type-listener-、-un-type-listener-inherit" class="headerlink" title="3.4.2 on(type, listener)、once(type, listener)、 un(type, listener)[inherit]"></a>3.4.2 on(type, listener)、once(type, listener)、 un(type, listener)[inherit]</h4><h4 id="3-4-3-getRevision-gt-number-inherit"><a href="#3-4-3-getRevision-gt-number-inherit" class="headerlink" title="3.4.3 getRevision()=&gt;{number}[inherit]"></a>3.4.3 getRevision()=&gt;{number}[inherit]</h4><h4 id="3-4-4-get-key"><a href="#3-4-4-get-key" class="headerlink" title="3.4.4 get(key)"></a>3.4.4 get(key)</h4><p>Gets a value.</p>
<h4 id="3-4-5-getKeys-gt-Array-lt-string-gt"><a href="#3-4-5-getKeys-gt-Array-lt-string-gt" class="headerlink" title="3.4.5 getKeys()=&gt; {Array.&lt;string&gt;}"></a>3.4.5 getKeys()=&gt; {Array.&lt;string&gt;}</h4><p>Get a list of object property names.</p>
<h4 id="3-4-6-getProperties-gt-Object-lt-string-gt"><a href="#3-4-6-getProperties-gt-Object-lt-string-gt" class="headerlink" title="3.4.6 getProperties()=&gt;{Object.&lt;string, * &gt; }"></a>3.4.6 getProperties()=&gt;{Object.&lt;string, * &gt; }</h4><p>Get an object of all property names and values.</p>
<h4 id="3-4-7-set-key-value-silent"><a href="#3-4-7-set-key-value-silent" class="headerlink" title="3.4.7 set(key, value, silent)"></a>3.4.7 set(key, value, silent)</h4><p>Sets a value.</p>
<p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240722221042.png" alt="image.png"></p>
<p><strong>silent 设置为 true 指 在不触发事件的情况下更新</strong></p>
<h4 id="3-4-8-setProperties-values-silent"><a href="#3-4-8-setProperties-values-silent" class="headerlink" title="3.4.8 setProperties(values, silent)"></a>3.4.8 setProperties(values, silent)</h4><p>Sets a collection of key-value pairs. Note that this changes any existing properties and adds new ones (it does not remove any existing properties).</p>
<p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240722221223.png" alt="image.png"></p>
<h4 id="3-4-9-unset-key-silent"><a href="#3-4-9-unset-key-silent" class="headerlink" title="3.4.9 unset(key, silent)"></a>3.4.9 unset(key, silent)</h4><p>Unsets a property.</p>
<p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240722221253.png" alt="image.png"></p>
<h2 id="4-Collection-JS-数组的扩展"><a href="#4-Collection-JS-数组的扩展" class="headerlink" title="4 Collection - JS 数组的扩展"></a>4 Collection - JS 数组的扩展</h2><blockquote>
<p>标准 JS 数组的扩展版本，添加了方便的操作方法。添加和删除对 Collection 的更改会触发 Collection 事件。请注意，这不包括对 Collection_内_对象的更改；它们会触发相应对象的事件，而不是整个 Collection 的事件。</p>
</blockquote>
<h3 id="4-1-new-Collection-array-options"><a href="#4-1-new-Collection-array-options" class="headerlink" title="4.1 new Collection(array, options)"></a>4.1 new Collection(array, options)</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/QQ_1721809982425.png" alt="QQ_1721809982425.png"></p>
<h3 id="4-2-Fires"><a href="#4-2-Fires" class="headerlink" title="4.2 Fires"></a>4.2 Fires</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/QQ_1721810023693.png"></p>
<h3 id="4-3-Extends"><a href="#4-3-Extends" class="headerlink" title="4.3 Extends"></a>4.3 Extends</h3><ul>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Object-BaseObject.html">BaseObject</a></li>
</ul>
<h3 id="4-4-Observable-Properties"><a href="#4-4-Observable-Properties" class="headerlink" title="4.4 Observable Properties"></a>4.4 Observable Properties</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240724163416.png" alt="image.png"></p>
<h3 id="4-5-Methods"><a href="#4-5-Methods" class="headerlink" title="4.5 Methods"></a>4.5 Methods</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240724163432.png" alt="image.png"></p>
<p><strong>注意几个方法：</strong></p>
<ul>
<li><code>insertAt(index, elem)</code> ：Insert an element at the provided index.<br><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/QQ_1721810153600.png" alt="QQ_1721810153600.png"></li>
<li><code>item(index)=&gt;&#123;T&#125;</code> : Get the element at the provided index.</li>
<li><code>remove(elem)=&gt;&#123;T | undefined&#125;</code> : Remove the first occurrence of an element from the collection.</li>
<li><code>removeAt(index)&#123;T | undefined&#125;</code> : Remove the element at the provided index and return it. Return <code>undefined</code> if the collection does not contain this index.</li>
<li><code>setAt(index, elem)</code> : Set the element at the provided index.</li>
</ul>
<h2 id="5-Map-地图"><a href="#5-Map-地图" class="headerlink" title="5 Map - 地图"></a>5 Map - 地图</h2><blockquote>
<p>The map is the core component of OpenLayers. For a map to render, a view, one or more layers, and a target container are needed:</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Map</span> <span class="keyword">from</span> <span class="string">&#x27;ol/Map.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">View</span> <span class="keyword">from</span> <span class="string">&#x27;ol/View.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TileLayer</span> <span class="keyword">from</span> <span class="string">&#x27;ol/layer/Tile.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">OSM</span> <span class="keyword">from</span> <span class="string">&#x27;ol/source/OSM.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(&#123;</span><br><span class="line">  <span class="attr">view</span>: <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span><br><span class="line">    <span class="attr">center</span>: [<span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">    <span class="attr">zoom</span>: <span class="number">1</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">layers</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">TileLayer</span>(&#123;</span><br><span class="line">      <span class="attr">source</span>: <span class="keyword">new</span> <span class="title function_">OSM</span>(),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">target</span>: <span class="string">&#x27;map&#x27;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>The above snippet creates a map using a <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Tile-TileLayer.html"><code>TileLayer</code></a> to display <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_source_OSM-OSM.html"><code>OSM</code></a> OSM data and render it to a DOM element with the id <code>map</code>.</p>
<p>The constructor places a viewport container (with CSS class name <code>ol-viewport</code>) in the target element (see <code>getViewport()</code>), and then two further elements within the viewport: one with CSS class name <code>ol-overlaycontainer-stopevent</code> for controls and some overlays, and one with CSS class name <code>ol-overlaycontainer</code> for other overlays (see the <code>stopEvent</code> option of <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Overlay-Overlay.html"><code>Overlay</code></a> for the difference). The map itself is placed in a further element within the viewport.</p>
<p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/QQ_1721694433855.png" alt="QQ_1721694433855.png"></p>
<p>Layers are stored as a <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Collection-Collection.html"><code>Collection</code></a> in layerGroups. A top-level group is provided by the library. This is what is accessed by <code>getLayerGroup</code> and <code>setLayerGroup</code>. Layers entered in the options are added to this group, and <code>addLayer</code> and <code>removeLayer</code> change the layer collection in the group. <code>getLayers</code> is a convenience function for <code>getLayerGroup().getLayers()</code>. Note that <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Group-LayerGroup.html"><code>LayerGroup</code></a> is a subclass of <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Base-BaseLayer.html"><code>BaseLayer</code></a>, so layers entered in the options or added with <code>addLayer</code> can be groups, which can contain further groups, and so on.</p>
<h3 id="5-1-Extends"><a href="#5-1-Extends" class="headerlink" title="5.1 Extends"></a>5.1 Extends</h3><ul>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Object-BaseObject.html">BaseObject</a></li>
</ul>
<h3 id="5-2-new-Map-options"><a href="#5-2-new-Map-options" class="headerlink" title="5.2 new Map(options)"></a>5.2 new Map(options)</h3><ul>
<li><code>target</code><br>地图的容器，元素本身或 id 元素的 。如果在构建时未指定，则 module:ol/Map~Map # setTarget 必须调用以渲染地图 。如果通过元素传递，则容器可以位于辅助文档中。</li>
<li><code>Layers </code><br>如果未定义，将渲染没有图层的地图。请注意，图层按提供的顺序呈现，因此，例如，如果您希望矢量图层出现在切片图层的顶部，则它必须位于切片图层之后。</li>
<li><code>view</code><br>地图视图。除非在构造时或通过 指定，否则将不会获取图层源 module:ol/Map~Map #setView 。</li>
<li><code>overlays</code><br>最初添加到地图的叠加层。默认情况下，不添加叠加层。</li>
<li><code>interactions</code><br>最初添加到地图的交互。如果未指定， module:ol/interaction.defaults 则使用。</li>
<li><code>controls</code><br>最初添加到地图的控件。如果未指定， module:ol/control.defaults 则使用。</li>
<li><code>pixelRatio</code><br>设备上物理像素与设备无关像素（下降）之间的比率。（默认为 window.devicePixelRatio）Window 接口的 devicePixelRatio 返回当前显示设备的物理像素分辨率与 CSS 像素分辨率之比。此值也可以解释为像素大小的比率：一个 CSS 像素的大小与一个物理像素的大小。 简单来说，它告诉浏览器应使用多少屏幕实际像素来绘制单个 CSS 像素。</li>
<li><code>keyboardEventTarget</code><br>监听键盘事件的元素。这确定何时触发 KeyboardPan 和 KeyboardZoom 交互。例如，如果此选项设置为 document 键盘交互将始终触发。如果未指定此选项，则监听键盘事件的元素是地图目标（即用户提供的地图 div）。如果不是 document，则需要聚焦目标元素才能发出关键事件，要求目标元素具有 tabindex 属性。</li>
<li><code>maxTilesLoading</code><br>同时加载的最大数量的瓦片。（默认为 16）moveTolerance 光标必须移动的最小距离（以像素为单位）才能被检测为地图移动事件而不是单击。增加此值可以更轻松地单击地图。（默认为 1）</li>
</ul>
<h3 id="5-3-Fires-事件"><a href="#5-3-Fires-事件" class="headerlink" title="5.3 Fires(事件)"></a>5.3 Fires(事件)</h3><h4 id="5-3-1-BaseEvent"><a href="#5-3-1-BaseEvent" class="headerlink" title="5.3.1 BaseEvent"></a>5.3.1 <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_events_Event-BaseEvent.html">BaseEvent</a></h4><ul>
<li><code>change</code></li>
<li><code>error</code></li>
</ul>
<h4 id="5-3-2-ObjectEvent"><a href="#5-3-2-ObjectEvent" class="headerlink" title="5.3.2 ObjectEvent"></a>5.3.2 <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Object.ObjectEvent.html">ObjectEvent</a></h4><ul>
<li>`change:layerGroup </li>
<li><code>change:size</code> </li>
<li><code>change:target</code> </li>
<li><code>change:view</code> </li>
<li><code>propertychang</code></li>
</ul>
<h4 id="5-3-3-MapBrowserEvent"><a href="#5-3-3-MapBrowserEvent" class="headerlink" title="5.3.3 MapBrowserEvent"></a>5.3.3 <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_MapBrowserEvent-MapBrowserEvent.html">MapBrowserEvent</a></h4><ul>
<li><code>click</code></li>
<li>`dblclick</li>
<li><code>singleclick</code></li>
<li><code>pointerdrag</code> : Triggered when a pointer is dragged.</li>
<li><code>pointermove</code> : Triggered when a pointer is moved. Note that on touch devices this is triggered when the map is panned, so is not the same as mousemove.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// click事件,双击触发两次,点多少次都会触发</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;click&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//双击事件，没有拖动</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;dblclick&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;dblclick&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//真正的单击，没有拖动和双击。请注意，此事件会延迟 250 毫秒，以确保它不是双击。</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;singleclick&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;singleclick &#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 触摸设备事件 */</span></span><br><span class="line"><span class="comment">// 地图触摸拖拽事件</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;pointerdrag&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;pointerdrag&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 地图触摸移动事件</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;pointermove&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;pointermove&#x27;</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h4 id="5-3-4-MapEvent"><a href="#5-3-4-MapEvent" class="headerlink" title="5.3.4 MapEvent"></a>5.3.4 <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_MapEvent-MapEvent.html">MapEvent</a></h4><ul>
<li><code>loadstart</code> : Triggered when loading of additional map data has completed.</li>
<li><code>loadend</code> : Triggered when loading of additional map data (tiles, images, features) starts.</li>
<li><code>movestart</code> : Triggered when the map starts moving.</li>
<li><code>moveend</code> : Triggered after the map is moved.</li>
<li><code>postrender</code> : Triggered after a map frame is rendered.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 地图开始移动事件</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;movestart&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;movestart &#x27;</span>, event);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 地图移动结束事件</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;moveend&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;moveend&#x27;</span>, event);</span><br><span class="line">  &#125;);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//地图渲染完成触发</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;postrender&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;postrender&#x27;</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h4 id="5-3-5-RenderEvent"><a href="#5-3-5-RenderEvent" class="headerlink" title="5.3.5 RenderEvent"></a>5.3.5 <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_render_Event-RenderEvent.html">RenderEvent</a></h4><ul>
<li><code>precompose</code><br> Triggered before layers are composed. When dispatched by the map, the event object will not have a context set. When dispatched by a layer, the event object will have a context set. Only WebGL layers currently dispatch this event.</li>
<li><code>postcompose</code><br>Triggered after layers are composed. When dispatched by the map, the event object will not have a context set. When dispatched by a layer, the event object will have a context set. Only WebGL layers currently dispatch this event.</li>
<li><code>rendercomplete</code><br> Triggered when rendering is complete, i.e. all sources and tiles have finished loading for the current viewport, and all tiles are faded in. The event object will not have a context set.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在渲染图层之前触发，没有设置上下文context</span></span><br><span class="line">  <span class="comment">//监听的是渲染的图层layer</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;precompose&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;precompose&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//所有图层渲染完后触发，没有设置上下文context</span></span><br><span class="line">  <span class="comment">//监听的是渲染的图层layer</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;postcompose&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;postcompose&#x27;</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="5-4-Observable-Properties"><a href="#5-4-Observable-Properties" class="headerlink" title="5.4 Observable Properties"></a>5.4 Observable Properties</h3><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Settable</th>
<th><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Object.ObjectEvent.html">ObjectEvent</a> type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>layerGroup</code></td>
<td><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Group-LayerGroup.html">LayerGroup</a></td>
<td>yes</td>
<td><code>change:layergroup</code></td>
<td>A layer group containing the layers in this map.</td>
</tr>
<tr>
<td><code>size</code></td>
<td><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_size.html#~Size">Size</a> | undefined</td>
<td>yes</td>
<td><code>change:size</code></td>
<td>The size in pixels of the map in the DOM.</td>
</tr>
<tr>
<td><code>target</code></td>
<td>HTMLElement | string | undefined</td>
<td>yes</td>
<td><code>change:target</code></td>
<td>The Element or id of the Element that the map is rendered in.</td>
</tr>
<tr>
<td><code>view</code></td>
<td><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_View-View.html">View</a></td>
<td>yes</td>
<td><code>change:view</code></td>
<td>The view that controls this map.</td>
</tr>
</tbody></table>
<h3 id="5-5-Methods-方法"><a href="#5-5-Methods-方法" class="headerlink" title="5.5 Methods(方法)"></a>5.5 Methods(方法)</h3><h4 id="5-5-1-add"><a href="#5-5-1-add" class="headerlink" title="5.5.1 add"></a>5.5.1 add</h4><ul>
<li><code>addControl(control)</code></li>
<li><code>addInteraction(interaction)</code></li>
<li><code>addLayer(layer)</code></li>
<li><code>addOverlay(overlay)</code></li>
</ul>
<h4 id="5-5-2-get"><a href="#5-5-2-get" class="headerlink" title="5.5.2 get"></a>5.5.2 get</h4><ul>
<li>getControls() =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Collection-Collection.html">Collection</a> &lt; <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_Control-Control.html">Control</a> &gt;}</li>
<li>getInteractions() =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Collection-Collection.html">Collection</a> &lt; <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_Interaction-Interaction.html">Interaction</a> &gt;}</li>
<li>getLayers() =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Collection-Collection.html">Collection</a> &lt; <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Base-BaseLayer.html">BaseLayer</a> &gt;}</li>
<li>getLayerGroup() =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Group-LayerGroup.html">LayerGroup</a>}</li>
<li>getAllLayers() =&gt; {Array&lt; <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Layer-Layer.html">Layer</a> &gt;}</li>
<li>getOverlays() =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Collection-Collection.html">Collection</a> &lt; <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Overlay-Overlay.html">Overlay</a> &gt;}</li>
<li>getOverlayById(id) =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Overlay-Overlay.html">Overlay</a> | null}</li>
<li>getSize() =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_size.html#~Size">Size</a> | undefined}</li>
<li>getTarget() =&gt; {HTMLElement | string | undefined}</li>
<li>getTargetElement() =&gt; {HTMLElement}</li>
<li>getView() =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_View-View.html">View</a>}</li>
<li>getViewport() =&gt; {HTMLElement}</li>
</ul>
<h4 id="5-5-3-set"><a href="#5-5-3-set" class="headerlink" title="5.5.3 set"></a>5.5.3 set</h4><ul>
<li>setLayers(layers)</li>
<li>setLayerGroup(layerGroup)</li>
<li>setSize(size)</li>
<li>setTarget(target)</li>
<li>setView(view)</li>
</ul>
<h4 id="5-5-4-remove"><a href="#5-5-4-remove" class="headerlink" title="5.5.4 remove"></a>5.5.4 remove</h4><ul>
<li>removeControl(control) =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_control_Control-Control.html">Control</a> | undefined}</li>
<li>removeInteraction(interaction) =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_interaction_Interaction-Interaction.html">Interaction</a> | undefined}</li>
<li>removeLayer(layer) =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Base-BaseLayer.html">BaseLayer</a> | undefined}</li>
<li>removeOverlay(overlay) =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Overlay-Overlay.html">Overlay</a> | undefined}</li>
</ul>
<h4 id="5-5-5-像素与坐标"><a href="#5-5-5-像素与坐标" class="headerlink" title="5.5.5 像素与坐标"></a>5.5.5 像素与坐标</h4><ul>
<li><p>getEventPixel(event) =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_pixel.html#~Pixel">Pixel</a>}</p>
<blockquote>
<p>Returns the map pixel position for a browser event relative to the viewport.</p>
</blockquote>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mapDom.<span class="property">value</span>?.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="function">(<span class="params">event: MouseEvent</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 获取到地图鼠标的位置</span></span><br><span class="line">  mousePosition = map.<span class="title function_">getEventPixel</span>(event);</span><br><span class="line">  <span class="comment">// 鼠标移动时强制渲染地图</span></span><br><span class="line">  map.<span class="title function_">render</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>getEventCoordinate(event) =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_coordinate.html#~Coordinate">Coordinate</a>}</p>
<blockquote>
<p>Returns the coordinate in user projection for a browser event.</p>
</blockquote>
</li>
<li><p>getCoordinateFromPixel(pixel) =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_coordinate.html#~Coordinate">Coordinate</a>}</p>
<blockquote>
<p>Get the coordinate for a given pixel. This returns a coordinate in the user projection.</p>
</blockquote>
</li>
<li><p>getPixelFromCoordinate(coordinate) =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_pixel.html#~Pixel">Pixel</a>}</p>
<blockquote>
<p>Get the pixel for a coordinate. This takes a coordinate in the user projection and returns the corresponding pixel.</p>
</blockquote>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取到当前视口的像素</span></span><br><span class="line">    <span class="keyword">let</span> eventPixel = map.<span class="title function_">getEventPixel</span>(event.<span class="property">originalEvent</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getEventPixel&#x27;</span>, eventPixel);</span><br><span class="line">    <span class="comment">//获取指定事件的投影坐标</span></span><br><span class="line">    <span class="keyword">let</span> eventCoordinate = map.<span class="title function_">getEventCoordinate</span>(event.<span class="property">originalEvent</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getEventCoordinate&#x27;</span>, eventCoordinate);</span><br><span class="line">    <span class="comment">//获取给定像素的投影坐标</span></span><br><span class="line">    <span class="keyword">let</span> coordinateFromPixel = map.<span class="title function_">getCoordinateFromPixel</span>(event.<span class="property">pixel</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getCoordinateFromPixel&#x27;</span>, coordinateFromPixel);</span><br><span class="line">    <span class="comment">//获取指定坐标的像素。这需要用户投影中的坐标并返回相应的像素</span></span><br><span class="line">    <span class="keyword">let</span> pixelFromCoordinate = map.<span class="title function_">getPixelFromCoordinate</span>([<span class="number">113.35275651421398</span>, <span class="number">23.12185264976067</span>]);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getPixelFromCoordinate&#x27;</span>, pixelFromCoordinate);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>getFeaturesAtPixel(pixel, options) =&gt; {Array&lt; <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Feature.html#~FeatureLike">FeatureLike</a> &gt;}</p>
<blockquote>
<p>Get all features that intersect a pixel on the viewport.</p>
</blockquote>
</li>
<li><p>hasFeatureAtPixel(pixel, options) =&gt; {boolean}</p>
<blockquote>
<p>Detect if features intersect a pixel on the viewport. Layers included in the detection can be configured through the <code>layerFilter</code> option.</p>
</blockquote>
</li>
<li><p>forEachFeatureAtPixel(pixel, callback, opt_options) =&gt; {T | undefined}<br><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240723091146.png" alt="image.png"></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取与视口上的像素相交的所有要素。</span></span><br><span class="line">    <span class="keyword">let</span> feature = map.<span class="title function_">getFeaturesAtPixel</span>(event.<span class="property">pixel</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getFeaturesAtPixel&#x27;</span>, feature);</span><br><span class="line">    map.<span class="title function_">on</span>(<span class="string">&#x27;singleclick&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//检测与视口上的像素相交的featrue</span></span><br><span class="line">      <span class="keyword">let</span> <span class="attr">features</span>: <span class="title class_">FeatureLike</span>[] = [];</span><br><span class="line">      map.<span class="title function_">forEachFeatureAtPixel</span>(</span><br><span class="line">        event.<span class="property">pixel</span>,</span><br><span class="line">        <span class="function">(<span class="params">feature, layer</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(event, feature, layer);</span><br><span class="line">          features.<span class="title function_">push</span>(feature);</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">layerFilter</span>: <span class="keyword">function</span> (<span class="params">layer</span>) &#123;</span><br><span class="line">            <span class="comment">//图层过滤</span></span><br><span class="line">            <span class="keyword">return</span> layer.<span class="title function_">get</span>(<span class="string">&#x27;name&#x27;</span>) === <span class="string">&#x27;gz&#x27;</span>;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">hitTolerance</span>: <span class="number">0</span>, <span class="comment">//以 css 像素为单位的命中检测容差。将检查给定位置周围半径内的像素的featrue。</span></span><br><span class="line">          <span class="attr">checkWrapped</span>: <span class="literal">true</span>, <span class="comment">//将检查 +/- 1 世界宽度范围内的包裹几何图形</span></span><br><span class="line">        &#125;,</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<h4 id="5-5-6-其他"><a href="#5-5-6-其他" class="headerlink" title="5.5.6 其他"></a>5.5.6 其他</h4><ul>
<li><p>render()</p>
<blockquote>
<p>Request a map rendering (at the next animation frame).</p>
</blockquote>
</li>
<li><p>renderSync()</p>
<blockquote>
<p>Requests an immediate render in a synchronous manner.</p>
</blockquote>
</li>
<li><p>updateSize()</p>
<blockquote>
<p>Force a recalculation of the map viewport size. This should be called when third-party code changes the size of the map viewport.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//强制重新计算地图视口大小</span></span><br><span class="line"></span><br><span class="line">  map.<span class="title function_">updateSize</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//在下一个动画帧请求地图渲染</span></span><br><span class="line"></span><br><span class="line">  map.<span class="title function_">render</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//以同步方式请求立即渲染</span></span><br><span class="line"></span><br><span class="line">  map.<span class="title function_">renderSync</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-View-视图"><a href="#5-View-视图" class="headerlink" title="5 View - 视图"></a>5 View - 视图</h2><h3 id="5-1-概览"><a href="#5-1-概览" class="headerlink" title="5.1 概览"></a>5.1 概览</h3><blockquote>
<p>A View object represents a simple 2D view of the map.<br>This is the object to act upon to change the center, resolution, and rotation of the map.<br>A View has a <code>projection</code>. The projection determines the coordinate system of the center, and its units determine the units of the resolution (projection units per pixel). The default projection is Web Mercator (EPSG:3857).</p>
</blockquote>
<h3 id="5-2-new-View-options"><a href="#5-2-new-View-options" class="headerlink" title="5.2 new View(options)"></a>5.2 new View(options)</h3><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>center</code></td>
<td><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_coordinate.html#~Coordinate">Coordinate</a> | undefined</td>
<td>The initial center for the view. If a user projection is not set, the coordinate system for the center is specified with the <code>projection</code> option. Layer sources will not be fetched if this is not set, but the center can be set later with <code>#setCenter</code>.</td>
</tr>
<tr>
<td><code>constrainRotation</code></td>
<td>boolean | number (defaults to true)</td>
<td>Rotation constraint. <code>false</code> means no constraint. <code>true</code> means no constraint, but snap to zero near zero. A number constrains the rotation to that number of values. For example, <code>4</code> will constrain the rotation to 0, 90, 180, and 270 degrees.</td>
</tr>
<tr>
<td><code>enableRotation</code></td>
<td>boolean (defaults to true)</td>
<td>Enable rotation. If <code>false</code>, a rotation constraint that always sets the rotation to zero is used. The <code>constrainRotation</code> option has no effect if <code>enableRotation</code> is <code>false</code>.</td>
</tr>
<tr>
<td><code>extent</code></td>
<td><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_extent.html#~Extent">Extent</a> | undefined</td>
<td>The extent that constrains the view, in other words, nothing outside of this extent can be visible on the map.</td>
</tr>
<tr>
<td><code>constrainOnlyCenter</code></td>
<td>boolean (defaults to false)</td>
<td>If true, the extent constraint will only apply to the view center and not the whole extent.</td>
</tr>
<tr>
<td><code>smoothExtentConstraint</code></td>
<td>boolean (defaults to true)</td>
<td>If true, the extent constraint will be applied smoothly, i.e. allow the view to go slightly outside of the given <code>extent</code>.</td>
</tr>
<tr>
<td><code>maxResolution</code></td>
<td>number | undefined</td>
<td>The maximum resolution used to determine the resolution constraint. It is used together with <code>minResolution</code> (or <code>maxZoom</code>) and <code>zoomFactor</code>. If unspecified it is calculated in such a way that the projection’s validity extent fits in a 256x256 px tile. If the projection is Spherical Mercator (the default) then <code>maxResolution</code> defaults to <code>40075016.68557849 / 256 = 156543.03392804097</code>.</td>
</tr>
<tr>
<td><code>minResolution</code></td>
<td>number | undefined</td>
<td>The minimum resolution used to determine the resolution constraint. It is used together with <code>maxResolution</code> (or <code>minZoom</code>) and <code>zoomFactor</code>. If unspecified it is calculated assuming 29 zoom levels (with a factor of 2). If the projection is Spherical Mercator (the default) then <code>minResolution</code> defaults to <code>40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253</code>.</td>
</tr>
<tr>
<td><code>maxZoom</code></td>
<td>number (defaults to 28)</td>
<td>The maximum zoom level used to determine the resolution constraint. It is used together with <code>minZoom</code> (or <code>maxResolution</code>) and <code>zoomFactor</code>. Note that if <code>minResolution</code> is also provided, it is given precedence over <code>maxZoom</code>.</td>
</tr>
<tr>
<td><code>minZoom</code></td>
<td>number (defaults to 0)</td>
<td>The minimum zoom level used to determine the resolution constraint. It is used together with <code>maxZoom</code> (or <code>minResolution</code>) and <code>zoomFactor</code>. Note that if <code>maxResolution</code> is also provided, it is given precedence over <code>minZoom</code>.</td>
</tr>
<tr>
<td><code>multiWorld</code></td>
<td>boolean (defaults to false)</td>
<td>If <code>false</code> the view is constrained so only one world is visible, and you cannot pan off the edge. If <code>true</code> the map may show multiple worlds at low zoom levels. Only used if the <code>projection</code> is global. Note that if <code>extent</code> is also provided it is given precedence.</td>
</tr>
<tr>
<td><code>constrainResolution</code></td>
<td>boolean (defaults to false)</td>
<td>If true, the view will always animate to the closest zoom level after an interaction; false means intermediary zoom levels are allowed.</td>
</tr>
<tr>
<td><code>smoothResolutionConstraint</code></td>
<td>boolean (defaults to true)</td>
<td>If true, the resolution min/max values will be applied smoothly, i. e. allow the view to exceed slightly the given resolution or zoom bounds.</td>
</tr>
<tr>
<td><code>showFullExtent</code></td>
<td>boolean (defaults to false)</td>
<td>Allow the view to be zoomed out to show the full configured extent. By default, when a view is configured with an extent, users will not be able to zoom out so the viewport exceeds the extent in either dimension. This means the full extent may not be visible if the viewport is taller or wider than the aspect ratio of the configured extent. If showFullExtent is true, the user will be able to zoom out so that the viewport exceeds the height or width of the configured extent, but not both, allowing the full extent to be shown.</td>
</tr>
<tr>
<td><code>projection</code></td>
<td><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_proj.html#~ProjectionLike">ProjectionLike</a> (defaults to ‘EPSG:3857’)</td>
<td>The projection. The default is Spherical Mercator.</td>
</tr>
<tr>
<td><code>resolution</code></td>
<td>number | undefined</td>
<td>The initial resolution for the view. The units are <code>projection</code> units per pixel (e.g. meters per pixel). An alternative to setting this is to set <code>zoom</code>. Layer sources will not be fetched if neither this nor <code>zoom</code> are defined, but they can be set later with <code>#setZoom</code> or <code>#setResolution</code>.</td>
</tr>
<tr>
<td><code>resolutions</code></td>
<td>Array.<number> | undefined</td>
<td>Resolutions that determine the zoom levels if specified. The index in the array corresponds to the zoom level, therefore the resolution values have to be in descending order. It also constrains the resolution by the minimum and maximum value. If set the <code>maxResolution</code>, <code>minResolution</code>, <code>minZoom</code>, <code>maxZoom</code>, and <code>zoomFactor</code> options are ignored.</td>
</tr>
<tr>
<td><code>rotation</code></td>
<td>number (defaults to 0)</td>
<td>The initial rotation for the view in radians (positive rotation clockwise, 0 means North).</td>
</tr>
<tr>
<td><code>zoom</code></td>
<td>number | undefined</td>
<td>Only used if <code>resolution</code> is not defined. Zoom level used to calculate the initial resolution for the view.</td>
</tr>
<tr>
<td><code>zoomFactor</code></td>
<td>number (defaults to 2)</td>
<td>The zoom factor used to compute the corresponding resolution.</td>
</tr>
<tr>
<td><code>padding</code></td>
<td>Array.<number> (defaults to [0, 0, 0, 0])</td>
<td>Padding (in css pixels). If the map viewport is partially covered with other content (overlays) along its edges, this setting allows to shift the center of the viewport away from that content. The order of the values is top, right, bottom, left.</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> view = <span class="keyword">new</span> <span class="title class_">View</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">center</span>: [<span class="number">113.24981689453125</span>, <span class="number">23.126468438108688</span>], <span class="comment">//视图中心位置</span></span><br><span class="line">    <span class="attr">projection</span>: <span class="string">&#x27;EPSG:4326&#x27;</span>, <span class="comment">//指定投影,84参考系投影</span></span><br><span class="line">    <span class="attr">zoom</span>: <span class="number">12</span>, <span class="comment">//缩放到的级别</span></span><br><span class="line">    <span class="attr">constrainRotation</span>: <span class="literal">false</span>, <span class="comment">//true/false 没有约束，4将旋转限制为 0、90、180 和 270 度</span></span><br><span class="line">    <span class="attr">enableRotation</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">constrainOnlyCenter</span>: <span class="literal">false</span>, <span class="comment">// 如果为 true，则范围约束将仅适用于视图中心而不是整个范围</span></span><br><span class="line">    <span class="attr">extent</span>: [-<span class="number">180.0</span>, <span class="number">0.0</span>, <span class="number">180.0</span>, <span class="number">90.0</span>], <span class="comment">// 限制视图的范围 [左下角经度，左下角纬度，右上角经度，右上角纬度]</span></span><br><span class="line">    <span class="attr">smoothExtentConstraint</span>: <span class="literal">true</span>, <span class="comment">// 如果为 true，范围约束将被平滑地应用，即允许视图稍微超出给定的 extent</span></span><br><span class="line">    <span class="attr">maxResolution</span>: <span class="number">256</span>, <span class="comment">// 如果未指定，则以投影的有效范围适合 256x256 像素图块的方式计算</span></span><br><span class="line">    <span class="attr">minResolution</span>: <span class="number">256</span>, <span class="comment">// 如果未指定，则以投影的有效范围适合 256x256 像素图块的方式计算</span></span><br><span class="line">    <span class="attr">maxZoom</span>: <span class="number">5</span>, <span class="comment">//用于确定分辨率约束的最大缩放级别</span></span><br><span class="line">    <span class="attr">minZoom</span>: <span class="number">0</span>, <span class="comment">//用于确定分辨率约束的最小缩放级别</span></span><br><span class="line">    <span class="attr">multiWorld</span>: <span class="literal">false</span>, <span class="comment">//如果 false 视图受到约束，因此只有一个世界可见，并且您无法平移边缘。如果 true 地图可能以低缩放级别显示多个世界</span></span><br><span class="line">    <span class="attr">constrainResolution</span>: <span class="literal">false</span>, <span class="comment">//如果为 true，则视图将始终在交互后以最接近的缩放级别进行动画处理；false 表示允许中间缩放级别。</span></span><br><span class="line">    <span class="attr">smoothResolutionConstraint</span>: <span class="literal">true</span>, <span class="comment">//如果为 true，则视图将始终在交互后以最接近的缩放级别进行动画处理；false 表示允许中间缩放级别。</span></span><br><span class="line">    <span class="attr">showFullExtent</span>: <span class="literal">true</span>, <span class="comment">//允许缩小视图以显示完整的配置范围</span></span><br><span class="line">    <span class="attr">resolution</span>: <span class="number">2</span>, <span class="comment">//视图的初始分辨率。单位是 projection 每像素的单位（例如每像素米</span></span><br><span class="line">    <span class="attr">resolutions</span>: [<span class="number">50</span>, <span class="number">40</span>, <span class="number">30</span>, <span class="number">20</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">2</span>], <span class="comment">//指定缩放级别的分辨率,数组中的索引对应于缩放级别，因此分辨率值必须按降序排列。</span></span><br><span class="line">    <span class="attr">rotation</span>: <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>, <span class="comment">//以弧度为单位的视图初始旋转（顺时针旋转，0 表示北）</span></span><br><span class="line">    <span class="attr">zoomFactor</span>: <span class="number">2</span>, <span class="comment">//用于计算相应分辨率的缩放因子</span></span><br><span class="line">    <span class="attr">padding</span>: [<span class="number">350</span>, <span class="number">150</span>, <span class="number">150</span>, <span class="number">150</span>], <span class="comment">//填充（以 css 像素为单位）顺序是上、右、下、左,如果地图视口沿其边缘部分被其他内容（覆盖）覆盖，则此设置允许将视口的中心从该内容移开</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="5-6-Extends"><a href="#5-6-Extends" class="headerlink" title="5.6 Extends"></a>5.6 Extends</h3><ul>
<li><a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_Object-BaseObject.html">BaseObject</a></li>
</ul>
<h3 id="5-7-Observable-Properties"><a href="#5-7-Observable-Properties" class="headerlink" title="5.7 Observable Properties"></a>5.7 Observable Properties</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240723101140.png" alt="image.png"></p>
<h3 id="5-8-Fire"><a href="#5-8-Fire" class="headerlink" title="5.8 Fire"></a>5.8 Fire</h3><p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240723101103.png" alt="image.png"></p>
<h3 id="5-9-Methods"><a href="#5-9-Methods" class="headerlink" title="5.9 Methods"></a>5.9 Methods</h3><h4 id="5-9-1-adjust"><a href="#5-9-1-adjust" class="headerlink" title="5.9.1 adjust"></a>5.9.1 adjust</h4><blockquote>
<p>opt_anchor 为锚点(可选值)<br><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240723101436.png" alt="image.png"></p>
</blockquote>
<ul>
<li>adjustCenter(deltaCoordinates)</li>
<li>adjustResolution(ratio, opt_anchor)</li>
<li>adjustRotation(delta, opt_anchor)</li>
<li>adjustZoom(delta, opt_anchor)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> view = map.<span class="title function_">getView</span>();</span><br><span class="line">  <span class="keyword">if</span> (view) &#123;</span><br><span class="line">    view.<span class="title function_">adjustCenter</span>([-<span class="number">10</span>, <span class="number">3</span>]); <span class="comment">// 将相对坐标添加到视图的中心</span></span><br><span class="line">    view.<span class="title function_">adjustResolution</span>(<span class="number">3</span>) <span class="comment">//将视图分辨率乘以一个比率</span></span><br><span class="line">    view.<span class="title function_">adjustRotation</span>(<span class="title class_">Math</span>.<span class="property">PI</span>/<span class="number">2</span>,[<span class="number">130</span>,<span class="number">25</span>])<span class="comment">//向视图旋转添加一个值, [130,25]为锚点</span></span><br><span class="line">    view.<span class="title function_">adjustZoom</span>(<span class="number">3</span>,[<span class="number">100</span>,<span class="number">25</span>])<span class="comment">// 将值添加到视图缩放级别</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-9-2-animate-var-args"><a href="#5-9-2-animate-var-args" class="headerlink" title="5.9.2 animate(var_args)"></a>5.9.2 animate(var_args)</h4><p>Animate the view. The view’s center, zoom (or resolution), and rotation can be animated for smooth transitions between view states. For example, to animate the view to a new zoom level:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view.<span class="title function_">animate</span>(&#123;<span class="attr">zoom</span>: view.<span class="title function_">getZoom</span>() + <span class="number">1</span>&#125;);</span><br></pre></td></tr></table></figure>

<p>By default, the animation lasts one second and uses in-and-out easing. You can customize this behavior by including <code>duration</code> (in milliseconds) and <code>easing</code> options (see <a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_easing.html"><code>ol/easing</code></a>).</p>
<p>To chain together multiple animations, call the method with multiple animation objects. For example, to first zoom and then pan:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view.<span class="title function_">animate</span>(&#123;<span class="attr">zoom</span>: <span class="number">10</span>&#125;, &#123;<span class="attr">center</span>: [<span class="number">0</span>, <span class="number">0</span>]&#125;);</span><br></pre></td></tr></table></figure>

<p>If you provide a function as the last argument to the animate method, it will get called at the end of an animation series. The callback will be called with <code>true</code> if the animation series completed on its own or <code>false</code> if it was cancelled.</p>
<p>Animations are cancelled by user interactions (e.g. dragging the map) or by calling <code>view.setCenter()</code>, <code>view.setResolution()</code>, or <code>view.setRotation()</code> (or another method that calls one of these).</p>
<p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240723101912.png" alt="image.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; easeIn, easeOut &#125; <span class="keyword">from</span> <span class="string">&#x27;ol/easing&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> view = map.<span class="title function_">getView</span>();</span><br><span class="line">  <span class="keyword">if</span> (view) &#123;</span><br><span class="line">    view.<span class="title function_">animate</span>(</span><br><span class="line">      &#123; <span class="attr">zoom</span>: <span class="number">10</span>, <span class="attr">rotation</span>: <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>, <span class="attr">duration</span>: <span class="number">2000</span> &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">center</span>: [<span class="number">116.36564254760744</span>, <span class="number">39.90486412650293</span>],</span><br><span class="line">        <span class="attr">easing</span>: easeOut,</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">10000</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">(<span class="params">flag</span>) =&gt;</span> &#123; <span class="comment">// 回调函数</span></span><br><span class="line">        <span class="keyword">if</span> (flag) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;动画完成&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;动画取消&#x27;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//取消动画</span></span><br><span class="line">      view.<span class="title function_">cancelAnimations</span>();</span><br><span class="line">    &#125;, <span class="number">5000</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-9-3-fit-geometryOrExtent-options"><a href="#5-9-3-fit-geometryOrExtent-options" class="headerlink" title="5.9.3 fit(geometryOrExtent, options)"></a>5.9.3 fit(geometryOrExtent, options)</h4><blockquote>
<p>Fit the given geometry or extent based on the given map size and border. The size is pixel dimensions of the box to fit the extent into. In most cases you will want to use the map size, that is <code>map.getSize()</code>. Takes care of the map angle.</p>
</blockquote>
<p><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240723103252.png" alt="image.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> view = map.<span class="title function_">getView</span>();</span><br><span class="line">  <span class="keyword">let</span> extent = [<span class="number">106.36564254760744</span>, <span class="number">30.90486412650293</span>, <span class="number">116.36564254760744</span>, <span class="number">39.90486412650293</span>];</span><br><span class="line">  <span class="keyword">if</span> (view) &#123;</span><br><span class="line">    view.<span class="title function_">fit</span>(extent, &#123;</span><br><span class="line">      <span class="comment">//根据给定的地图大小和边界拟合给定的几何图形或范围</span></span><br><span class="line">      <span class="attr">duration</span>: <span class="number">3000</span>,</span><br><span class="line">      <span class="attr">callback</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fit 函数执行完毕&#x27;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-9-4-get、set"><a href="#5-9-4-get、set" class="headerlink" title="5.9.4 get、set"></a>5.9.4 get、set</h4><ul>
<li><p>get/set 属性名</p>
</li>
<li><p>getAnimating() =&gt; {boolean}</p>
<blockquote>
<p>Determine if the view is being animated.</p>
</blockquote>
</li>
<li><p>getZoomForResolution(resolution) =&gt; {number | undefined}</p>
<blockquote>
<p>Get the zoom level for a resolution.</p>
</blockquote>
</li>
<li><p>getResolutionForZoom(zoom) =&gt; {number}</p>
<blockquote>
<p>Get the resolution for a zoom level.</p>
</blockquote>
</li>
<li><p>getResolutionForExtent(extent, size) =&gt; {number}</p>
<blockquote>
<p>Get the resolution for a provided extent (in map units) and size (in pixels).</p>
</blockquote>
</li>
</ul>
<h4 id="5-9-5-其他"><a href="#5-9-5-其他" class="headerlink" title="5.9.5 其他"></a>5.9.5 其他</h4><ul>
<li><p>beginInteraction()</p>
<blockquote>
<p>Notify the View that an interaction has started. The view state will be resolved to a stable one if needed (depending on its constraints).</p>
</blockquote>
</li>
<li><p>endInteraction(duration, resolutionDirection, anchor)</p>
<blockquote>
<p>Notify the View that an interaction has ended. The view state will be resolved to a stable one if needed (depending on its constraints).<br><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240723103547.png" alt="image.png"></p>
</blockquote>
</li>
<li><p>calculateExtent(size) =&gt; {<a target="_blank" rel="noopener" href="https://openlayers.org/en/latest/apidoc/module-ol_extent.html#~Extent">Extent</a>}</p>
<blockquote>
<p>Calculate the extent for the current view state and the passed box size.</p>
</blockquote>
</li>
<li><p>centerOn(coordinate, size, position)</p>
<blockquote>
<p>Center on coordinate and view position.<br><img src="https://picgocloud.oss-cn-shanghai.aliyuncs.com/picgo/20240723103700.png" alt="image.png"></p>
</blockquote>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://VernalScenery.github.io">Scenery</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://vernalscenery.github.io/2024/07/26/01%20openLayer_%E5%85%A5%E9%97%A8/">https://vernalscenery.github.io/2024/07/26/01%20openLayer_%E5%85%A5%E9%97%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://VernalScenery.github.io" target="_blank">春和景明的记事本</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/openLayer/">openLayer</a><a class="post-meta__tags" href="/tags/WebGIS/">WebGIS</a></div><div class="post_share"><div class="social-share" data-image="/./img/1.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/26/02%20openLayer_Control%20%E6%8E%A7%E4%BB%B6/" title="02 openLayer_Control 控件"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">02 openLayer_Control 控件</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/25/%E9%9D%9E%E6%9A%B4%E5%8A%9B%E6%B2%9F%E9%80%9A_update/" title="非暴力沟通_update"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">非暴力沟通_update</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/07/26/02%20openLayer_Control%20%E6%8E%A7%E4%BB%B6/" title="02 openLayer_Control 控件"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="title">02 openLayer_Control 控件</div></div></a></div><div><a href="/2024/07/26/05%20openlayers_OGC%20%E6%9C%8D%E5%8A%A1/" title="05 openlayers_OGC 服务"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="title">05 openlayers_OGC 服务</div></div></a></div><div><a href="/2024/07/26/03%20openLayer_Layer%20+%20Source%20%E5%90%84%E7%A7%8D%E6%95%B0%E6%8D%AE/" title="03 openLayer_Layer + Source 各种数据"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="title">03 openLayer_Layer + Source 各种数据</div></div></a></div><div><a href="/2024/07/27/06%20openlayers_OGC%20%E8%BF%87%E6%BB%A4%E5%99%A8/" title="06 openlayers_OGC 过滤器"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-27</div><div class="title">06 openlayers_OGC 过滤器</div></div></a></div><div><a href="/2024/07/26/04%20openLayer_Interaction%20%E5%9C%B0%E5%9B%BE%E4%BA%A4%E4%BA%92/" title="04 openLayer_Interaction 地图交互"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="title">04 openLayer_Interaction 地图交互</div></div></a></div><div><a href="/2024/07/29/08%20openLayer_Proj4%20%E6%8A%95%E5%BD%B1%E8%BD%AC%E6%8D%A2/" title="08 openLayer_Proj4 投影转换"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-29</div><div class="title">08 openLayer_Proj4 投影转换</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/./img/1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Scenery</div><div class="author-info__description">今天不想跑，所以才去跑</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">38</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/chjm0121" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/1595718686@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%BB%BC%E8%BF%B0"><span class="toc-text">1 综述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Observable-%E6%8A%BD%E8%B1%A1%E5%9F%BA%E7%B1%BB-%E5%8F%AF%E8%A7%82%E5%AF%9F%E7%B1%BB"><span class="toc-text">2 Observable - 抽象基类 - 可观察类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Subclasses"><span class="toc-text">2.1 Subclasses</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Fires-%E4%BA%8B%E4%BB%B6"><span class="toc-text">2.2 Fires(事件)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-chang-BaseEvent"><span class="toc-text">2.2.1 chang(BaseEvent)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-error-BaseEvent"><span class="toc-text">2.2.2 error(BaseEvent)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-Methods-%E6%96%B9%E6%B3%95"><span class="toc-text">2.3 Methods(方法)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-changed"><span class="toc-text">2.3.1 changed()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-dispatchEvent-event-gt-boolean-undefined"><span class="toc-text">2.3.2 dispatchEvent(event)&#x3D;&gt; {boolean | undefined}</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-3-getRevision-gt-number"><span class="toc-text">2.3.3 getRevision()&#x3D;&gt;{number}</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-on-type-listener-%E3%80%81once-type-listener-%E3%80%81-un-type-listener"><span class="toc-text">2.3.4 on(type, listener)、once(type, listener)、 un(type, listener)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-BaseObject-%E6%8A%BD%E8%B1%A1%E5%9F%BA%E7%B1%BB"><span class="toc-text">3 BaseObject - 抽象基类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-Subclasses"><span class="toc-text">3.1 Subclasses</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-Extends"><span class="toc-text">3.2 Extends</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Fires-%E4%BA%8B%E4%BB%B6"><span class="toc-text">3.3 Fires(事件)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-chang-BaseEvent-inherit"><span class="toc-text">3.3.1 chang(BaseEvent)[inherit]</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-error-BaseEvent-inherit"><span class="toc-text">3.3.2 error(BaseEvent)[inherit]</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3-propertychange-ObjectEvent"><span class="toc-text">3.3.3 propertychange(ObjectEvent)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-Methods-%E6%96%B9%E6%B3%95"><span class="toc-text">3.4 Methods(方法)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-changed-inherit"><span class="toc-text">3.4.1 changed() [inherit]</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-2-on-type-listener-%E3%80%81once-type-listener-%E3%80%81-un-type-listener-inherit"><span class="toc-text">3.4.2 on(type, listener)、once(type, listener)、 un(type, listener)[inherit]</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-3-getRevision-gt-number-inherit"><span class="toc-text">3.4.3 getRevision()&#x3D;&gt;{number}[inherit]</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-4-get-key"><span class="toc-text">3.4.4 get(key)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-5-getKeys-gt-Array-lt-string-gt"><span class="toc-text">3.4.5 getKeys()&#x3D;&gt; {Array.&lt;string&gt;}</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-6-getProperties-gt-Object-lt-string-gt"><span class="toc-text">3.4.6 getProperties()&#x3D;&gt;{Object.&lt;string, * &gt; }</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-7-set-key-value-silent"><span class="toc-text">3.4.7 set(key, value, silent)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-8-setProperties-values-silent"><span class="toc-text">3.4.8 setProperties(values, silent)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-9-unset-key-silent"><span class="toc-text">3.4.9 unset(key, silent)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Collection-JS-%E6%95%B0%E7%BB%84%E7%9A%84%E6%89%A9%E5%B1%95"><span class="toc-text">4 Collection - JS 数组的扩展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-new-Collection-array-options"><span class="toc-text">4.1 new Collection(array, options)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-Fires"><span class="toc-text">4.2 Fires</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-Extends"><span class="toc-text">4.3 Extends</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-Observable-Properties"><span class="toc-text">4.4 Observable Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-Methods"><span class="toc-text">4.5 Methods</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Map-%E5%9C%B0%E5%9B%BE"><span class="toc-text">5 Map - 地图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Extends"><span class="toc-text">5.1 Extends</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-new-Map-options"><span class="toc-text">5.2 new Map(options)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-Fires-%E4%BA%8B%E4%BB%B6"><span class="toc-text">5.3 Fires(事件)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-1-BaseEvent"><span class="toc-text">5.3.1 BaseEvent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-2-ObjectEvent"><span class="toc-text">5.3.2 ObjectEvent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-3-MapBrowserEvent"><span class="toc-text">5.3.3 MapBrowserEvent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-4-MapEvent"><span class="toc-text">5.3.4 MapEvent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-5-RenderEvent"><span class="toc-text">5.3.5 RenderEvent</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-Observable-Properties"><span class="toc-text">5.4 Observable Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-Methods-%E6%96%B9%E6%B3%95"><span class="toc-text">5.5 Methods(方法)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-1-add"><span class="toc-text">5.5.1 add</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-2-get"><span class="toc-text">5.5.2 get</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-3-set"><span class="toc-text">5.5.3 set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-4-remove"><span class="toc-text">5.5.4 remove</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-5-%E5%83%8F%E7%B4%A0%E4%B8%8E%E5%9D%90%E6%A0%87"><span class="toc-text">5.5.5 像素与坐标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-6-%E5%85%B6%E4%BB%96"><span class="toc-text">5.5.6 其他</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-View-%E8%A7%86%E5%9B%BE"><span class="toc-text">5 View - 视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E6%A6%82%E8%A7%88"><span class="toc-text">5.1 概览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-new-View-options"><span class="toc-text">5.2 new View(options)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-Extends"><span class="toc-text">5.6 Extends</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-Observable-Properties"><span class="toc-text">5.7 Observable Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-Fire"><span class="toc-text">5.8 Fire</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-Methods"><span class="toc-text">5.9 Methods</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-9-1-adjust"><span class="toc-text">5.9.1 adjust</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-9-2-animate-var-args"><span class="toc-text">5.9.2 animate(var_args)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-9-3-fit-geometryOrExtent-options"><span class="toc-text">5.9.3 fit(geometryOrExtent, options)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-9-4-get%E3%80%81set"><span class="toc-text">5.9.4 get、set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-9-5-%E5%85%B6%E4%BB%96"><span class="toc-text">5.9.5 其他</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/07/13_ThreeJS_%E5%B0%84%E7%BA%BF%E6%8B%BE%E5%8F%96%E6%A8%A1%E5%9E%8B/" title="13_ThreeJS_射线拾取模型">13_ThreeJS_射线拾取模型</a><time datetime="2024-11-06T23:24:26.000Z" title="发表于 2024-11-07 07:24:26">2024-11-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/07/12_ThreeJS_%E5%90%8E%E5%A4%84%E7%90%86EffectComposer/" title="12_ThreeJS_后处理EffectComposer">12_ThreeJS_后处理EffectComposer</a><time datetime="2024-11-06T20:52:32.000Z" title="发表于 2024-11-07 04:52:32">2024-11-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/05/01_JSLearn_%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%92%8Cv8%E5%BC%95%E6%93%8E/" title="01_JSLearn_浏览器工作原理和v8引擎">01_JSLearn_浏览器工作原理和v8引擎</a><time datetime="2024-11-04T22:54:58.000Z" title="发表于 2024-11-05 06:54:58">2024-11-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/05/11_ThreeJS_%E5%85%89%E6%BA%90%E5%92%8C%E9%98%B4%E5%BD%B1/" title="11_ThreeJS_光源和阴影">11_ThreeJS_光源和阴影</a><time datetime="2024-11-04T21:41:29.000Z" title="发表于 2024-11-05 05:41:29">2024-11-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/24/10_ThreeJS_%E7%9B%B8%E6%9C%BA%E5%9F%BA%E7%A1%80/" title="10_ThreeJS_相机基础">10_ThreeJS_相机基础</a><time datetime="2024-09-24T00:18:54.000Z" title="发表于 2024-09-24 08:18:54">2024-09-24</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/./img/1.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Scenery</div><div class="footer_custom_text"><div>波澜不惊</div><div class="footer-div"><img class="footer-icon" src="./img/备案图标.png"><a class="footer-a" target="_blank" rel="noopener" href="http://beian.miit.gov.cn/">皖ICP备2021016944号-1</a></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>